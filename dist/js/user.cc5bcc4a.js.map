{"version":3,"file":"js/user.cc5bcc4a.js","mappings":"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","sources":["webpack://wavetune/./src/views/UserFeedbackView.vue","webpack://wavetune/./src/views/UserFeedbackView.vue?6749","webpack://wavetune/./src/components/global/CardContainer.vue","webpack://wavetune/./src/components/global/CardContainer.vue?4bce","webpack://wavetune/./src/views/UserCenterView.vue","webpack://wavetune/./src/views/UserCenterView.vue?9b23"],"sourcesContent":["<template>\r\n  <div class=\"user-feedback-view\">\r\n    <!-- 波形背景装饰 -->\r\n    <div class=\"wave-background\">\r\n      <div class=\"wave wave-1\"></div>\r\n      <div class=\"wave wave-2\"></div>\r\n      <div class=\"wave wave-3\"></div>\r\n    </div>\r\n    <!-- 顶部导航区域 -->\r\n    <div class=\"top-section\">\r\n\r\n      <el-page-header content=\"用户信息与反馈\" class=\"page-header\">\r\n        <template #extra>\r\n          <div class=\"header-divider\"></div>\r\n        </template>\r\n      </el-page-header>\r\n    </div>\r\n\r\n    <!-- 主要内容区域 -->\r\n    <el-row :gutter=\"20\" class=\"main-section\">\r\n      <!-- 个人信息卡片 -->\r\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n        <CardContainer title=\"个人信息\" class=\"user-info-card\">\r\n          <div class=\"avatar-section\">\r\n            <el-avatar \r\n              :size=\"100\" \r\n              :src=\"user.avatar || '/static/avatar/default.jpg'\" \r\n              class=\"user-avatar\" \r\n            />\r\n            <div style=\"margin-top: 12px\">{{ user.name || '未登录' }}</div>\r\n            <el-button \r\n              type=\"text\" \r\n              class=\"change-avatar-btn\" \r\n              @click=\"$router.push('/user-center')\"\r\n            >\r\n              更换头像\r\n            </el-button>\r\n          </div>\r\n\r\n          <el-descriptions :column=\"1\" class=\"user-descriptions\">\r\n            <el-descriptions-item label=\"姓名\">\r\n              <span class=\"user-name\">{{ user.name || '—' }}</span>\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"学号\">{{ user.student_id || '—' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"注册\">{{ user.create_time ? formatDate(user.create_time) : '—' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"检测\">\r\n              <span class=\"status-normal\">{{ user.detection_count || 0 }} 次</span>\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"干预\">\r\n              <span class=\"status-primary\">{{ user.intervention_count || 0 }} 次</span>\r\n            </el-descriptions-item>\r\n          </el-descriptions>\r\n\r\n          <div class=\"info-notice\">\r\n            以上信息仅用于系统数据关联，不会对外泄露\r\n          </div>\r\n        </CardContainer>\r\n      </el-col>\r\n\r\n      <!-- 反馈表单卡片 -->\r\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"16\" :lg=\"16\" :xl=\"16\">\r\n        <CardContainer title=\"系统使用反馈\" class=\"feedback-form-card\">\r\n          <el-form \r\n            ref=\"feedbackFormRef\" \r\n            :model=\"feedbackForm\" \r\n            :rules=\"formRules\" \r\n            label-width=\"100px\" \r\n            class=\"feedback-form\"\r\n          >\r\n            <el-form-item label=\"反馈类型\" prop=\"type\">\r\n              <el-radio-group v-model=\"feedbackForm.type\">\r\n                <el-radio label=\"accuracy\">脑疲劳检测准确性</el-radio>\r\n                <el-radio label=\"music\">轻音乐推荐效果</el-radio>\r\n                <el-radio label=\"function\">系统功能建议</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"反馈内容\" prop=\"content\">\r\n              <el-input \r\n                v-model=\"feedbackForm.content\" \r\n                type=\"textarea\" \r\n                :rows=\"5\" \r\n                placeholder=\"请详细描述您的体验或建议（最多 500 字）\" \r\n                maxlength=\"500\" \r\n                show-word-limit \r\n              />\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"满意度评分\" prop=\"rating\">\r\n              <div class=\"rating-section\">\r\n                <p class=\"rating-title\">对系统的满意度</p>\r\n                <!-- 仅显示星星，不显示数值 -->\r\n                <el-rate v-model=\"feedbackForm.rating\" :max=\"5\" />\r\n              </div>\r\n            </el-form-item>\r\n\r\n            <el-form-item class=\"form-actions\">\r\n              <div class=\"action-buttons\">\r\n                <el-button @click=\"cancelFeedback\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitFeedback\">提交反馈</el-button>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <!-- 历史反馈记录 -->\r\n          <div class=\"history-section\" v-if=\"feedbackList.length\">\r\n          <h4>历史反馈</h4>\r\n          <el-timeline>\r\n              <el-timeline-item\r\n                v-for=\"item in feedbackList\"\r\n                :key=\"item.id\"\r\n                :timestamp=\"item.submit_time\"\r\n              >\r\n                <div class=\"history-item\" style=\"padding: 12px; border-radius: 8px; background: #f9f9f9;\">\r\n                  <!-- 操作栏：名称+类型 + 评分+删除 -->\r\n                  <div class=\"history-header\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\r\n                    <div style=\"display:flex;align-items:center;gap:12px\">\r\n                      <strong>{{ user.name || '匿名' }}</strong>\r\n                      <el-tag size=\"small\">{{ item.feedback_type_name || '其他' }}</el-tag>\r\n                    </div>\r\n                    <div style=\"display: flex; align-items: center; gap: 16px;\">\r\n                      <el-rate :model-value=\"item.score\" :max=\"5\" disabled />\r\n                      <el-button type=\"danger\" size=\"mini\" @click=\"deleteFeedback(item.id)\">删除</el-button>\r\n                    </div>\r\n                  </div>\r\n                  <!-- 反馈内容：单独区块，与操作栏分隔 -->\r\n                  <div class=\"history-content\" style=\"padding: 8px; background: #fff; border-radius: 4px;\">\r\n                    {{ item.content }}\r\n                  </div>\r\n                </div>\r\n              </el-timeline-item>\r\n          </el-timeline>\r\n        </div>\r\n          <div v-else class=\"history-empty\" style=\"margin-top:24px;padding:24px;\">\r\n            <el-empty description=\"还没有历史反馈\">\r\n              <template #footer>\r\n                <el-button type=\"primary\" @click=\"$refs.feedbackFormRef?.scrollIntoView?.() || window.scrollTo({top:0,behavior:'smooth'})\">去提交第一个反馈</el-button>\r\n              </template>\r\n            </el-empty>\r\n          </div>\r\n        </CardContainer>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 底部提示区域 -->\r\n    <div class=\"bottom-section\">\r\n      <div class=\"feedback-notice\">\r\n        <p>反馈提交后，我们将在 3 个工作日内评估并回复；若需紧急支持，请通过以下方式联系我们：</p>\r\n        <p>邮箱：<a href=\"mailto:help@wavetune.example\">help@wavetune.com</a> ｜ QQ 群：12345678</p>\r\n        <p>常见问题：<a href=\"/help/faq\" target=\"_blank\">查看 FAQ</a></p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, onBeforeUnmount } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport CardContainer from '@/components/global/CardContainer.vue'\r\nimport { requestMethod } from '@/utils/request'\r\nimport { ElMessage } from 'element-plus'\r\nimport { ElMessageBox } from 'element-plus'\r\n\r\n// 路由实例\r\nconst router = useRouter()\r\n\r\n// 表单引用\r\nconst feedbackFormRef = ref(null)\r\n\r\n// 表单数据\r\nconst feedbackForm = reactive({\r\n  type: 'accuracy',\r\n  content: '',\r\n  rating: 3\r\n})\r\n\r\n// 表单验证规则\r\nconst formRules = {\r\n  type: [\r\n    { required: true, message: '请选择反馈类型', trigger: 'change' }\r\n  ],\r\n  content: [\r\n    { required: true, message: '请输入反馈内容', trigger: 'blur' },\r\n    { min: 10, message: '反馈内容至少10个字符', trigger: 'blur' }\r\n  ]\r\n}\r\n\r\n// 用户信息（补充完整字段）\r\nconst user = reactive({\r\n  avatar: null,\r\n  name: '',\r\n  student_id: '',       // 学号\r\n  create_time: '',      // 注册时间\r\n  detection_count: 0,   // 检测次数\r\n  intervention_count: 0 // 干预次数\r\n})\r\n\r\n// 反馈列表\r\nconst feedbackList = ref([])\r\n\r\n// 加载用户信息（补充完整字段读取）\r\nconst loadUser = () => {\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (u) {\r\n      user.avatar = u.avatar || '/static/avatar/default.jpg'\r\n      user.name = u.username || u.name || ''\r\n      // 补充其他个人信息字段\r\n      user.student_id = u.student_id || ''\r\n      user.create_time = u.create_time || ''\r\n      user.detection_count = u.detection_count || 0\r\n      user.intervention_count = u.intervention_count || 0\r\n    }\r\n  } catch (e) {\r\n    console.error('加载用户信息失败:', e)\r\n  }\r\n}\r\n\r\n// 日期格式化工具\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '—'\r\n  try {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  } catch (e) {\r\n    return dateString // 格式化失败时显示原始字符串\r\n  }\r\n}\r\n\r\n// 获取历史反馈\r\nconst fetchFeedbackList = async () => {\r\n  try {\r\n    // 尝试从 localStorage 获取用户ID\r\n    let userId = null\r\n    try {\r\n      const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n      if (u && u.id) userId = u.id\r\n    } catch (e) {\r\n      console.error('获取用户ID失败:', e)\r\n    }\r\n\r\n    if (!userId) {\r\n      feedbackList.value = []\r\n      return\r\n    }\r\n\r\n    const res = await requestMethod.get('/feedback/history', {\r\n      user_id: userId,\r\n      page: 1,\r\n      page_size: 20\r\n    })\r\n\r\n    // 后端返回结构: { code, msg, data: { list: [...] } }\r\n    feedbackList.value = res.data?.list || []\r\n  } catch (e) {\r\n    console.error('获取历史反馈失败:', e)\r\n  }\r\n}\r\n\r\n// 提交反馈\r\nconst submitFeedback = async () => {\r\n  // 表单验证\r\n  try {\r\n    await feedbackFormRef.value.validate()\r\n  } catch (err) {\r\n    return\r\n  }\r\n\r\n  // 构建提交数据（按后端 Pydantic 模型字段命名）\r\n  let userId = null\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (u && u.id) userId = u.id\r\n  } catch (e) {\r\n    console.error('获取用户ID失败:', e)\r\n  }\r\n\r\n  if (!userId) {\r\n    ElMessage.error('请先登录后再提交反馈')\r\n    return\r\n  }\r\n\r\n  const payload = {\r\n    user_id: userId,\r\n    feedback_type: feedbackForm.type,\r\n    content: feedbackForm.content.trim(),\r\n    score: feedbackForm.rating\r\n  }\r\n\r\n  // 发送请求\r\n  try {\r\n    await requestMethod.post('/feedback/submit', payload)\r\n    ElMessage.success('反馈已提交，感谢您的建议')\r\n    // 重新拉取历史反馈，确保格式一致\r\n    await fetchFeedbackList()\r\n    // 重置表单\r\n    feedbackForm.content = ''\r\n    feedbackForm.rating = 3\r\n    feedbackForm.type = 'accuracy'\r\n    // 触发反馈更新事件\r\n    try {\r\n      window.dispatchEvent(new Event('feedback-changed'))\r\n    } catch (e) {}\r\n  } catch (e) {\r\n    console.error('提交反馈失败:', e)\r\n  }\r\n}\r\n\r\n// 删除反馈\r\nconst deleteFeedback = async (feedbackId) => {\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (!u || !u.id) {\r\n      ElMessage.error('请先登录')\r\n      return\r\n    }\r\n\r\n    await ElMessageBox.confirm('确认删除这条反馈吗？此操作不可恢复', '删除反馈', {\r\n      confirmButtonText: '确认',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n\r\n      const res = await requestMethod.delete(`/feedback/${feedbackId}`, { user_id: u.id })\r\n    if (res && res.code === 200) {\r\n      ElMessage.success('删除成功')\r\n      // 从本地列表移除\r\n      feedbackList.value = feedbackList.value.filter(i => i.id !== feedbackId)\r\n      try { window.dispatchEvent(new Event('feedback-changed')) } catch (e) {}\r\n    } else {\r\n      ElMessage.error(res?.msg || '删除失败')\r\n    }\r\n  } catch (e) {\r\n    // 取消确认会抛错，不必提示\r\n    if (e && e.message && e.message.includes('取消')) return\r\n    console.error('删除反馈失败:', e)\r\n    ElMessage.error('删除失败')\r\n  }\r\n}\r\n\r\n// 取消反馈\r\nconst cancelFeedback = () => {\r\n  feedbackForm.content = ''\r\n  feedbackForm.rating = 3\r\n  feedbackForm.type = 'accuracy'\r\n  // 重置表单验证状态\r\n  if (feedbackFormRef.value) {\r\n    feedbackFormRef.value.clearValidate()\r\n  }\r\n}\r\n\r\n// 组件挂载时\r\nonMounted(() => {\r\n  loadUser()\r\n  window.addEventListener('auth-changed', loadUser)\r\n  fetchFeedbackList()\r\n})\r\n\r\n// 组件卸载前\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('auth-changed', loadUser)\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 设计令牌\r\n:root {\r\n  --bg-primary: #ffffff;\r\n  --bg-secondary: #f8fafc;\r\n  --color-primary: #3b82f6;\r\n  --color-primary-light: #93c5fd;\r\n  --color-primary-dark: #2563eb;\r\n  --text-primary: #1e293b;\r\n  --text-secondary: #64748b;\r\n  --border-color: #e2e8f0;\r\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  --radius-sm: 6px;\r\n  --radius-md: 12px;\r\n  --radius-lg: 16px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n}\r\n\r\n.user-feedback-view {\r\n  position: relative;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  background: var(--bg-primary);\r\n  border-radius: var(--radius-lg);\r\n  overflow: visible;\r\n  box-shadow: var(--shadow-md);\r\n  min-height: calc(100vh - 100px);\r\n}\r\n\r\n.wave-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.wave {\r\n  position: absolute;\r\n  width: 200%;\r\n  height: 100px;\r\n  background: linear-gradient(90deg, var(--color-primary-light) 0%, transparent 100%);\r\n  opacity: 0.1;\r\n  border-radius: 50%;\r\n  animation: wave-animation 15s linear infinite;\r\n}\r\n\r\n.wave-1 {\r\n  top: 10%;\r\n  left: -50%;\r\n  animation-duration: 20s;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.wave-2 {\r\n  top: 30%;\r\n  left: -70%;\r\n  animation-duration: 25s;\r\n  animation-delay: -5s;\r\n  height: 150px;\r\n  background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);\r\n}\r\n\r\n.wave-3 {\r\n  top: 50%;\r\n  left: -60%;\r\n  animation-duration: 18s;\r\n  animation-delay: -2s;\r\n  height: 80px;\r\n  background: linear-gradient(90deg, var(--color-primary-dark) 0%, transparent 100%);\r\n}\r\n\r\n@keyframes wave-animation {\r\n  0% {\r\n    transform: translateX(0) translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateX(-25%) translateY(10px);\r\n  }\r\n  100% {\r\n    transform: translateX(-50%) translateY(0);\r\n  }\r\n}\r\n\r\n.top-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: var(--spacing-lg);\r\n  border-bottom: 1px solid var(--border-color);\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n}\r\n\r\n.main-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: var(--spacing-lg);\r\n  min-height: 600px;\r\n\r\n.user-info-card {\r\n  height: fit-content;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n\r\n  .avatar-section {\r\n    text-align: center;\r\n    margin-bottom: var(--spacing-lg);\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.5) 100%);\r\n    border-radius: var(--radius-md);\r\n    padding: var(--spacing-md);\r\n    border: 1px solid var(--border-color);\r\n    \r\n    .user-avatar {\r\n      margin-bottom: var(--spacing-md);\r\n      border: 4px solid rgba(59, 130, 246, 0.2);\r\n      transition: transform 0.3s ease, border-color 0.3s ease;\r\n      \r\n      &:hover {\r\n        transform: scale(1.05);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n\r\n    .change-avatar-btn {\r\n      font-size: 14px;\r\n      transition: all 0.2s ease;\r\n      color: var(--color-primary);\r\n      \r\n      &:hover {\r\n        transform: translateY(-1px);\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n\r\n  .user-descriptions {\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    :deep(.el-descriptions-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-secondary);\r\n    }\r\n    \r\n    .user-name {\r\n      font-weight: 600;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    .status-normal {\r\n      color: #10b981;\r\n      font-weight: 500;\r\n    }\r\n    \r\n    .status-primary {\r\n      color: var(--color-primary);\r\n      font-weight: 500;\r\n    }\r\n  }\r\n\r\n  .info-notice {\r\n    margin-top: var(--spacing-md);\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    text-align: center;\r\n    padding: var(--spacing-sm);\r\n    background: rgba(248, 250, 252, 0.8);\r\n    border-radius: var(--radius-sm);\r\n  }\r\n}\r\n\r\n.feedback-form-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n\r\n  .feedback-form {\r\n    .el-form-item {\r\n      margin-bottom: var(--spacing-lg);\r\n      \r\n      :deep(.el-form-item__label) {\r\n        font-weight: 500;\r\n        color: var(--text-primary);\r\n      }\r\n      \r\n      :deep(.el-input__wrapper) {\r\n        border-radius: var(--radius-md);\r\n        transition: all 0.3s ease;\r\n        \r\n        &:focus-within {\r\n          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n          border-color: var(--color-primary);\r\n        }  \r\n  } \r\n      :deep(.el-radio__label) {\r\n        color: var(--text-primary);\r\n      }\r\n      \r\n      :deep(.el-radio__input.is-checked .el-radio__inner) {\r\n        border-color: var(--color-primary);\r\n        background-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    .rating-section {\r\n      margin-bottom: var(--spacing-md);\r\n\r\n      .rating-title {\r\n        margin-bottom: var(--spacing-sm);\r\n        font-size: 14px;\r\n        color: var(--text-primary);\r\n        font-weight: 500;\r\n      }\r\n      \r\n      :deep(.el-rate__icon) {\r\n        font-size: 22px;\r\n        \r\n        &.is-active {\r\n          color: #f59e0b;\r\n        }\r\n      }\r\n    }\r\n\r\n    .form-actions {\r\n      margin-bottom: 0;\r\n      padding-top: var(--spacing-md);\r\n\r\n      .action-buttons {\r\n        display: flex;\r\n        gap: var(--spacing-md);\r\n      }\r\n    }  \r\n\r\n  .history-section {\r\n    margin-top: var(--spacing-xl);\r\n    padding-top: var(--spacing-lg);\r\n    border-top: 1px dashed var(--border-color);\r\n\r\n    h4 {\r\n      margin-bottom: var(--spacing-md);\r\n      font-size: 16px;\r\n      color: var(--text-primary);\r\n      font-weight: 600;\r\n      position: relative;\r\n      padding-left: var(--spacing-md);\r\n      \r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        left: 0;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 4px;\r\n        height: 16px;\r\n        background-color: var(--color-primary);\r\n        border-radius: 2px;\r\n      }\r\n    }\r\n\r\n    .history-item {\r\n      padding: var(--spacing-md);\r\n      background: rgba(255, 255, 255, 0.95);\r\n      border-radius: var(--radius-md);\r\n      border: 1px solid var(--border-color);\r\n      margin-bottom: calc(var(--spacing-md) * 1.2);\r\n      transition: all 0.24s ease;\r\n      backdrop-filter: blur(6px);\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--spacing-sm);\r\n      word-break: break-word;\r\n      \r\n      &:hover {\r\n        transform: translateY(-4px);\r\n        box-shadow: 0 8px 20px rgba(0,0,0,0.06);\r\n        border-color: var(--color-primary-light);\r\n      }\r\n\r\n      .history-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          gap: 12px;\r\n          flex-wrap: wrap;\r\n          margin-bottom: var(--spacing-sm);\r\n          font-size: 14px;\r\n\r\n          .left {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n          }\r\n\r\n          .date {\r\n            font-weight: 500;\r\n            color: var(--text-secondary);\r\n            font-size: 13px;\r\n          }\r\n\r\n          .feedback-type {\r\n            color: var(--color-primary);\r\n            font-weight: 600;\r\n            font-size: 13px;\r\n          }\r\n\r\n          .rating {\r\n            color: #f59e0b;\r\n            font-weight: 500;\r\n          }\r\n        }\r\n\r\n        .history-content {\r\n          font-size: 14px;\r\n          color: var(--text-primary);\r\n          line-height: 1.7;\r\n          padding: 12px;\r\n          background: rgba(248, 250, 252, 0.95);\r\n          border-radius: var(--radius-sm);\r\n          border-left: 3px solid var(--color-primary);\r\n          max-width: 100%;\r\n          white-space: pre-wrap;\r\n          word-break: break-word;\r\n        }\r\n      \r\n      .history-actions {\r\n        margin-top: var(--spacing-sm);\r\n        display: flex;\r\n        gap: var(--spacing-sm);\r\n      }\r\n    }\r\n    /* 确保 Element Plus 时间线的内容区域不被固定宽度或 padding 限制 */\r\n    :deep(.el-timeline) {\r\n      padding-left: 0;\r\n    }\r\n    :deep(.el-timeline-item__wrapper) {\r\n      display: block;\r\n      padding: 0 0 16px 0;\r\n    }\r\n    :deep(.el-timeline-item__content) {\r\n      width: 100% !important;\r\n      padding: 0 !important;\r\n    }\r\n  }\r\n}\r\n\r\n.bottom-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: calc(var(--spacing-lg) * 1.5);\r\n  border-top: 1px solid var(--border-color);\r\n  text-align: left;\r\n  background: linear-gradient(180deg, rgba(250,250,250,0.6), transparent);\r\n  backdrop-filter: blur(8px);\r\n\r\n  .feedback-notice {\r\n    margin: 0 0 var(--spacing-sm) 0;\r\n    font-size: 14px;\r\n    color: var(--text-primary);\r\n    line-height: 1.6;\r\n    font-weight: 500;\r\n  }\r\n\r\n  a {\r\n    color: var(--color-primary);\r\n    text-decoration: none;\r\n    transition: all 0.2s ease;\r\n    font-weight: 500;\r\n    \r\n    &:hover {\r\n      text-decoration: underline;\r\n      color: var(--color-primary-dark);\r\n      transform: translateY(-1px);\r\n    }\r\n  }\r\n\r\n  .contact-row {\r\n    margin-top: var(--spacing-sm);\r\n    display:flex;\r\n    gap: var(--spacing-md);\r\n    flex-wrap:wrap;\r\n    align-items: center;\r\n    \r\n    p {\r\n      margin:0;\r\n      color: var(--text-secondary);\r\n    }\r\n  }\r\n\r\n  .footer-divider {\r\n    height: 1px;\r\n    background: var(--border-color);\r\n    margin: var(--spacing-md) 0;\r\n  }\r\n}\r\n\r\n// 应用响应式工具\r\n@import '@/assets/styles/breakpoints.scss';\r\n\r\n// 响应式适配 - 使用断点混入\r\n@include mobile-layout {\r\n  :root {\r\n    --spacing-page: 16px;\r\n    --spacing-lg: 16px;\r\n    --spacing-md: 12px;\r\n    --spacing-sm: 8px;\r\n  }\r\n  \r\n  .top-section {\r\n    padding: var(--spacing-page);\r\n    min-height: 200px;\r\n  }\r\n  \r\n  .main-section {\r\n    padding: var(--spacing-page);\r\n    gap: var(--spacing-md);\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(16px, 12px);\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n      \r\n      .avatar-container {\r\n        width: 70px;\r\n        height: 70px;\r\n      }\r\n      \r\n      .user-details {\r\n        text-align: center;\r\n      }\r\n    }\r\n    \r\n    .user-details {\r\n      .user-name {\r\n        @include responsive-font(18px, null, 16px);\r\n      }\r\n      \r\n      .user-status {\r\n        @include responsive-font(13px, null, 12px);\r\n      }\r\n    }\r\n    \r\n    .action-button {\r\n      width: 100%;\r\n      font-size: 14px;\r\n      padding: 10px;\r\n    }\r\n  }\r\n  \r\n  .feedback-form-card {\r\n    @include card(16px, 12px);\r\n    margin-top: 0;\r\n    \r\n    .card-title {\r\n      font-size: 18px;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .form-group {\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .form-label {\r\n      font-size: 14px;\r\n      margin-bottom: 8px;\r\n    }\r\n    \r\n    :deep(.el-input__wrapper),\r\n    :deep(.el-textarea__wrapper) {\r\n      padding: 6px 12px;\r\n    }\r\n    \r\n    .rating-container {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-xs);\r\n    }\r\n    \r\n    .submit-button {\r\n      width: 100%;\r\n      padding: 12px;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  \r\n  .history-card {\r\n    @include card(16px, 12px);\r\n    \r\n    .card-title {\r\n      font-size: 18px;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .history-item {\r\n      padding: 16px;\r\n      \r\n      .history-header {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        gap: var(--spacing-xs);\r\n        margin-bottom: var(--spacing-xs);\r\n      }\r\n      \r\n      .history-date {\r\n        font-size: 12px;\r\n      }\r\n      \r\n      .history-content {\r\n        font-size: 13px;\r\n        line-height: 1.5;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .bottom-section {\r\n    padding: var(--spacing-md);\r\n    \r\n    .feedback-notice {\r\n      font-size: 13px;\r\n      line-height: 1.5;\r\n    }\r\n    \r\n    .contact-row {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-sm);\r\n      \r\n      p {\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 平板设备适配\r\n@include respond-to(sm) {\r\n  .content-wrapper {\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    gap: var(--spacing-lg);\r\n  }\r\n  \r\n  .user-info-card,\r\n  .feedback-form-card,\r\n  .history-card {\r\n    @include card(18px);\r\n  }\r\n  \r\n  .user-info-card {\r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .history-item {\r\n    padding: 20px;\r\n  }\r\n}\r\n\r\n// 大屏设备优化\r\n@include large-desktop-layout {\r\n  .user-feedback-view {\r\n    min-height: 100vh;\r\n  }\r\n  \r\n  .main-section {\r\n    @include container(false);\r\n    max-width: 1400px;\r\n    display: grid;\r\n    grid-template-columns: 300px 1fr;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(24px);\r\n    position: sticky;\r\n    top: 100px;\r\n  }\r\n  \r\n  .form-history-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .feedback-form-card,\r\n  .history-card {\r\n    @include card(24px);\r\n  }\r\n}\r\n\r\n// 超大屏设备优化\r\n@include extra-large-desktop-layout {\r\n  .main-section {\r\n    max-width: 1600px;\r\n    grid-template-columns: 350px 1fr;\r\n    gap: 40px;\r\n  }\r\n}\r\n\r\n// 高对比度模式支持\r\n@include high-contrast {\r\n  .user-info-card,\r\n  .feedback-form-card,\r\n  .history-card {\r\n    border: 2px solid #000;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  .history-item {\r\n    border: 1px solid #000;\r\n  }\r\n  \r\n  :deep(.el-button) {\r\n    border-width: 2px;\r\n  }\r\n  \r\n  :deep(.el-input__wrapper),\r\n  :deep(.el-textarea__wrapper) {\r\n    border-width: 2px;\r\n  }\r\n}\r\n\r\n// 减少动画模式支持\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.01ms !important;\r\n    animation-duration: 0.01ms !important;\r\n  }\r\n  \r\n  .wave {\r\n    animation: none !important;\r\n  }\r\n}\r\n  .footer-divider {\r\n    height: 1px;\r\n    background: var(--border-color);\r\n    margin: var(--spacing-lg) 0;\r\n  }\r\n}\r\n\r\n/* 响应式适配 */\r\n@media (max-width: 768px) {\r\n  .user-feedback-view {\r\n    margin: 0;\r\n    border-radius: 0;\r\n    min-height: 100vh;\r\n  }\r\n\r\n  .top-section,\r\n  .main-section,\r\n  .bottom-section {\r\n    padding: var(--spacing-md);\r\n  }\r\n\r\n  .main-section {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .history-item .history-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: var(--spacing-sm);\r\n  }\r\n}\r\n}\r\n</style>","import script from \"./UserFeedbackView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserFeedbackView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserFeedbackView.vue?vue&type=style&index=0&id=5f16712f&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5f16712f\"]])\n\nexport default __exports__","<template>\r\n  <el-card \r\n    :class=\"[\r\n      'modern-card',\r\n      {\r\n        'wave-card': waveStyle,\r\n        'gradient-border': gradientBorder,\r\n        'glow-effect': glowEffect,\r\n        'compact': compact\r\n      },\r\n      customClass\r\n    ]\"\r\n    :shadow=\"shadowLevel\"\r\n  >\r\n    <!-- 头部装饰条 -->\r\n    <div \r\n      v-if=\"showHeaderBar || waveStyle\" \r\n      class=\"card-header-bar\"\r\n      :style=\"headerBarStyle\"\r\n    ></div>\r\n    \r\n    <!-- 标题栏 -->\r\n    <template #header v-if=\"title || $slots.header\">\r\n      <div class=\"card-header\">\r\n        <slot name=\"header\">\r\n          <h3 \r\n            class=\"card-title\" \r\n            :class=\"{\r\n              'title-gradient': gradientTitle,\r\n              'title-large': titleSize === 'large',\r\n              'title-medium': titleSize === 'medium',\r\n              'title-small': titleSize === 'small'\r\n            }\"\r\n          >\r\n            {{ title }}\r\n          </h3>\r\n        </slot>\r\n        <div class=\"card-actions\" v-if=\"$slots.actions\">\r\n          <slot name=\"actions\"></slot>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    \r\n    <!-- 内容区 -->\r\n    <div class=\"card-content\" :style=\"{ padding: contentPadding }\">\r\n      <slot></slot>\r\n    </div>\r\n    \r\n    <!-- 操作按钮区 -->\r\n    <div class=\"card-footer\" v-if=\"$slots.footer\">\r\n      <slot name=\"footer\"></slot>\r\n    </div>\r\n    \r\n    <!-- 波形装饰（仅在waveStyle时显示） -->\r\n    <div v-if=\"waveStyle\" class=\"wave-decoration\">\r\n      <svg viewBox=\"0 0 1440 320\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path \r\n          fill=\"currentColor\" \r\n          fill-opacity=\"0.08\" \r\n          d=\"M0,160L60,170.7C120,181,240,203,360,186.7C480,171,600,117,720,112C840,107,960,149,1080,176C1200,203,1320,213,1380,218.7L1440,224L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z\"\r\n        ></path>\r\n      </svg>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\n\r\nexport default {\r\n  name: 'CardContainer',\r\n  props: {\r\n    // 基础属性\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    shadow: {\r\n      type: String,\r\n      default: 'hover'\r\n    },\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    \r\n    // 新增视觉属性\r\n    waveStyle: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    gradientBorder: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    glowEffect: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    compact: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showHeaderBar: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    gradientTitle: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    \r\n    // 内容控制\r\n    titleSize: {\r\n      type: String,\r\n      default: 'medium',\r\n      validator: (value) => ['small', 'medium', 'large'].includes(value)\r\n    },\r\n    contentPadding: {\r\n      type: String,\r\n      default: '24px'\r\n    },\r\n    \r\n    // 主题控制\r\n    headerBarColor: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  \r\n  setup(props) {\r\n    // 计算阴影级别\r\n    const shadowLevel = computed(() => {\r\n      switch(props.shadow) {\r\n        case 'none': return 'none'\r\n        case 'always': return 'always'\r\n        case 'hover':\r\n        default: return 'hover'\r\n      }\r\n    })\r\n    \r\n    // 计算头部栏样式\r\n    const headerBarStyle = computed(() => {\r\n      if (props.headerBarColor) {\r\n        return {\r\n          backgroundColor: props.headerBarColor\r\n        }\r\n      }\r\n      return {}\r\n    })\r\n    \r\n    return {\r\n      shadowLevel,\r\n      headerBarStyle\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 导入全局 CSS 变量（如果需要）\r\n// @import '../../assets/styles/_variables.css';\r\n\r\n.modern-card {\r\n    margin-bottom: var(--spacing-lg);\r\n    border: none;\r\n    border-radius: var(--radius-card);\r\n    transition: var(--transition-base);\r\n    position: relative;\r\n    overflow: hidden;\r\n  \r\n  :deep(.el-card__header) {\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    border-bottom: 1px solid var(--border-color);\r\n    background: transparent;\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n  \r\n  &:hover {\r\n    box-shadow: var(--shadow-hover);\r\n  }\r\n  \r\n  // 紧凑模式\r\n  &.compact {\r\n    :deep(.el-card__header) {\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n    }\r\n    \r\n    :deep(.el-card__body) {\r\n      padding: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  // 渐变边框\r\n  &.gradient-border {\r\n    border: 1px solid transparent;\r\n    background-image: linear-gradient(var(--background-color-light), var(--background-color-light)),\r\n                     linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n    background-origin: border-box;\r\n    background-clip: padding-box, border-box;\r\n  }\r\n  \r\n  // 发光效果\r\n  &.glow-effect {\r\n    &:hover {\r\n      box-shadow: 0 0 20px rgba(106, 90, 205, 0.2); // 使用品牌主色的 RGB 值\r\n    }\r\n  }\r\n  \r\n  // 波形卡片\r\n  &.wave-card {\r\n    background-color: var(--background-color-light);\r\n    position: relative;\r\n    overflow: hidden;\r\n    \r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      height: 100%;\r\n      background-image: radial-gradient(circle at 10% 20%, rgba(var(--wave-blue-rgb), 0.05) 0%, transparent 20%),\r\n                        radial-gradient(circle at 80% 70%, rgba(var(--wave-purple-rgb), 0.05) 0%, transparent 30%);\r\n      pointer-events: none;\r\n    }\r\n  }\r\n}\r\n\r\n.card-header-bar {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 4px;\r\n  background: linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n  transform: scaleX(0);\r\n  transform-origin: left;\r\n  transition: var(--transition-base);\r\n  z-index: 1;\r\n}\r\n\r\n.modern-card:hover .card-header-bar {\r\n  transform: scaleX(1);\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: relative;\r\n  z-index: 2;\r\n  \r\n  .card-title {\r\n    margin: 0;\r\n    font-weight: var(--font-weight-semibold);\r\n    color: var(--text-primary);\r\n    transition: var(--transition-base);\r\n    line-height: var(--line-height-display);\r\n    \r\n    &.title-small {\r\n      font-size: var(--font-size-medium);\r\n    }\r\n    \r\n    &.title-medium {\r\n      font-size: var(--font-size-lg);\r\n    }\r\n    \r\n    &.title-large {\r\n      font-size: var(--font-size-extra-large);\r\n    }\r\n    \r\n    &.title-gradient {\r\n      background: linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n      -webkit-background-clip: text;\r\n      background-clip: text;\r\n      color: transparent;\r\n      display: inline-block;\r\n    }\r\n  }\r\n  \r\n  .card-actions {\r\n    display: flex;\r\n    gap: var(--spacing-sm);\r\n  }\r\n}\r\n\r\n.card-content {\r\n  min-height: 80px;\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.card-footer {\r\n  border-top: 1px solid var(--border-light);\r\n  padding: var(--spacing-md) var(--spacing-lg) 0;\r\n  margin-top: var(--spacing-md);\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: var(--spacing-sm);\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.wave-decoration {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 40px;\r\n  color: var(--color-primary);\r\n  opacity: 0.8;\r\n  z-index: 0;\r\n}\r\n\r\n.wave-decoration svg {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .modern-card {\r\n    :deep(.el-card__header) {\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n    }\r\n    \r\n    :deep(.el-card__body) {\r\n      padding: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: var(--spacing-sm);\r\n    \r\n    .card-actions {\r\n      width: 100%;\r\n      justify-content: flex-end;\r\n    }\r\n  }\r\n  \r\n  .card-footer {\r\n    flex-direction: column;\r\n    gap: var(--spacing-sm);\r\n    padding: var(--spacing-sm) var(--spacing-md) 0;\r\n  }\r\n  \r\n  .card-title {\r\n    font-size: var(--font-size-base) !important;\r\n  }\r\n}\r\n\r\n/* 深色模式适配 */\r\n@media (prefers-color-scheme: dark) {\r\n  .modern-card {\r\n    background-color: var(--dark-background-color-light);\r\n    \r\n    :deep(.el-card__header),\r\n    :deep(.el-card__body) {\r\n      background-color: transparent;\r\n    }\r\n    \r\n    &.gradient-border {\r\n      background-image: linear-gradient(var(--dark-background-color-light), var(--dark-background-color-light)),\r\n                       linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n    }\r\n    \r\n    &.wave-card {\r\n      background-color: var(--dark-background-color-light);\r\n      \r\n      &::before {\r\n        background-image: radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.03) 0%, transparent 20%),\r\n                          radial-gradient(circle at 80% 70%, rgba(106, 90, 205, 0.03) 0%, transparent 30%);\r\n      }\r\n    }\r\n  }\r\n  \r\n  .card-title {\r\n    color: var(--dark-text-primary);\r\n  }\r\n}\r\n</style>","import { render } from \"./CardContainer.vue?vue&type=template&id=611ccd8c&scoped=true\"\nimport script from \"./CardContainer.vue?vue&type=script&lang=js\"\nexport * from \"./CardContainer.vue?vue&type=script&lang=js\"\n\nimport \"./CardContainer.vue?vue&type=style&index=0&id=611ccd8c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-611ccd8c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"user-center\">\r\n    <!-- 波形背景装饰 -->\r\n    <div class=\"wave-background\">\r\n      <div class=\"wave wave-1\"></div>\r\n      <div class=\"wave wave-2\"></div>\r\n      <div class=\"wave wave-3\"></div>\r\n    </div>\r\n    \r\n    <div class=\"user-center-container\">\r\n      <!-- 用户信息卡片 -->\r\n      <el-card class=\"user-info-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>个人信息</h2>\r\n            <el-button type=\"primary\" @click=\"editMode = !editMode\">\r\n              {{ editMode ? '取消编辑' : '编辑资料' }}\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <div class=\"user-info-content\">\r\n          <!-- 头像区域 -->\r\n          <div class=\"avatar-section\">\r\n            <el-avatar\r\n              :size=\"120\"\r\n              :src=\"userInfo.avatar || '/static/avatar/default.jpg'\"\r\n              class=\"user-avatar\"\r\n            >\r\n              <el-icon><User /></el-icon>\r\n            </el-avatar>\r\n            <el-upload\r\n              v-if=\"editMode\"\r\n              class=\"avatar-uploader\"\r\n              :show-file-list=\"false\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              :http-request=\"uploadAvatar\"\r\n            >\r\n              <el-button type=\"primary\" size=\"small\" class=\"upload-btn\">\r\n                <el-icon><Upload /></el-icon>\r\n                更换头像\r\n              </el-button>\r\n            </el-upload>\r\n          </div>\r\n          \r\n          <!-- 用户信息表单 -->\r\n          <el-form\r\n            ref=\"userFormRef\"\r\n            :model=\"userForm\"\r\n            :rules=\"userRules\"\r\n            label-width=\"100px\"\r\n            class=\"user-form\"\r\n          >\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                  <el-input\r\n                    v-model=\"userForm.username\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入用户名\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"学号\" prop=\"student_id\">\r\n                  <el-input\r\n                    v-model=\"userForm.student_id\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入学号\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                  <el-input\r\n                    v-model=\"userForm.email\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入邮箱\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"手机号\" prop=\"phone\">\r\n                  <el-input\r\n                    v-model=\"userForm.phone\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入手机号\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"检测次数\">\r\n                  <el-input :value=\"userInfo.detection_count\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"干预次数\">\r\n                  <el-input :value=\"userInfo.intervention_count\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"注册时间\">\r\n                  <el-input :value=\"formatDate(userInfo.create_time)\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"最后登录\">\r\n                  <el-input :value=\"formatDate(userInfo.last_login_time)\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-form-item v-if=\"editMode\">\r\n              <el-button type=\"primary\" :loading=\"updateLoading\" @click=\"handleUpdateProfile\">\r\n                保存修改\r\n              </el-button>\r\n              <el-button @click=\"resetForm\">重置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <!-- 偏好设置卡片 -->\r\n      <el-card class=\"preferences-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <h2>偏好设置</h2>\r\n        </template>\r\n        \r\n        <el-form\r\n          ref=\"preferencesFormRef\"\r\n          :model=\"preferencesForm\"\r\n          label-width=\"120px\"\r\n          class=\"preferences-form\"\r\n        >\r\n          <el-form-item label=\"默认疲劳等级\">\r\n            <el-select v-model=\"preferencesForm.default_fatigue_level\" @change=\"updatePreference('default_fatigue_level', $event)\">\r\n              <el-option label=\"轻度疲劳\" value=\"light\" />\r\n              <el-option label=\"中度疲劳\" value=\"medium\" />\r\n              <el-option label=\"重度疲劳\" value=\"heavy\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"偏好音乐类型\">\r\n            <el-select v-model=\"preferencesForm.preferred_music_type\" @change=\"updatePreference('preferred_music_type', $event)\">\r\n              <el-option label=\"自然音效\" value=\"natural\" />\r\n              <el-option label=\"钢琴音乐\" value=\"piano\" />\r\n              <el-option label=\"白噪音\" value=\"whitenoise\" />\r\n              <el-option label=\"混合音乐\" value=\"mix\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"通知设置\">\r\n            <el-switch\r\n              v-model=\"preferencesForm.notification_enabled\"\r\n              active-text=\"开启\"\r\n              inactive-text=\"关闭\"\r\n              @change=\"updatePreference('notification_enabled', $event ? 'true' : 'false')\"\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"自动播放\">\r\n            <el-switch\r\n              v-model=\"preferencesForm.auto_play\"\r\n              active-text=\"开启\"\r\n              inactive-text=\"关闭\"\r\n              @change=\"updatePreference('auto_play', $event ? 'true' : 'false')\"\r\n            />\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n      \r\n      <!-- 会话管理卡片 -->\r\n      <el-card class=\"sessions-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>会话管理</h2>\r\n            <el-button type=\"danger\" @click=\"handleLogoutAll\">\r\n              退出所有设备\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <el-table :data=\"sessions\" style=\"width: 100%\">\r\n          <el-table-column prop=\"device_display\" label=\"设备信息\" />\r\n          <el-table-column prop=\"ip_address\" label=\"IP地址\" />\r\n          <el-table-column prop=\"create_time\" label=\"登录时间\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.create_time) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"last_activity\" label=\"最后活动\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.last_activity) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template #default=\"{ row }\">\r\n              <el-button\r\n                v-if=\"row.id !== currentSessionId\"\r\n                type=\"danger\"\r\n                size=\"small\"\r\n                @click=\"handleRevokeSession(row.id)\"\r\n              >\r\n                撤销\r\n              </el-button>\r\n              <el-tag v-else type=\"success\" size=\"small\">当前会话</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <!-- 历史反馈卡片 -->\r\n      <el-card class=\"feedback-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>历史反馈</h2>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"showFeedbackForm = !showFeedbackForm\">\r\n              提交新反馈\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <!-- 新反馈表单 -->\r\n        <div v-if=\"showFeedbackForm\" class=\"feedback-form-container\">\r\n          <el-form ref=\"feedbackFormRef\" :model=\"feedbackForm\" label-width=\"100px\" class=\"feedback-form\">\r\n            <el-form-item label=\"反馈类型\">\r\n              <el-select v-model=\"feedbackForm.type\">\r\n                <el-option label=\"功能建议\" value=\"suggestion\" />\r\n                <el-option label=\"问题反馈\" value=\"bug\" />\r\n                <el-option label=\"其他\" value=\"other\" />\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"反馈内容\">\r\n              <el-input v-model=\"feedbackForm.content\" type=\"textarea\" rows=\"4\" placeholder=\"请输入您的反馈内容\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"handleSubmitFeedback\">提交</el-button>\r\n              <el-button @click=\"showFeedbackForm = false\">取消</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        \r\n        <!-- 历史反馈列表 -->\r\n        <el-table :data=\"feedbackList\" style=\"width: 100%\" class=\"feedback-table\">\r\n          <el-table-column prop=\"feedback_type\" label=\"反馈类型\">\r\n            <template #default=\"{ row }\">\r\n              <el-tag :type=\"getFeedbackTypeTag(row.feedback_type)\">\r\n                {{ getFeedbackTypeText(row.feedback_type) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"content\" label=\"反馈内容\">\r\n            <template #default=\"{ row }\">\r\n              <div class=\"feedback-content\">{{ row.content }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"submit_time\" label=\"提交时间\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.submit_time) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"status\" label=\"处理状态\">\r\n            <template #default=\"{ row }\">\r\n              <el-tag :type=\"row.status === 'processed' ? 'success' : 'info'\">\r\n                {{ row.status === 'processed' ? '已处理' : '待处理' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <!-- 密码修改卡片 -->\r\n      <el-card class=\"password-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <h2>修改密码</h2>\r\n        </template>\r\n        \r\n        <el-form\r\n          ref=\"passwordFormRef\"\r\n          :model=\"passwordForm\"\r\n          :rules=\"passwordRules\"\r\n          label-width=\"100px\"\r\n          class=\"password-form\"\r\n        >\r\n          <el-form-item label=\"原密码\" prop=\"old_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.old_password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入原密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"新密码\" prop=\"new_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.new_password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入新密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"确认密码\" prop=\"confirm_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.confirm_password\"\r\n              type=\"password\"\r\n              placeholder=\"请再次输入新密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item>\r\n            <el-button type=\"primary\" :loading=\"passwordLoading\" @click=\"handleChangePassword\">\r\n              修改密码\r\n            </el-button>\r\n            <el-button @click=\"resetPasswordForm\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { requestMethod } from '@/utils/request'\r\nimport { User, Upload } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'UserCenterView',\r\n  components: {\r\n    User,\r\n    Upload\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const userFormRef = ref()\r\n    const preferencesFormRef = ref()\r\n    const passwordFormRef = ref()\r\n    \r\n    // 用户信息\r\n    const userInfo = ref({})\r\n    const editMode = ref(false)\r\n    const updateLoading = ref(false)\r\n    const passwordLoading = ref(false)\r\n    \r\n    // 用户表单数据\r\n    const userForm = reactive({\r\n      username: '',\r\n      student_id: '',\r\n      email: '',\r\n      phone: ''\r\n    })\r\n    \r\n    // 偏好设置表单数据\r\n    const preferencesForm = reactive({\r\n      default_fatigue_level: 'medium',\r\n      preferred_music_type: 'natural',\r\n      notification_enabled: true,\r\n      auto_play: false\r\n    })\r\n    \r\n    // 密码修改表单数据\r\n    const passwordForm = reactive({\r\n      old_password: '',\r\n      new_password: '',\r\n      confirm_password: ''\r\n    })\r\n    \r\n    // 会话数据\r\n    const sessions = ref([])\r\n    const currentSessionId = ref(null)\r\n    \r\n    // 表单验证规则\r\n    const userRules = {\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' },\r\n        { min: 2, max: 50, message: '用户名长度在 2 到 50 个字符', trigger: 'blur' }\r\n      ],\r\n      student_id: [\r\n        { required: true, message: '请输入学号', trigger: 'blur' },\r\n        { min: 1, max: 20, message: '学号长度在 1 到 20 个字符', trigger: 'blur' }\r\n      ],\r\n      email: [\r\n        { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n      ],\r\n      phone: [\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    const passwordRules = {\r\n      old_password: [\r\n        { required: true, message: '请输入原密码', trigger: 'blur' }\r\n      ],\r\n      new_password: [\r\n        { required: true, message: '请输入新密码', trigger: 'blur' },\r\n        { min: 6, max: 50, message: '密码长度在 6 到 50 个字符', trigger: 'blur' }\r\n      ],\r\n      confirm_password: [\r\n        { required: true, message: '请确认新密码', trigger: 'blur' },\r\n        {\r\n          validator: (rule, value, callback) => {\r\n            if (value !== passwordForm.new_password) {\r\n              callback(new Error('两次输入密码不一致'))\r\n            } else {\r\n              callback()\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n    \r\n    // 获取当前用户 ID（优先使用本地存储的 user）\r\n    const getCurrentUserId = () => {\r\n      const u = localStorage.getItem('user')\r\n      if (u) {\r\n        try { return JSON.parse(u).id } catch { return 1 }\r\n      }\r\n      return 1\r\n    }\r\n\r\n    // 获取用户信息\r\n    const fetchUserInfo = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.get('/auth/profile', { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          userInfo.value = result.data\r\n          // 同步表单数据\r\n          Object.assign(userForm, {\r\n            username: result.data.username,\r\n            student_id: result.data.student_id,\r\n            email: result.data.email || '',\r\n            phone: result.data.phone || ''\r\n          })\r\n\r\n          // 同步偏好设置\r\n          if (result.data.preferences) {\r\n            Object.assign(preferencesForm, {\r\n              default_fatigue_level: result.data.preferences.default_fatigue_level || 'medium',\r\n              preferred_music_type: result.data.preferences.preferred_music_type || 'natural',\r\n              notification_enabled: result.data.preferences.notification_enabled === 'true',\r\n              auto_play: result.data.preferences.auto_play === 'true'\r\n            })\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('获取用户信息失败:', error)\r\n        ElMessage.error('获取用户信息失败')\r\n      }\r\n    }\r\n    \r\n    // 获取会话列表\r\n    const fetchSessions = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.get('/auth/sessions', { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          sessions.value = result.data.sessions\r\n          // 找到当前会话\r\n          const currentToken = localStorage.getItem('session_token')\r\n          const currentSession = sessions.value.find(s => s.session_token === currentToken)\r\n          if (currentSession) {\r\n            currentSessionId.value = currentSession.id\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('获取会话列表失败:', error)\r\n      }\r\n    }\r\n    \r\n    // 更新用户资料\r\n    const handleUpdateProfile = async () => {\r\n      if (!userFormRef.value) return\r\n\r\n      try {\r\n        // Element Plus validate 在校验失败时会抛出错误，成功时不返回值\r\n        try {\r\n          await userFormRef.value.validate()\r\n        } catch (e) {\r\n          // 校验未通过，直接返回\r\n          return\r\n        }\r\n\r\n        updateLoading.value = true\r\n\r\n        const uid = getCurrentUserId()\r\n\r\n        // 构建干净的 payload：只包含后端期望的字段，且过滤掉空字符串\r\n        const payload = {}\r\n        if (userForm.username !== undefined && String(userForm.username).trim() !== '') {\r\n          payload.username = String(userForm.username).trim()\r\n        }\r\n        if (userForm.email !== undefined && String(userForm.email).trim() !== '') {\r\n          payload.email = String(userForm.email).trim()\r\n        }\r\n        if (userForm.phone !== undefined && String(userForm.phone).trim() !== '') {\r\n          payload.phone = String(userForm.phone).trim()\r\n        }\r\n\r\n        // 发送请求（user_id 作为 query 参数）\r\n        let result\r\n        try {\r\n          result = await requestMethod.put('/auth/profile', payload, { user_id: uid })\r\n        } catch (err) {\r\n          // 如果是后端的验证错误（FastAPI 返回 422），尽可能展示详细信息\r\n          const detail = err.response?.data || err.response?.data?.detail\r\n          console.error('更新用户资料失败 (后端):', err, detail)\r\n          if (detail && detail.detail) {\r\n            // FastAPI 验证错误通常在 detail 字段里\r\n            const msgs = Array.isArray(detail.detail) ? detail.detail.map(d => d.msg).join('; ') : String(detail.detail)\r\n            ElMessage.error(msgs || '更新失败，数据校验未通过')\r\n          } else if (err.response?.data?.msg) {\r\n            ElMessage.error(err.response.data.msg)\r\n          } else {\r\n            ElMessage.error(err.message || '更新失败，请稍后重试')\r\n          }\r\n          return\r\n        }\r\n\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('资料更新成功')\r\n          // 更新本地存储中的 user，保证 Navbar 等组件显示最新资料\r\n          try { localStorage.setItem('user', JSON.stringify(result.data)) } catch (e) {}\r\n          // 通知全局 auth 变化，以便 Navbar 刷新用户信息\r\n          try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n          editMode.value = false\r\n          await fetchUserInfo()\r\n        } else {\r\n          ElMessage.error(result?.msg || '更新失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('更新用户资料失败:', error)\r\n        ElMessage.error('更新失败，请稍后重试')\r\n      } finally {\r\n        updateLoading.value = false\r\n      }\r\n    }\r\n    \r\n    // 更新偏好设置\r\n    const updatePreference = async (key, value) => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.put('/auth/preference', {\r\n          preference_key: key,\r\n          preference_value: value\r\n        }, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('偏好设置已更新')\r\n        } else {\r\n          ElMessage.error(result?.msg || '更新失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('更新偏好设置失败:', error)\r\n        ElMessage.error('更新失败，请稍后重试')\r\n      }\r\n    }\r\n    \r\n    // 修改密码\r\n    const handleChangePassword = async () => {\r\n      if (!passwordFormRef.value) return\r\n      \r\n      try {\r\n        const valid = await passwordFormRef.value.validate()\r\n        if (!valid) return\r\n        \r\n        passwordLoading.value = true\r\n        \r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.post('/auth/change-password', {\r\n          old_password: passwordForm.old_password,\r\n          new_password: passwordForm.new_password\r\n        }, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('密码修改成功')\r\n          resetPasswordForm()\r\n        } else {\r\n          ElMessage.error(result?.msg || '修改失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('修改密码失败:', error)\r\n        ElMessage.error('修改失败，请稍后重试')\r\n      } finally {\r\n        passwordLoading.value = false\r\n      }\r\n    }\r\n    \r\n    // 撤销会话\r\n    const handleRevokeSession = async (sessionId) => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要撤销此会话吗？', '确认撤销', {\r\n          type: 'warning',\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消'\r\n        })\r\n        \r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.delete(`/auth/session/${sessionId}`, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('会话已撤销')\r\n          await fetchSessions()\r\n        } else {\r\n          ElMessage.error(result?.msg || '撤销失败')\r\n        }\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('撤销会话失败:', error)\r\n          ElMessage.error('撤销失败，请稍后重试')\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 退出所有设备\r\n    const handleLogoutAll = async () => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要退出所有设备吗？', '确认退出', {\r\n          type: 'warning',\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消'\r\n        })\r\n        \r\n  // 这里应该调用退出所有设备的API\r\n  ElMessage.success('已退出所有设备')\r\n  localStorage.removeItem('session_token')\r\n  localStorage.removeItem('user')\r\n  try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n  router.push('/login')\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('退出所有设备失败:', error)\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 头像上传\r\n    const beforeAvatarUpload = (file) => {\r\n      const isImage = file.type.startsWith('image/')\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!')\r\n        return false\r\n      }\r\n      if (!isLt2M) {\r\n        ElMessage.error('图片大小不能超过 2MB!')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    \r\n    const uploadAvatar = async (options) => {\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('avatar', options.file)\r\n  formData.append('user_id', String(getCurrentUserId()))\r\n\r\n        const result = await requestMethod.postForm('/user/avatar/upload', formData)\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('头像上传成功')\r\n          userInfo.value.avatar = result.data.avatar_url\r\n          // 更新本地存储并通知全局（使 Navbar 等组件实时刷新）\r\n          try { localStorage.setItem('user', JSON.stringify(Object.assign({}, JSON.parse(localStorage.getItem('user')||'{}'), { avatar: result.data.avatar_url }))) } catch (e) {}\r\n          try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n        } else {\r\n          ElMessage.error(result?.msg || '上传失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('头像上传失败:', error)\r\n        ElMessage.error('上传失败，请稍后重试')\r\n      }\r\n    }\r\n    \r\n    // 重置表单\r\n    const resetForm = () => {\r\n      Object.assign(userForm, {\r\n        username: userInfo.value.username,\r\n        student_id: userInfo.value.student_id,\r\n        email: userInfo.value.email || '',\r\n        phone: userInfo.value.phone || ''\r\n      })\r\n    }\r\n    \r\n    const resetPasswordForm = () => {\r\n      Object.assign(passwordForm, {\r\n        old_password: '',\r\n        new_password: '',\r\n        confirm_password: ''\r\n      })\r\n    }\r\n    \r\n    // 格式化日期\r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n    \r\n    // 反馈相关数据\r\n    const feedbackFormRef = ref()\r\n    const showFeedbackForm = ref(false)\r\n    const feedbackForm = reactive({\r\n      type: 'suggestion',\r\n      content: ''\r\n    })\r\n    // 从后端拉取的历史反馈\r\n    const feedbackList = ref([])\r\n\r\n    // 分页参数（简单实现）\r\n    const feedbackPage = ref(1)\r\n    const feedbackPageSize = ref(20)\r\n\r\n    const fetchFeedbacks = async (page = 1) => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const res = await requestMethod.get('/feedback/history', { user_id: uid, page: page, page_size: feedbackPageSize.value })\r\n        if (res && res.code === 200) {\r\n          feedbackList.value = res.data.list || []\r\n          feedbackPage.value = res.data.page || page\r\n        }\r\n      } catch (error) {\r\n        console.error('获取历史反馈失败:', error)\r\n        ElMessage.error('获取历史反馈失败')\r\n      }\r\n    }\r\n    \r\n    // 获取反馈类型标签样式（兼容后端 feedback_type 值）\r\n    const getFeedbackTypeTag = (type) => {\r\n      const tagMap = {\r\n        accuracy: 'primary',\r\n        music: 'success',\r\n        function: 'warning',\r\n        suggestion: 'primary',\r\n        bug: 'danger',\r\n        other: 'warning'\r\n      }\r\n      return tagMap[type] || 'info'\r\n    }\r\n\r\n    // 获取反馈类型文本（中文友好名）\r\n    const getFeedbackTypeText = (type) => {\r\n      const textMap = {\r\n        accuracy: '检测准确性',\r\n        music: '音乐推荐',\r\n        function: '系统建议',\r\n        suggestion: '功能建议',\r\n        bug: '问题反馈',\r\n        other: '其他'\r\n      }\r\n      return textMap[type] || (type || '未知类型')\r\n    }\r\n    \r\n    // 提交反馈（调用后端）\r\n    const handleSubmitFeedback = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const payload = {\r\n          user_id: uid,\r\n          feedback_type: feedbackForm.type,\r\n          content: feedbackForm.content,\r\n          score: 0\r\n        }\r\n        const res = await requestMethod.post('/feedback/submit', payload)\r\n        if (res && res.code === 200) {\r\n          ElMessage.success('反馈提交成功')\r\n          showFeedbackForm.value = false\r\n          feedbackForm.type = 'suggestion'\r\n          feedbackForm.content = ''\r\n          // 重新拉取第一页数据\r\n          await fetchFeedbacks(1)\r\n        } else {\r\n          ElMessage.error(res?.msg || '提交失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('提交反馈失败:', error)\r\n        ElMessage.error('提交反馈失败')\r\n      }\r\n    }\r\n    \r\n    // 组件挂载时获取数据\r\n    onMounted(() => {\r\n      fetchUserInfo()\r\n      fetchSessions()\r\n      fetchFeedbacks()\r\n    })\r\n    \r\n    return {\r\n      userFormRef,\r\n      preferencesFormRef,\r\n      passwordFormRef,\r\n      feedbackFormRef,\r\n      userInfo,\r\n      editMode,\r\n      updateLoading,\r\n      passwordLoading,\r\n      userForm,\r\n      preferencesForm,\r\n      passwordForm,\r\n      sessions,\r\n      currentSessionId,\r\n      showFeedbackForm,\r\n      feedbackForm,\r\n      feedbackList,\r\n      userRules,\r\n      passwordRules,\r\n      handleUpdateProfile,\r\n      updatePreference,\r\n      handleChangePassword,\r\n      handleRevokeSession,\r\n      handleLogoutAll,\r\n      beforeAvatarUpload,\r\n      uploadAvatar,\r\n      resetForm,\r\n      resetPasswordForm,\r\n      formatDate,\r\n      getFeedbackTypeTag,\r\n      getFeedbackTypeText,\r\n      handleSubmitFeedback\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 设计令牌\r\n:root {\r\n  --bg-primary: #ffffff;\r\n  --bg-secondary: #f8fafc;\r\n  --color-primary: #3b82f6;\r\n  --color-primary-light: #93c5fd;\r\n  --color-primary-dark: #2563eb;\r\n  --text-primary: #1e293b;\r\n  --text-secondary: #64748b;\r\n  --border-color: #e2e8f0;\r\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  --radius-sm: 6px;\r\n  --radius-md: 12px;\r\n  --radius-lg: 16px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n}\r\n\r\n.user-center {\r\n  position: relative;\r\n  padding: 20px;\r\n  background-color: var(--bg-secondary);\r\n  min-height: 100vh;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.wave-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.wave {\r\n  position: absolute;\r\n  width: 200%;\r\n  height: 100px;\r\n  background: linear-gradient(90deg, var(--color-primary-light) 0%, transparent 100%);\r\n  opacity: 0.1;\r\n  border-radius: 50%;\r\n  animation: wave-animation 15s linear infinite;\r\n}\r\n\r\n.wave-1 {\r\n  top: 10%;\r\n  left: -50%;\r\n  animation-duration: 20s;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.wave-2 {\r\n  top: 30%;\r\n  left: -70%;\r\n  animation-duration: 25s;\r\n  animation-delay: -5s;\r\n  height: 150px;\r\n  background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);\r\n}\r\n\r\n.wave-3 {\r\n  top: 50%;\r\n  left: -60%;\r\n  animation-duration: 18s;\r\n  animation-delay: -2s;\r\n  height: 80px;\r\n  background: linear-gradient(90deg, var(--color-primary-dark) 0%, transparent 100%);\r\n}\r\n\r\n@keyframes wave-animation {\r\n  0% {\r\n    transform: translateX(0) translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateX(-25%) translateY(10px);\r\n  }\r\n  100% {\r\n    transform: translateX(-50%) translateY(0);\r\n  }\r\n}\r\n\r\n.user-center-container {\r\n  position: relative;\r\n  z-index: 1;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-lg);\r\n}\r\n\r\n.user-info-card,\r\n.preferences-card,\r\n.sessions-card,\r\n.password-card,\r\n.feedback-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n  \r\n  :deep(.el-card__header) {\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n    border-bottom: 1px solid var(--border-color);\r\n    border-radius: var(--radius-lg) var(--radius-lg) 0 0;\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    \r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      \r\n      h2 {\r\n        margin: 0;\r\n        color: var(--text-primary);\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n}\r\n\r\n.user-info-content {\r\n  display: flex;\r\n  gap: var(--spacing-xl);\r\n  align-items: flex-start;\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.avatar-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.5) 100%);\r\n  border-radius: var(--radius-md);\r\n  padding: var(--spacing-md);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-sm);\r\n  \r\n  .user-avatar {\r\n    border: 4px solid rgba(59, 130, 246, 0.2);\r\n    transition: transform 0.3s ease, border-color 0.3s ease;\r\n    \r\n    &:hover {\r\n      transform: scale(1.05);\r\n      border-color: var(--color-primary);\r\n    }\r\n  }\r\n  \r\n  .avatar-uploader {\r\n    .upload-btn {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      transition: all 0.2s ease;\r\n      \r\n      &:hover {\r\n        transform: translateY(-1px);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.user-form {\r\n  flex: 1;\r\n  \r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    :deep(.el-input.is-disabled .el-input__wrapper) {\r\n      background-color: rgba(248, 250, 252, 0.8);\r\n    }\r\n  }\r\n}\r\n\r\n.preferences-form {\r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-select__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    :deep(.el-switch) {\r\n      --el-switch-on-color: var(--color-primary);\r\n    }\r\n  }\r\n}\r\n\r\n.password-form {\r\n  max-width: 500px;\r\n  \r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 会话管理表格样式优化 */\r\n.sessions-card :deep(.el-table),\r\n.feedback-card :deep(.el-table) {\r\n  width: 100%;\r\n  border-radius: var(--radius-md);\r\n  overflow: hidden;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.sessions-card :deep(.el-table__header-wrapper),\r\n.feedback-card :deep(.el-table__header-wrapper) {\r\n  background-color: rgba(59, 130, 246, 0.05);\r\n}\r\n\r\n.sessions-card :deep(.el-table th),\r\n.feedback-card :deep(.el-table th) {\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  background-color: transparent;\r\n  border-bottom: 1px solid var(--border-color);\r\n  padding: 12px 16px;\r\n}\r\n\r\n.sessions-card :deep(.el-table td),\r\n.feedback-card :deep(.el-table td) {\r\n  border-bottom: 1px solid var(--border-color);\r\n  transition: background-color 0.2s ease;\r\n  padding: 12px 16px;\r\n}\r\n\r\n.sessions-card :deep(.el-table__row:hover td),\r\n.feedback-card :deep(.el-table__row:hover td) {\r\n  background-color: rgba(59, 130, 246, 0.05);\r\n}\r\n\r\n.sessions-card :deep(.el-tag),\r\n.feedback-card :deep(.el-tag) {\r\n  border-radius: 16px;\r\n  font-size: 12px;\r\n  padding: 2px 8px;\r\n}\r\n\r\n.sessions-card :deep(.el-button--danger) {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.sessions-card :deep(.el-button--danger:hover) {\r\n  transform: translateY(-1px);\r\n  box-shadow: var(--shadow-sm);\r\n}\r\n\r\n/* 反馈表单样式 */\r\n.feedback-form-container {\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n  border-radius: var(--radius-md);\r\n  padding: var(--spacing-md);\r\n  margin-bottom: var(--spacing-lg);\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.feedback-form {\r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.feedback-content {\r\n  line-height: 1.6;\r\n  word-break: break-word;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n/* 反馈卡片样式优化 */\r\n.feedback-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n  \r\n  :deep(.el-card__header) {\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n    border-bottom: 1px solid var(--border-color);\r\n    border-radius: var(--radius-lg) var(--radius-lg) 0 0;\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    \r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      \r\n      h2 {\r\n        margin: 0;\r\n        color: var(--text-primary);\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n}\r\n\r\n/* 按钮样式优化 */\r\n:deep(.el-button) {\r\n  border-radius: var(--radius-md);\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n  \r\n  &:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n  \r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n:deep(.el-button--primary) {\r\n  background-color: var(--color-primary);\r\n  border-color: var(--color-primary);\r\n  \r\n  &:hover {\r\n    background-color: var(--color-primary-dark);\r\n    border-color: var(--color-primary-dark);\r\n  }\r\n}\r\n\r\n// 应用响应式工具\r\n@import '@/assets/styles/breakpoints.scss';\r\n\r\n// 响应式适配 - 使用断点混入\r\n@include mobile-layout {\r\n  :root {\r\n    --spacing-page: 16px;\r\n    --spacing-lg: 16px;\r\n    --spacing-md: 12px;\r\n    --spacing-sm: 8px;\r\n  }\r\n  \r\n  .user-center-container {\r\n    padding: var(--spacing-page);\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(16px, 12px);\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n      \r\n      .avatar-container {\r\n        width: 80px;\r\n        height: 80px;\r\n      }\r\n      \r\n      .user-details {\r\n        text-align: center;\r\n      }\r\n    }\r\n    \r\n    .user-details {\r\n      .user-name {\r\n        @include responsive-font(20px, null, 18px);\r\n      }\r\n      \r\n      .user-id {\r\n        @include responsive-font(14px, null, 13px);\r\n      }\r\n    }\r\n    \r\n    .profile-form {\r\n      :deep(.el-form-item__label) {\r\n        font-size: 13px;\r\n      }\r\n      \r\n      :deep(.el-input__wrapper) {\r\n        padding: 6px 12px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .sessions-card {\r\n    margin-top: var(--spacing-md);\r\n    @include card(16px, 12px);\r\n    \r\n    .card-header {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-sm);\r\n    }\r\n    \r\n    .sessions-table :deep(.el-table__header th) {\r\n      padding: 10px 6px;\r\n      font-size: 12px;\r\n      \r\n      // 隐藏某些不重要的表头\r\n      &:nth-child(3), // IP地址\r\n      &:nth-child(4) { // 设备信息\r\n        display: none;\r\n      }\r\n    }\r\n    \r\n    .sessions-table :deep(.el-table__body td) {\r\n      padding: 10px 6px;\r\n      font-size: 12px;\r\n      \r\n      // 隐藏对应的表格内容\r\n      &:nth-child(3),\r\n      &:nth-child(4) {\r\n        display: none;\r\n      }\r\n    }\r\n    \r\n    // 自定义移动端操作按钮\r\n    .action-buttons {\r\n      .el-button {\r\n        padding: 6px 12px;\r\n        font-size: 12px;\r\n        min-width: auto;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 平板设备适配\r\n@include respond-to(sm) {\r\n  .user-info-card {\r\n    @include card(18px);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .sessions-table :deep(.el-table__header th) {\r\n    padding: 14px 10px;\r\n    font-size: 13px;\r\n  }\r\n  \r\n  .sessions-table :deep(.el-table__body td) {\r\n    padding: 14px 10px;\r\n    font-size: 13px;\r\n  }\r\n}\r\n\r\n// 大屏设备优化\r\n@include large-desktop-layout {\r\n  .user-center-container {\r\n    @include container(false);\r\n    max-width: 1400px;\r\n  }\r\n  \r\n  .content-wrapper {\r\n    display: grid;\r\n    grid-template-columns: 350px 1fr;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(24px);\r\n  }\r\n}\r\n\r\n// 超大屏设备优化\r\n@include extra-large-desktop-layout {\r\n  .user-center-container {\r\n    max-width: 1600px;\r\n  }\r\n}\r\n\r\n// 高对比度模式支持\r\n@include high-contrast {\r\n  .user-info-card,\r\n  .sessions-card {\r\n    border: 2px solid #000;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  :deep(.el-button) {\r\n    border-width: 2px;\r\n  }\r\n}\r\n\r\n// 减少动画模式支持\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.01ms !important;\r\n    animation-duration: 0.01ms !important;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./UserCenterView.vue?vue&type=template&id=41c31a35&scoped=true\"\nimport script from \"./UserCenterView.vue?vue&type=script&lang=js\"\nexport * from \"./UserCenterView.vue?vue&type=script&lang=js\"\n\nimport \"./UserCenterView.vue?vue&type=style&index=0&id=41c31a35&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41c31a35\"]])\n\nexport default __exports__"],"names":["useRouter","feedbackFormRef","ref","feedbackForm","reactive","type","content","rating","formRules","required","message","trigger","min","user","avatar","name","student_id","create_time","detection_count","intervention_count","feedbackList","loadUser","u","JSON","parse","window","localStorage","getItem","username","e","console","error","formatDate","dateString","date","Date","toLocaleString","year","month","day","hour","minute","fetchFeedbackList","async","userId","id","value","res","requestMethod","get","user_id","page","page_size","data","list","submitFeedback","validate","err","ElMessage","payload","feedback_type","trim","score","post","success","dispatchEvent","Event","deleteFeedback","ElMessageBox","confirm","confirmButtonText","cancelButtonText","delete","feedbackId","code","filter","i","msg","includes","cancelFeedback","clearValidate","onMounted","addEventListener","onBeforeUnmount","removeEventListener","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","_createVNode","_component_el_page_header","extra","_withCtx","_cache","_component_el_row","gutter","_component_el_col","xs","sm","md","lg","xl","CardContainer","title","_hoisted_3","_component_el_avatar","size","src","_hoisted_4","_toDisplayString","_component_el_button","onClick","$event","_ctx","$router","push","_component_el_descriptions","column","_component_el_descriptions_item","label","_hoisted_5","_hoisted_6","_hoisted_7","_component_el_form","model","rules","_component_el_form_item","prop","_component_el_radio_group","_component_el_radio","_component_el_input","rows","placeholder","maxlength","_hoisted_8","_component_el_rate","max","_hoisted_9","length","_hoisted_10","_component_el_timeline","_Fragment","_renderList","item","_createBlock","_component_el_timeline_item","key","timestamp","submit_time","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_tag","feedback_type_name","_hoisted_14","disabled","_hoisted_15","_hoisted_16","_component_el_empty","description","footer","$refs","scrollIntoView","scrollTo","top","behavior","href","target","__exports__","_component_el_card","_normalizeClass","$props","waveStyle","gradientBorder","glowEffect","compact","customClass","shadow","$setup","shadowLevel","showHeaderBar","style","_normalizeStyle","headerBarStyle","padding","contentPadding","_renderSlot","$slots","undefined","viewBox","xmlns","fill","d","header","gradientTitle","titleSize","actions","props","String","default","Boolean","validator","headerBarColor","setup","computed","backgroundColor","render","editMode","userInfo","_component_el_icon","_component_User","_component_el_upload","beforeAvatarUpload","uploadAvatar","_component_Upload","userForm","userRules","span","email","phone","last_login_time","loading","updateLoading","handleUpdateProfile","resetForm","preferencesForm","_component_el_select","default_fatigue_level","onChange","updatePreference","_component_el_option","preferred_music_type","_component_el_switch","notification_enabled","auto_play","handleLogoutAll","_component_el_table","sessions","_component_el_table_column","row","last_activity","currentSessionId","handleRevokeSession","showFeedbackForm","handleSubmitFeedback","getFeedbackTypeTag","getFeedbackTypeText","status","passwordForm","passwordRules","old_password","new_password","confirm_password","passwordLoading","handleChangePassword","resetPasswordForm","components","User","Upload","router","userFormRef","preferencesFormRef","passwordFormRef","pattern","rule","callback","Error","getCurrentUserId","fetchUserInfo","uid","result","Object","assign","preferences","fetchSessions","currentToken","currentSession","find","s","session_token","put","detail","response","msgs","Array","isArray","map","join","setItem","stringify","preference_key","preference_value","valid","sessionId","removeItem","file","isImage","startsWith","isLt2M","formData","FormData","append","options","postForm","avatar_url","feedbackPage","feedbackPageSize","fetchFeedbacks","tagMap","accuracy","music","function","suggestion","bug","other","textMap"],"sourceRoot":""}