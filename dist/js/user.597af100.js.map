{"version":3,"file":"js/user.597af100.js","mappings":"6GACA,IAAIA,EAAO,EAAQ,MACfC,EAAY,EAAQ,MACpBC,EAAW,EAAQ,MACnBC,EAAc,EAAQ,MACtBC,EAAoB,EAAQ,KAE5BC,EAAaC,UAEjBC,EAAOC,QAAU,SAAUC,EAAUC,GACnC,IAAIC,EAAiBC,UAAUC,OAAS,EAAIT,EAAkBK,GAAYC,EAC1E,GAAIT,EAAUU,GAAiB,OAAOT,EAASF,EAAKW,EAAgBF,IACpE,MAAM,IAAIJ,EAAWF,EAAYM,GAAY,mBAC/C,C,sBCZA,IAAIK,EAAI,EAAQ,MACZd,EAAO,EAAQ,MACfe,EAAU,EAAQ,MAClBd,EAAY,EAAQ,MACpBC,EAAW,EAAQ,MACnBc,EAAoB,EAAQ,MAC5BC,EAAgB,EAAQ,MACxBC,EAA2C,EAAQ,MAEnDC,EAAiCD,EAAyC,OAAQZ,WAItFQ,EAAE,CAAEM,OAAQ,WAAYC,OAAO,EAAMC,MAAM,EAAMC,OAAQJ,GAAkC,CACzFK,KAAM,SAAcC,GAClBvB,EAASwB,MACT,IACEzB,EAAUwB,EACZ,CAAE,MAAOE,GACPV,EAAcS,KAAM,QAASC,EAC/B,CAEA,GAAIR,EAAgC,OAAOnB,EAAKmB,EAAgCO,KAAMD,GAEtF,IAAIG,EAASZ,EAAkBU,MAC3BG,EAAU,EACd,OAAOd,EAAQa,EAAQ,SAAUE,EAAOC,GACtC,GAAIN,EAAUK,EAAOD,KAAY,OAAOE,EAAKD,EAC/C,EAAG,CAAEE,WAAW,EAAMC,aAAa,IAAQC,MAC7C,G,sBC7BF,IAAIC,EAAU,EAAQ,MAClBC,EAAY,EAAQ,MACpBC,EAAoB,EAAQ,MAC5BC,EAAY,EAAQ,MACpBC,EAAkB,EAAQ,MAE1BC,EAAWD,EAAgB,YAE/BhC,EAAOC,QAAU,SAAUiC,GACzB,IAAKJ,EAAkBI,GAAK,OAAOL,EAAUK,EAAID,IAC5CJ,EAAUK,EAAI,eACdH,EAAUH,EAAQM,GACzB,C,uBCZA,IAAI3B,EAAI,EAAQ,MACZd,EAAO,EAAQ,MACfC,EAAY,EAAQ,MACpBC,EAAW,EAAQ,MACnBc,EAAoB,EAAQ,MAC5B0B,EAAsB,EAAQ,MAC9BC,EAA+B,EAAQ,MACvC1B,EAAgB,EAAQ,MACxB2B,EAAwC,EAAQ,KAChD1B,EAA2C,EAAQ,MACnD2B,EAAU,EAAQ,MAElBC,GAA4CD,IAAYD,EAAsC,MAAO,WAA0B,GAC/HG,GAAiCF,IAAYC,GAC5C5B,EAAyC,MAAOZ,WAEjD0C,EAASH,GAAWC,GAA4CC,EAEhEE,EAAgBP,EAAoB,WACtC,IAAIQ,EAAWxB,KAAKwB,SAChBhB,EAAShC,EAASF,EAAK0B,KAAKyB,KAAMD,IAClCE,EAAO1B,KAAK0B,OAASlB,EAAOkB,KAChC,IAAKA,EAAM,OAAOT,EAA6BO,EAAUxB,KAAK2B,OAAQ,CAACnB,EAAOJ,MAAOJ,KAAKG,YAAY,EACxG,GAIAf,EAAE,CAAEM,OAAQ,WAAYC,OAAO,EAAMC,MAAM,EAAMC,OAAQyB,GAAU,CACjEM,IAAK,SAAaD,GAChBnD,EAASwB,MACT,IACEzB,EAAUoD,EACZ,CAAE,MAAO1B,GACPV,EAAcS,KAAM,QAASC,EAC/B,CAEA,OAAIoB,EAAsC/C,EAAK+C,EAA+BrB,KAAM2B,GAE7E,IAAIJ,EAAcjC,EAAkBU,MAAO,CAChD2B,OAAQA,GAEZ,G,uBCzCF,IAAId,EAAkB,EAAQ,MAE1BgB,EAAgBhB,EAAgB,eAChCiB,EAAO,CAAC,EAEZA,EAAKD,GAAiB,IAEtBhD,EAAOC,QAA2B,eAAjBiD,OAAOD,E,uBCPxB,IAAIE,EAAO,EAAQ,MACf1D,EAAO,EAAQ,MACfE,EAAW,EAAQ,MACnBC,EAAc,EAAQ,MACtBwD,EAAwB,EAAQ,MAChCC,EAAoB,EAAQ,MAC5BC,EAAgB,EAAQ,MACxBC,EAAc,EAAQ,IACtB1D,EAAoB,EAAQ,KAC5Ba,EAAgB,EAAQ,MAExBZ,EAAaC,UAEbyD,EAAS,SAAUC,EAAS9B,GAC9BR,KAAKsC,QAAUA,EACftC,KAAKQ,OAASA,CAChB,EAEI+B,EAAkBF,EAAOG,UAE7B3D,EAAOC,QAAU,SAAU2D,EAAUC,EAAiBC,GACpD,IAMInB,EAAUoB,EAAQC,EAAO1D,EAAQqB,EAAQiB,EAAMqB,EAN/CC,EAAOJ,GAAWA,EAAQI,KAC1BC,KAAgBL,IAAWA,EAAQK,YACnC1C,KAAeqC,IAAWA,EAAQrC,WAClC2C,KAAiBN,IAAWA,EAAQM,aACpC1C,KAAiBoC,IAAWA,EAAQpC,aACpC2C,EAAKlB,EAAKU,EAAiBK,GAG3B1C,EAAO,SAAU8C,GAEnB,OADI3B,GAAUjC,EAAciC,EAAU,UAC/B,IAAIa,GAAO,EAAMc,EAC1B,EAEIC,EAAS,SAAUhD,GACrB,OAAI4C,GACFxE,EAAS4B,GACFG,EAAc2C,EAAG9C,EAAM,GAAIA,EAAM,GAAIC,GAAQ6C,EAAG9C,EAAM,GAAIA,EAAM,KAChEG,EAAc2C,EAAG9C,EAAOC,GAAQ6C,EAAG9C,EAC9C,EAEA,GAAIE,EACFkB,EAAWiB,EAASjB,cACf,GAAIyB,EACTzB,EAAWiB,MACN,CAEL,GADAG,EAASlE,EAAkB+D,IACtBG,EAAQ,MAAM,IAAIjE,EAAWF,EAAYgE,GAAY,oBAE1D,GAAIR,EAAsBW,GAAS,CACjC,IAAKC,EAAQ,EAAG1D,EAAS+C,EAAkBO,GAAWtD,EAAS0D,EAAOA,IAEpE,GADArC,EAAS4C,EAAOX,EAASI,IACrBrC,GAAU2B,EAAcI,EAAiB/B,GAAS,OAAOA,EAC7D,OAAO,IAAI6B,GAAO,EACtB,CACAb,EAAWY,EAAYK,EAAUG,EACnC,CAEAnB,EAAOnB,EAAYmC,EAAShB,KAAOD,EAASC,KAC5C,QAASqB,EAAOxE,EAAKmD,EAAMD,IAAWE,KAAM,CAC1C,IACElB,EAAS4C,EAAON,EAAK1C,MACvB,CAAE,MAAOH,GACPV,EAAciC,EAAU,QAASvB,EACnC,CACA,GAAqB,iBAAVO,GAAsBA,GAAU2B,EAAcI,EAAiB/B,GAAS,OAAOA,CAC5F,CAAE,OAAO,IAAI6B,GAAO,EACtB,C,uBCnEA,IAAIxB,EAAkB,EAAQ,MAC1BD,EAAY,EAAQ,MAEpBE,EAAWD,EAAgB,YAC3BwC,EAAiBC,MAAMd,UAG3B3D,EAAOC,QAAU,SAAUiC,GACzB,YAAcwC,IAAPxC,IAAqBH,EAAU0C,QAAUvC,GAAMsC,EAAevC,KAAcC,EACrF,C,uBCTA,IAAIyC,EAAc,EAAQ,MACtBjF,EAAY,EAAQ,MACpBkF,EAAc,EAAQ,KAEtBzB,EAAOwB,EAAYA,EAAYxB,MAGnCnD,EAAOC,QAAU,SAAUoE,EAAIH,GAE7B,OADAxE,EAAU2E,QACMK,IAATR,EAAqBG,EAAKO,EAAczB,EAAKkB,EAAIH,GAAQ,WAC9D,OAAOG,EAAGQ,MAAMX,EAAM7D,UACxB,CACF,C,u/BCwJeyE,EAAAA,EAAAA,MAAf,MAGMC,GAAkBC,EAAAA,EAAAA,IAAI,MAGtBC,GAAeC,EAAAA,EAAAA,IAAS,CAC5BC,KAAM,WACNC,QAAS,GACTC,OAAQ,IAIJC,EAAY,CAChBH,KAAM,CACJ,CAAEI,UAAU,EAAMC,QAAS,UAAWC,QAAS,WAEjDL,QAAS,CACP,CAAEG,UAAU,EAAMC,QAAS,UAAWC,QAAS,QAC/C,CAAEC,IAAK,GAAIF,QAAS,cAAeC,QAAS,UAK1CE,GAAOT,EAAAA,EAAAA,IAAS,CACpBU,OAAQ,KACRC,KAAM,GACNC,WAAY,GACZC,YAAa,GACbC,gBAAiB,EACjBC,mBAAoB,IAIhBC,GAAelB,EAAAA,EAAAA,IAAI,IAGnBmB,EAAWA,KACf,IACE,MAAMC,EAAIC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,SAAW,QACxDL,IACFT,EAAKC,QAASc,EAAAA,EAAAA,GAAaN,EAAER,QAAU,8BACvCD,EAAKE,KAAOO,EAAEO,UAAYP,EAAEP,MAAQ,GAEpCF,EAAKG,WAAaM,EAAEN,YAAc,GAClCH,EAAKI,YAAcK,EAAEL,aAAe,GACpCJ,EAAKK,gBAAkBI,EAAEJ,iBAAmB,EAC5CL,EAAKM,mBAAqBG,EAAEH,oBAAsB,EAEtD,CAAE,MAAOW,GACPC,QAAQzF,MAAM,YAAawF,EAC7B,GAIIE,EAAcC,IAClB,IAAKA,EAAY,MAAO,IACxB,IACE,MAAMC,EAAO,IAAIC,KAAKF,GACtB,OAAOC,EAAKE,eAAe,QAAS,CAClCC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,WAEZ,CAAE,MAAOX,GACP,OAAOG,CACT,GAIIS,EAAoBC,UACxB,IAEE,IAAIC,EAAS,KACb,IACE,MAAMtB,EAAIC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,SAAW,QACxDL,GAAKA,EAAEuB,KAAID,EAAStB,EAAEuB,GAC5B,CAAE,MAAOf,GACPC,QAAQzF,MAAM,YAAawF,EAC7B,CAEA,IAAKc,EAEH,YADAxB,EAAa3E,MAAQ,IAIvB,MAAMqG,QAAYC,EAAAA,EAAcC,IAAI,oBAAqB,CACvDC,QAASL,EACTM,KAAM,EACNC,UAAW,KAIb/B,EAAa3E,MAAQqG,EAAIM,MAAMC,MAAQ,EACzC,CAAE,MAAOvB,GACPC,QAAQzF,MAAM,YAAawF,EAC7B,GAIIwB,EAAiBX,UAErB,UACQ1C,EAAgBxD,MAAM8G,UAC9B,CAAE,MAAOC,GACP,MACF,CAGA,IAAIZ,EAAS,KACb,IACE,MAAMtB,EAAIC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,SAAW,QACxDL,GAAKA,EAAEuB,KAAID,EAAStB,EAAEuB,GAC5B,CAAE,MAAOf,GACPC,QAAQzF,MAAM,YAAawF,EAC7B,CAEA,IAAKc,EAEH,YADAa,EAAAA,GAAUnH,MAAM,cAIlB,MAAMoH,EAAU,CACdT,QAASL,EACTe,cAAexD,EAAaE,KAC5BC,QAASH,EAAaG,QAAQsD,OAC9BC,MAAO1D,EAAaI,QAItB,UACQwC,EAAAA,EAAce,KAAK,mBAAoBJ,GAC7CD,EAAAA,GAAUM,QAAQ,sBAEZrB,IAENvC,EAAaG,QAAU,GACvBH,EAAaI,OAAS,EACtBJ,EAAaE,KAAO,WAEpB,IACEoB,OAAOuC,cAAc,IAAIC,MAAM,oBACjC,CAAE,MAAOnC,GAAI,CACf,CAAE,MAAOA,GACPC,QAAQzF,MAAM,UAAWwF,EAC3B,GAIIoC,EAAiBvB,UACrB,IACE,MAAMrB,EAAIC,KAAKC,MAAMC,OAAOC,aAAaC,QAAQ,SAAW,QAC5D,IAAKL,IAAMA,EAAEuB,GAEX,YADAY,EAAAA,GAAUnH,MAAM,cAIZ6H,EAAAA,EAAaC,QAAQ,oBAAqB,OAAQ,CACtDC,kBAAmB,KACnBC,iBAAkB,KAClBjE,KAAM,YAGN,MAAMyC,QAAYC,EAAAA,EAAcwB,OAAO,aAAaC,IAAc,CAAEvB,QAAS3B,EAAEuB,KACjF,GAAIC,GAAoB,MAAbA,EAAI2B,KAAc,CAC3BhB,EAAAA,GAAUM,QAAQ,QAElB3C,EAAa3E,MAAQ2E,EAAa3E,MAAMiI,OAAOC,GAAKA,EAAE9B,KAAO2B,GAC7D,IAAM/C,OAAOuC,cAAc,IAAIC,MAAM,oBAAqB,CAAE,MAAOnC,GAAI,CACzE,MACE2B,EAAAA,GAAUnH,MAAMwG,GAAK8B,KAAO,OAEhC,CAAE,MAAO9C,GAEP,GAAIA,GAAKA,EAAEpB,SAAWoB,EAAEpB,QAAQmE,SAAS,MAAO,OAChD9C,QAAQzF,MAAM,UAAWwF,GACzB2B,EAAAA,GAAUnH,MAAM,OAClB,GAIIwI,EAAiBA,KACrB3E,EAAaG,QAAU,GACvBH,EAAaI,OAAS,EACtBJ,EAAaE,KAAO,WAEhBJ,EAAgBxD,OAClBwD,EAAgBxD,MAAMsI,iB,OAK1BC,EAAAA,EAAAA,IAAU,KACR3D,IACAI,OAAOwD,iBAAiB,eAAgB5D,GACxCqB,OAIFwC,EAAAA,EAAAA,IAAgB,KACdzD,OAAO0D,oBAAoB,eAAgB9D,K,+cA9W3C+D,EAAAA,EAAAA,IAuJM,MAvJNC,EAuJM,C,eArJJC,EAAAA,EAAAA,IAIM,OAJDC,MAAM,mBAAiB,EAC1BD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,iBACXD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,iBACXD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,kB,KAGbD,EAAAA,EAAAA,IAOM,MAPNE,EAOM,EALJC,EAAAA,EAAAA,IAIiBC,EAAA,CAJDpF,QAAQ,UAAUiF,MAAM,e,CAC3BI,OAAKC,EAAAA,EAAAA,IACd,IAAkC,IAAAC,EAAA,KAAAA,EAAA,KAAlCP,EAAAA,EAAAA,IAAkC,OAA7BC,MAAM,kBAAgB,a,SAMjCE,EAAAA,EAAAA,IA2HSK,EAAA,CA3HAC,OAAQ,GAAIR,MAAM,gB,kBAEzB,IAoCS,EApCTE,EAAAA,EAAAA,IAoCSO,EAAA,CApCAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,EAAIC,GAAI,EAAIC,GAAI,G,kBAC7C,IAkCgB,EAlChBZ,EAAAA,EAAAA,IAkCgBa,EAAAA,EAAA,CAlCDC,MAAM,OAAOhB,MAAM,kB,kBAChC,IAcM,EAdND,EAAAA,EAAAA,IAcM,MAdNkB,EAcM,EAbJf,EAAAA,EAAAA,IAIEgB,EAAA,CAHCC,KAAM,IACNC,IAAK9F,EAAKC,SAAU8F,EAAAA,EAAAA,IAAAhF,EAAAA,EAAAgF,CAAa,8BAClCrB,MAAM,e,iBAERD,EAAAA,EAAAA,IAA4D,MAA5DuB,GAA4DC,EAAAA,EAAAA,IAA3BjG,EAAKE,MAAQ,OAAJ,IAC1C0E,EAAAA,EAAAA,IAMYsB,EAAA,CALV1G,KAAK,OACLkF,MAAM,oBACLyB,QAAKnB,EAAA,KAAAA,EAAA,GAAAoB,GAAEC,EAAAC,QAAQC,KAAK,kB,kBACtB,IAED,IAAAvB,EAAA,KAAAA,EAAA,K,QAFC,UAED,O,SAGFJ,EAAAA,EAAAA,IAYkB4B,EAAA,CAZAC,OAAQ,EAAG/B,MAAM,qB,kBACjC,IAEuB,EAFvBE,EAAAA,EAAAA,IAEuB8B,EAAA,CAFDC,MAAM,MAAI,C,iBAC9B,IAAqD,EAArDlC,EAAAA,EAAAA,IAAqD,OAArDmC,GAAqDX,EAAAA,EAAAA,IAA1BjG,EAAKE,MAAQ,KAAJ,K,OAEtC0E,EAAAA,EAAAA,IAAoF8B,EAAA,CAA9DC,MAAM,MAAI,C,iBAAC,IAA4B,E,iBAAzB3G,EAAKG,YAAc,KAAJ,K,OACnDyE,EAAAA,EAAAA,IAAmH8B,EAAA,CAA7FC,MAAM,MAAI,C,iBAAC,IAA2D,E,iBAAxD3G,EAAKI,YAAce,EAAWnB,EAAKI,aAAe,KAAJ,K,OAClFwE,EAAAA,EAAAA,IAEuB8B,EAAA,CAFDC,MAAM,MAAI,C,iBAC9B,IAAoE,EAApElC,EAAAA,EAAAA,IAAoE,OAApEoC,GAAoEZ,EAAAA,EAAAA,IAArCjG,EAAKK,iBAAmB,GAAI,KAAE,K,OAE/DuE,EAAAA,EAAAA,IAEuB8B,EAAA,CAFDC,MAAM,MAAI,C,iBAC9B,IAAwE,EAAxElC,EAAAA,EAAAA,IAAwE,OAAxEqC,GAAwEb,EAAAA,EAAAA,IAAxCjG,EAAKM,oBAAsB,GAAI,KAAE,K,2BAIrEmE,EAAAA,EAAAA,IAEM,OAFDC,MAAM,eAAc,0BAEzB,M,eAKJE,EAAAA,EAAAA,IAiFSO,EAAA,CAjFAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,kBAC/C,IA+EgB,EA/EhBZ,EAAAA,EAAAA,IA+EgBa,EAAAA,EAAA,CA/EDC,MAAM,SAAShB,MAAM,sB,kBAClC,IAwCU,EAxCVE,EAAAA,EAAAA,IAwCUmC,EAAA,C,QAvCJ,kBAAJ1H,IAAID,EACH4H,MAAO1H,EACP2H,MAAOtH,EACR,cAAY,QACZ+E,MAAM,iB,kBAEN,IAMe,EANfE,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,OAAOQ,KAAK,Q,kBAC9B,IAIiB,EAJjBvC,EAAAA,EAAAA,IAIiBwC,EAAA,C,WAJQ9H,EAAaE,K,qCAAbF,EAAaE,KAAI4G,I,kBACxC,IAA8C,EAA9CxB,EAAAA,EAAAA,IAA8CyC,EAAA,CAApCV,MAAM,YAAU,C,iBAAC,IAAQ,IAAA3B,EAAA,KAAAA,EAAA,K,QAAR,YAAQ,O,OACnCJ,EAAAA,EAAAA,IAA0CyC,EAAA,CAAhCV,MAAM,SAAO,C,iBAAC,IAAO,IAAA3B,EAAA,KAAAA,EAAA,K,QAAP,WAAO,O,OAC/BJ,EAAAA,EAAAA,IAA4CyC,EAAA,CAAlCV,MAAM,YAAU,C,iBAAC,IAAM,IAAA3B,EAAA,MAAAA,EAAA,M,QAAN,UAAM,O,wCAIrCJ,EAAAA,EAAAA,IASesC,EAAA,CATDP,MAAM,OAAOQ,KAAK,W,kBAC9B,IAOE,EAPFvC,EAAAA,EAAAA,IAOE0C,EAAA,C,WANShI,EAAaG,Q,qCAAbH,EAAaG,QAAO2G,GAC7B5G,KAAK,WACJ+H,KAAM,EACPC,YAAY,yBACZC,UAAU,MACV,sB,gCAIJ7C,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,QAAQQ,KAAK,U,kBAC/B,IAIM,EAJN1C,EAAAA,EAAAA,IAIM,MAJNiD,EAIM,C,eAHJjD,EAAAA,EAAAA,IAAmC,KAAhCC,MAAM,gBAAe,WAAO,KAE/BE,EAAAA,EAAAA,IAAkD+C,EAAA,C,WAAhCrI,EAAaI,O,qCAAbJ,EAAaI,OAAM0G,GAAGwB,IAAK,G,kCAIjDhD,EAAAA,EAAAA,IAKesC,EAAA,CALDxC,MAAM,gBAAc,C,iBAChC,IAGM,EAHND,EAAAA,EAAAA,IAGM,MAHNoD,EAGM,EAFJjD,EAAAA,EAAAA,IAAiDsB,EAAA,CAArCC,QAAOlC,GAAc,C,iBAAE,IAAE,IAAAe,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,OACrCJ,EAAAA,EAAAA,IAAkEsB,EAAA,CAAvD1G,KAAK,UAAW2G,QAAO1D,G,kBAAgB,IAAI,IAAAuC,EAAA,MAAAA,EAAA,M,QAAJ,QAAI,O,oCAMzBzE,EAAA3E,MAAajB,S,WAAhD4J,EAAAA,EAAAA,IA2BI,MA3BJuD,EA2BI,C,eA1BJrD,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRG,EAAAA,EAAAA,IAwBcmD,EAAA,M,iBAtBR,IAA4B,G,aAD9BxD,EAAAA,EAAAA,IAsBmByD,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IArBF1H,EAAA3E,MAARsM,K,WADTC,EAAAA,EAAAA,IAsBmBC,EAAA,CApBhBC,IAAKH,EAAKlG,GACVsG,UAAWJ,EAAKK,a,kBAEjB,IAgBM,EAhBN9D,EAAAA,EAAAA,IAgBM,MAhBN+D,EAgBM,EAdJ/D,EAAAA,EAAAA,IASM,MATNgE,EASM,EARJhE,EAAAA,EAAAA,IAGM,MAHNiE,EAGM,EAFJjE,EAAAA,EAAAA,IAAwC,eAAAwB,EAAAA,EAAAA,IAA7BjG,EAAKE,MAAQ,MAAJ,IACpB0E,EAAAA,EAAAA,IAAmE+D,EAAA,CAA3D9C,KAAK,SAAO,C,iBAAC,IAAqC,E,iBAAlCqC,EAAKU,oBAAsB,MAAJ,K,cAEjDnE,EAAAA,EAAAA,IAGM,MAHNoE,EAGM,EAFJjE,EAAAA,EAAAA,IAAuD+C,EAAA,CAA7C,cAAaO,EAAKlF,MAAQ4E,IAAK,EAAGkB,SAAA,I,yBAC5ClE,EAAAA,EAAAA,IAAoFsB,EAAA,CAAzE1G,KAAK,SAASqG,KAAK,OAAQM,QAAKC,GAAE/C,EAAe6E,EAAKlG,K,kBAAK,IAAE,IAAAgD,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,yBAI5EP,EAAAA,EAAAA,IAEM,MAFNsE,GAEM9C,EAAAA,EAAAA,IADDiC,EAAKzI,SAAO,O,yDAMzB8E,EAAAA,EAAAA,IAMM,MANNyE,EAMM,EALJpE,EAAAA,EAAAA,IAIWqE,EAAA,CAJDC,YAAY,WAAS,CAClBC,QAAMpE,EAAAA,EAAAA,IACf,IAA+I,EAA/IH,EAAAA,EAAAA,IAA+IsB,EAAA,CAApI1G,KAAK,UAAW2G,QAAKnB,EAAA,KAAAA,EAAA,GAAAoB,GAAEC,EAAA+C,MAAMhK,iBAAiBiK,oBAAsBhD,EAAAzF,OAAO0I,SAAS,CAADC,IAAA,EAAAC,SAAA,a,kBAA6B,IAAQ,IAAAxE,EAAA,MAAAA,EAAA,M,QAAR,YAAQ,O,wDAS/IP,EAAAA,EAAAA,IAMM,OANDC,MAAM,kBAAgB,EACzBD,EAAAA,EAAAA,IAIM,OAJDC,MAAM,mBAAiB,EAC1BD,EAAAA,EAAAA,IAAkD,SAA/C,gDACHA,EAAAA,EAAAA,IAAsF,W,QAAnF,QAAGA,EAAAA,EAAAA,IAA4D,KAAzDgF,KAAK,gCAA+B,sB,QAAqB,uBAClEhF,EAAAA,EAAAA,IAA0D,W,QAAvD,UAAKA,EAAAA,EAAAA,IAA8C,KAA3CgF,KAAK,YAAYvO,OAAO,UAAS,gB,mBC/IpD,MAAMwO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,mBCPArP,EAAOC,QAAU,CAAC,C,kGCAXoK,MAAM,e,GAQJA,MAAM,yB,GAIAA,MAAM,e,GAEJiF,MAAA,mD,GAWJjF,MAAM,qB,GAEJA,MAAM,kB,GAgKNA,MAAM,e,GAwCNA,MAAM,e,SASgBA,MAAM,2B,GA8BxBA,MAAM,oB,gdA1QvBH,EAAAA,EAAAA,IA6UM,MA7UNC,EA6UM,C,eA3UJC,EAAAA,EAAAA,IAIM,OAJDC,MAAM,mBAAiB,EAC1BD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,iBACXD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,iBACXD,EAAAA,EAAAA,IAA+B,OAA1BC,MAAM,kB,KAGbD,EAAAA,EAAAA,IAoUM,MApUNE,EAoUM,EAlUJC,EAAAA,EAAAA,IA2HUgF,EAAA,CA3HDlF,MAAM,iBAAiBmF,OAAO,S,CAC1BC,QAAM/E,EAAAA,EAAAA,IACf,IAUM,EAVNN,EAAAA,EAAAA,IAUM,MAVNkB,EAUM,C,eATJlB,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRA,EAAAA,EAAAA,IAOM,MAPNuB,EAOM,EANJpB,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,UAAW2G,QAAKnB,EAAA,KAAAA,EAAA,GAAAoB,GAAE2D,EAAAC,UAAYD,EAAAC,W,kBAC5C,IAAgC,E,iBAA7BD,EAAAC,SAAW,OAAS,QAAZ,K,OAEbpF,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,SAASyK,MAAA,GAAO9D,QAAO4D,EAAAG,qB,kBAAqB,IAE5D,IAAAlF,EAAA,MAAAA,EAAA,M,QAF4D,UAE5D,O,2CAKN,IA2GM,EA3GNP,EAAAA,EAAAA,IA2GM,MA3GNmC,EA2GM,EAzGJnC,EAAAA,EAAAA,IAoBM,MApBNoC,EAoBM,EAnBJjC,EAAAA,EAAAA,IAMYgB,EAAA,CALTC,KAAM,IACNC,IAAKiE,EAAAI,SAASlK,QAAU8J,EAAAhJ,aAAa,8BACtC2D,MAAM,e,kBAEN,IAA2B,EAA3BE,EAAAA,EAAAA,IAA2BwF,EAAA,M,iBAAlB,IAAQ,EAARxF,EAAAA,EAAAA,IAAQyF,K,wBAGXN,EAAAC,W,WADR7B,EAAAA,EAAAA,IAWYmC,EAAA,C,MATV5F,MAAM,kBACL,kBAAgB,EAChB,gBAAeqF,EAAAQ,mBACf,eAAcR,EAAAS,c,kBAEf,IAGY,EAHZ5F,EAAAA,EAAAA,IAGYsB,EAAA,CAHD1G,KAAK,UAAUqG,KAAK,QAAQnB,MAAM,c,kBAC3C,IAA6B,EAA7BE,EAAAA,EAAAA,IAA6BwF,EAAA,M,iBAApB,IAAU,EAAVxF,EAAAA,EAAAA,IAAU6F,K,6BAAU,UAE/B,M,qEAKJ7F,EAAAA,EAAAA,IAiFUmC,EAAA,CAhFR1H,IAAI,cACH2H,MAAO+C,EAAAW,SACPzD,MAAO8C,EAAAY,UACR,cAAY,QACZjG,MAAM,a,kBAEN,IAmBS,EAnBTE,EAAAA,EAAAA,IAmBSK,EAAA,CAnBAC,OAAQ,IAAE,C,iBACjB,IAQS,EARTN,EAAAA,EAAAA,IAQSO,EAAA,CARAyF,KAAM,IAAE,C,iBACf,IAMe,EANfhG,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,MAAMQ,KAAK,Y,kBAC7B,IAIE,EAJFvC,EAAAA,EAAAA,IAIE0C,EAAA,C,WAHSyC,EAAAW,SAAS1J,S,qCAAT+I,EAAAW,SAAS1J,SAAQoF,GACzB0C,UAAWiB,EAAAC,SACZxC,YAAY,U,mDAIlB5C,EAAAA,EAAAA,IAQSO,EAAA,CARAyF,KAAM,IAAE,C,iBACf,IAMe,EANfhG,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,KAAKQ,KAAK,c,kBAC5B,IAIE,EAJFvC,EAAAA,EAAAA,IAIE0C,EAAA,C,WAHSyC,EAAAW,SAASvK,W,qCAAT4J,EAAAW,SAASvK,WAAUiG,GAC3B0C,UAAWiB,EAAAC,SACZxC,YAAY,S,2DAMpB5C,EAAAA,EAAAA,IAmBSK,EAAA,CAnBAC,OAAQ,IAAE,C,iBACjB,IAQS,EARTN,EAAAA,EAAAA,IAQSO,EAAA,CARAyF,KAAM,IAAE,C,iBACf,IAMe,EANfhG,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,KAAKQ,KAAK,S,kBAC5B,IAIE,EAJFvC,EAAAA,EAAAA,IAIE0C,EAAA,C,WAHSyC,EAAAW,SAASG,M,qCAATd,EAAAW,SAASG,MAAKzE,GACtB0C,UAAWiB,EAAAC,SACZxC,YAAY,S,mDAIlB5C,EAAAA,EAAAA,IAQSO,EAAA,CARAyF,KAAM,IAAE,C,iBACf,IAMe,EANfhG,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,MAAMQ,KAAK,S,kBAC7B,IAIE,EAJFvC,EAAAA,EAAAA,IAIE0C,EAAA,C,WAHSyC,EAAAW,SAASI,M,qCAATf,EAAAW,SAASI,MAAK1E,GACtB0C,UAAWiB,EAAAC,SACZxC,YAAY,U,2DAMpB5C,EAAAA,EAAAA,IAWSK,EAAA,CAXAC,OAAQ,IAAE,C,iBACjB,IAIS,EAJTN,EAAAA,EAAAA,IAISO,EAAA,CAJAyF,KAAM,IAAE,C,iBACf,IAEe,EAFfhG,EAAAA,EAAAA,IAEesC,EAAA,CAFDP,MAAM,QAAM,C,iBACxB,IAAuD,EAAvD/B,EAAAA,EAAAA,IAAuD0C,EAAA,CAA5C1L,MAAOmO,EAAAI,SAAS9J,gBAAiByI,SAAA,I,mCAGhDlE,EAAAA,EAAAA,IAISO,EAAA,CAJAyF,KAAM,IAAE,C,iBACf,IAEe,EAFfhG,EAAAA,EAAAA,IAEesC,EAAA,CAFDP,MAAM,QAAM,C,iBACxB,IAA0D,EAA1D/B,EAAAA,EAAAA,IAA0D0C,EAAA,CAA/C1L,MAAOmO,EAAAI,SAAS7J,mBAAoBwI,SAAA,I,2CAKrDlE,EAAAA,EAAAA,IAWSK,EAAA,CAXAC,OAAQ,IAAE,C,iBACjB,IAIS,EAJTN,EAAAA,EAAAA,IAISO,EAAA,CAJAyF,KAAM,IAAE,C,iBACf,IAEe,EAFfhG,EAAAA,EAAAA,IAEesC,EAAA,CAFDP,MAAM,QAAM,C,iBACxB,IAA+D,EAA/D/B,EAAAA,EAAAA,IAA+D0C,EAAA,CAApD1L,MAAOmO,EAAA5I,WAAW4I,EAAAI,SAAS/J,aAAc0I,SAAA,I,mCAGxDlE,EAAAA,EAAAA,IAISO,EAAA,CAJAyF,KAAM,IAAE,C,iBACf,IAEe,EAFfhG,EAAAA,EAAAA,IAEesC,EAAA,CAFDP,MAAM,QAAM,C,iBACxB,IAAmE,EAAnE/B,EAAAA,EAAAA,IAAmE0C,EAAA,CAAxD1L,MAAOmO,EAAA5I,WAAW4I,EAAAI,SAASY,iBAAkBjC,SAAA,I,0CAK1CiB,EAAAC,W,WAApB7B,EAAAA,EAAAA,IAKejB,EAAA,CAAAmB,IAAA,I,iBAJb,IAEY,EAFZzD,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,UAAWwL,QAASjB,EAAAkB,cAAgB9E,QAAO4D,EAAAmB,qB,kBAAqB,IAEhF,IAAAlG,EAAA,MAAAA,EAAA,M,QAFgF,UAEhF,O,+BACAJ,EAAAA,EAAAA,IAA4CsB,EAAA,CAAhCC,QAAO4D,EAAAoB,WAAS,C,iBAAE,IAAE,IAAAnG,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,oFAOxCJ,EAAAA,EAAAA,IA8CUgF,EAAA,CA9CDlF,MAAM,mBAAmBmF,OAAO,S,CAC5BC,QAAM/E,EAAAA,EAAAA,IACf,IAAa,IAAAC,EAAA,MAAAA,EAAA,MAAbP,EAAAA,EAAAA,IAAa,UAAT,QAAI,O,iBAGV,IAwCU,EAxCVG,EAAAA,EAAAA,IAwCUmC,EAAA,CAvCR1H,IAAI,qBACH2H,MAAO+C,EAAAqB,gBACR,cAAY,QACZ1G,MAAM,oB,kBAEN,IAMe,EANfE,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,UAAQ,C,iBAC1B,IAIY,EAJZ/B,EAAAA,EAAAA,IAIYyG,EAAA,C,WAJQtB,EAAAqB,gBAAgBE,sB,qCAAhBvB,EAAAqB,gBAAgBE,sBAAqBlF,GAAGmF,SAAMvG,EAAA,KAAAA,EAAA,GAAAoB,GAAE2D,EAAAyB,iBAAiB,wBAAyBpF,K,kBAC5G,IAAwC,EAAxCxB,EAAAA,EAAAA,IAAwC6G,EAAA,CAA7B9E,MAAM,OAAO/K,MAAM,WAC9BgJ,EAAAA,EAAAA,IAAyC6G,EAAA,CAA9B9E,MAAM,OAAO/K,MAAM,YAC9BgJ,EAAAA,EAAAA,IAAwC6G,EAAA,CAA7B9E,MAAM,OAAO/K,MAAM,Y,gCAIlCgJ,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,UAAQ,C,iBAC1B,IAKY,EALZ/B,EAAAA,EAAAA,IAKYyG,EAAA,C,WALQtB,EAAAqB,gBAAgBM,qB,qCAAhB3B,EAAAqB,gBAAgBM,qBAAoBtF,GAAGmF,SAAMvG,EAAA,KAAAA,EAAA,GAAAoB,GAAE2D,EAAAyB,iBAAiB,uBAAwBpF,K,kBAC1G,IAA0C,EAA1CxB,EAAAA,EAAAA,IAA0C6G,EAAA,CAA/B9E,MAAM,OAAO/K,MAAM,aAC9BgJ,EAAAA,EAAAA,IAAwC6G,EAAA,CAA7B9E,MAAM,OAAO/K,MAAM,WAC9BgJ,EAAAA,EAAAA,IAA4C6G,EAAA,CAAjC9E,MAAM,MAAM/K,MAAM,gBAC7BgJ,EAAAA,EAAAA,IAAsC6G,EAAA,CAA3B9E,MAAM,OAAO/K,MAAM,U,gCAIlCgJ,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,QAAM,C,iBACxB,IAKE,EALF/B,EAAAA,EAAAA,IAKE+G,EAAA,C,WAJS5B,EAAAqB,gBAAgBQ,qB,qCAAhB7B,EAAAqB,gBAAgBQ,qBAAoBxF,GAC7C,cAAY,KACZ,gBAAc,KACbmF,SAAMvG,EAAA,MAAAA,EAAA,IAAAoB,GAAE2D,EAAAyB,iBAAiB,uBAAwBpF,EAAS,OAAS,W,gCAIxExB,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,QAAM,C,iBACxB,IAKE,EALF/B,EAAAA,EAAAA,IAKE+G,EAAA,C,WAJS5B,EAAAqB,gBAAgBS,U,uCAAhB9B,EAAAqB,gBAAgBS,UAASzF,GAClC,cAAY,KACZ,gBAAc,KACbmF,SAAMvG,EAAA,MAAAA,EAAA,IAAAoB,GAAE2D,EAAAyB,iBAAiB,YAAapF,EAAS,OAAS,W,4DAOjExB,EAAAA,EAAAA,IAqCUgF,EAAA,CArCDlF,MAAM,gBAAgBmF,OAAO,S,CACzBC,QAAM/E,EAAAA,EAAAA,IACf,IAKM,EALNN,EAAAA,EAAAA,IAKM,MALNqC,EAKM,C,eAJJrC,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRG,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,SAAU2G,QAAO4D,EAAA+B,iB,kBAAiB,IAElD,IAAA9G,EAAA,MAAAA,EAAA,M,QAFkD,YAElD,O,yCAIJ,IA0BW,EA1BXJ,EAAAA,EAAAA,IA0BWmH,EAAA,CA1BAxJ,KAAMwH,EAAAiC,SAAUrC,MAAA,gB,kBACzB,IAAsD,EAAtD/E,EAAAA,EAAAA,IAAsDqH,EAAA,CAArC9E,KAAK,iBAAiBR,MAAM,UAC7C/B,EAAAA,EAAAA,IAAkDqH,EAAA,CAAjC9E,KAAK,aAAaR,MAAM,UACzC/B,EAAAA,EAAAA,IAIkBqH,EAAA,CAJD9E,KAAK,cAAcR,MAAM,Q,CAC7BuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,E,iBACpBpC,EAAA5I,WAAWgL,EAAI/L,cAAW,K,OAGjCwE,EAAAA,EAAAA,IAIkBqH,EAAA,CAJD9E,KAAK,gBAAgBR,MAAM,Q,CAC/BuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,E,iBACpBpC,EAAA5I,WAAWgL,EAAIC,gBAAa,K,OAGnCxH,EAAAA,EAAAA,IAYkBqH,EAAA,CAZDtF,MAAM,MAAI,CACduF,SAAOnH,EAAAA,EAAAA,IAoF5B,EApFgCoH,SAAG,CAEfA,EAAInK,KAAO+H,EAAAsC,mB,WADnBlE,EAAAA,EAAAA,IAOYjC,EAAA,C,MALV1G,KAAK,SACLqG,KAAK,QACJM,QAAKC,GAAE2D,EAAAuC,oBAAoBH,EAAInK,K,kBACjC,IAED,IAAAgD,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,kCACAmD,EAAAA,EAAAA,IAAwDQ,EAAA,C,MAAzCnJ,KAAK,UAAUqG,KAAK,S,kBAAQ,IAAI,IAAAb,EAAA,MAAAA,EAAA,M,QAAJ,QAAI,O,2CAOvDJ,EAAAA,EAAAA,IAyDUgF,EAAA,CAzDDlF,MAAM,gBAAgBmF,OAAO,S,CACzBC,QAAM/E,EAAAA,EAAAA,IACf,IAKM,EALNN,EAAAA,EAAAA,IAKM,MALNiD,EAKM,C,eAJJjD,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRG,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,UAAUqG,KAAK,QAASM,QAAKnB,EAAA,MAAAA,EAAA,IAAAoB,GAAE2D,EAAAwC,kBAAoBxC,EAAAwC,mB,kBAAkB,IAErF,IAAAvH,EAAA,MAAAA,EAAA,M,QAFqF,WAErF,O,2BAuGX,IAiDmB,CAnJD+E,EAAAwC,mB,WAAXhI,EAAAA,EAAAA,IAiBM,MAjBNsD,EAiBM,EAhBJjD,EAAAA,EAAAA,IAeUmC,EAAA,CAfD1H,IAAI,kBAAmB2H,MAAO+C,EAAAzK,aAAc,cAAY,QAAQoF,MAAM,iB,kBAC7E,IAMe,EANfE,EAAAA,EAAAA,IAMesC,EAAA,CANDP,MAAM,QAAM,C,iBACxB,IAIY,EAJZ/B,EAAAA,EAAAA,IAIYyG,EAAA,C,WAJQtB,EAAAzK,aAAaE,K,uCAAbuK,EAAAzK,aAAaE,KAAI4G,I,kBACnC,IAA6C,EAA7CxB,EAAAA,EAAAA,IAA6C6G,EAAA,CAAlC9E,MAAM,OAAO/K,MAAM,gBAC9BgJ,EAAAA,EAAAA,IAAsC6G,EAAA,CAA3B9E,MAAM,OAAO/K,MAAM,SAC9BgJ,EAAAA,EAAAA,IAAsC6G,EAAA,CAA3B9E,MAAM,KAAK/K,MAAM,Y,gCAGhCgJ,EAAAA,EAAAA,IAEesC,EAAA,CAFDP,MAAM,QAAM,C,iBACxB,IAA4F,EAA5F/B,EAAAA,EAAAA,IAA4F0C,EAAA,C,WAAzEyC,EAAAzK,aAAaG,Q,uCAAbsK,EAAAzK,aAAaG,QAAO2G,GAAE5G,KAAK,WAAW+H,KAAK,IAAIC,YAAY,a,gCAEhF5C,EAAAA,EAAAA,IAGesC,EAAA,M,iBAFb,IAAsE,EAAtEtC,EAAAA,EAAAA,IAAsEsB,EAAA,CAA3D1G,KAAK,UAAW2G,QAAO4D,EAAAyC,sB,kBAAsB,IAAE,IAAAxH,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,qBAC1DJ,EAAAA,EAAAA,IAA2DsB,EAAA,CAA/CC,QAAKnB,EAAA,MAAAA,EAAA,IAAAoB,GAAE2D,EAAAwC,kBAAmB,I,kBAAO,IAAE,IAAAvH,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,sDAMrDJ,EAAAA,EAAAA,IAyBWmH,EAAA,CAzBAxJ,KAAMwH,EAAAxJ,aAAcoJ,MAAA,eAAoBjF,MAAM,kB,kBACvD,IAMkB,EANlBE,EAAAA,EAAAA,IAMkBqH,EAAA,CAND9E,KAAK,gBAAgBR,MAAM,Q,CAC/BuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,EACvBvH,EAAAA,EAAAA,IAES+D,EAAA,CAFAnJ,KAAMuK,EAAA0C,mBAAmBN,EAAIrJ,gB,kBACpC,IAA4C,E,iBAAzCiH,EAAA2C,oBAAoBP,EAAIrJ,gBAAa,K,6BAI9C8B,EAAAA,EAAAA,IAIkBqH,EAAA,CAJD9E,KAAK,UAAUR,MAAM,Q,CACzBuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,EACvB1H,EAAAA,EAAAA,IAAqD,MAArDqD,GAAqD7B,EAAAA,EAAAA,IAApBkG,EAAI1M,SAAO,K,OAGhDmF,EAAAA,EAAAA,IAIkBqH,EAAA,CAJD9E,KAAK,cAAcR,MAAM,Q,CAC7BuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,E,iBACpBpC,EAAA5I,WAAWgL,EAAI5D,cAAW,K,OAGjC3D,EAAAA,EAAAA,IAMkBqH,EAAA,CAND9E,KAAK,SAASR,MAAM,Q,CACxBuF,SAAOnH,EAAAA,EAAAA,IAChB,EADoBoH,SAAG,EACvBvH,EAAAA,EAAAA,IAES+D,EAAA,CAFAnJ,KAAqB,cAAf2M,EAAIQ,OAAyB,UAAY,Q,kBACtD,IAAgD,E,iBAA9B,cAAfR,EAAIQ,OAAyB,MAAQ,OAA3B,K,wDAQvB/H,EAAAA,EAAAA,IA8CUgF,EAAA,CA9CDlF,MAAM,gBAAgBmF,OAAO,S,CACzBC,QAAM/E,EAAAA,EAAAA,IACf,IAAa,IAAAC,EAAA,MAAAA,EAAA,MAAbP,EAAAA,EAAAA,IAAa,UAAT,QAAI,O,iBAGV,IAwCU,EAxCVG,EAAAA,EAAAA,IAwCUmC,EAAA,CAvCR1H,IAAI,kBACH2H,MAAO+C,EAAA6C,aACP3F,MAAO8C,EAAA8C,cACR,cAAY,QACZnI,MAAM,iB,kBAEN,IAOe,EAPfE,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,MAAMQ,KAAK,gB,kBAC7B,IAKE,EALFvC,EAAAA,EAAAA,IAKE0C,EAAA,C,WAJSyC,EAAA6C,aAAaE,a,uCAAb/C,EAAA6C,aAAaE,aAAY1G,GAClC5G,KAAK,WACLgI,YAAY,SACZ,oB,gCAIJ5C,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,MAAMQ,KAAK,gB,kBAC7B,IAKE,EALFvC,EAAAA,EAAAA,IAKE0C,EAAA,C,WAJSyC,EAAA6C,aAAaG,a,uCAAbhD,EAAA6C,aAAaG,aAAY3G,GAClC5G,KAAK,WACLgI,YAAY,SACZ,oB,gCAIJ5C,EAAAA,EAAAA,IAOesC,EAAA,CAPDP,MAAM,OAAOQ,KAAK,oB,kBAC9B,IAKE,EALFvC,EAAAA,EAAAA,IAKE0C,EAAA,C,WAJSyC,EAAA6C,aAAaI,iB,uCAAbjD,EAAA6C,aAAaI,iBAAgB5G,GACtC5G,KAAK,WACLgI,YAAY,WACZ,oB,gCAIJ5C,EAAAA,EAAAA,IAKesC,EAAA,M,iBAJb,IAEY,EAFZtC,EAAAA,EAAAA,IAEYsB,EAAA,CAFD1G,KAAK,UAAWwL,QAASjB,EAAAkD,gBAAkB9G,QAAO4D,EAAAmD,sB,kBAAsB,IAEnF,IAAAlI,EAAA,MAAAA,EAAA,M,QAFmF,UAEnF,O,+BACAJ,EAAAA,EAAAA,IAAoDsB,EAAA,CAAxCC,QAAO4D,EAAAoD,mBAAiB,C,iBAAE,IAAE,IAAAnI,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,2KAgBpD,GACE9E,KAAM,iBACNkN,WAAY,CACVC,KAAI,OACJC,OAAMA,EAAAA,QAERC,KAAAA,GACE,MAAMC,GAASrO,EAAAA,EAAAA,MACTsO,GAAcpO,EAAAA,EAAAA,MACdqO,GAAqBrO,EAAAA,EAAAA,MACrBsO,GAAkBtO,EAAAA,EAAAA,MAGlB8K,GAAW9K,EAAAA,EAAAA,IAAI,CAAC,GAChB2K,GAAW3K,EAAAA,EAAAA,KAAI,GACf4L,GAAgB5L,EAAAA,EAAAA,KAAI,GACpB4N,GAAkB5N,EAAAA,EAAAA,KAAI,GAGtBqL,GAAWnL,EAAAA,EAAAA,IAAS,CACxByB,SAAU,GACVb,WAAY,GACZ0K,MAAO,GACPC,MAAO,KAIHM,GAAkB7L,EAAAA,EAAAA,IAAS,CAC/B+L,sBAAuB,SACvBI,qBAAsB,UACtBE,sBAAsB,EACtBC,WAAW,IAIPe,GAAerN,EAAAA,EAAAA,IAAS,CAC5BuN,aAAc,GACdC,aAAc,GACdC,iBAAkB,KAIdhB,GAAW3M,EAAAA,EAAAA,IAAI,IACfgN,GAAmBhN,EAAAA,EAAAA,IAAI,MAGvBsL,EAAY,CAChB3J,SAAU,CACR,CAAEpB,UAAU,EAAMC,QAAS,SAAUC,QAAS,QAC9C,CAAEC,IAAK,EAAG6H,IAAK,GAAI/H,QAAS,oBAAqBC,QAAS,SAE5DK,WAAY,CACV,CAAEP,UAAU,EAAMC,QAAS,QAASC,QAAS,QAC7C,CAAEC,IAAK,EAAG6H,IAAK,GAAI/H,QAAS,mBAAoBC,QAAS,SAE3D+K,MAAO,CACL,CAAErL,KAAM,QAASK,QAAS,aAAcC,QAAS,SAEnDgL,MAAO,CACL,CAAE8C,QAAS,gBAAiB/N,QAAS,cAAeC,QAAS,UAI3D+M,EAAgB,CACpBC,aAAc,CACZ,CAAElN,UAAU,EAAMC,QAAS,SAAUC,QAAS,SAEhDiN,aAAc,CACZ,CAAEnN,UAAU,EAAMC,QAAS,SAAUC,QAAS,QAC9C,CAAEC,IAAK,EAAG6H,IAAK,GAAI/H,QAAS,mBAAoBC,QAAS,SAE3DkN,iBAAkB,CAChB,CAAEpN,UAAU,EAAMC,QAAS,SAAUC,QAAS,QAC9C,CACE+N,UAAWA,CAACC,EAAMlS,EAAOmS,KACnBnS,IAAUgR,EAAaG,aACzBgB,EAAS,IAAIC,MAAM,cAEnBD,KAGJjO,QAAS,UAMTmO,EAAmBA,KACvB,MAAMxN,EAAII,aAAaC,QAAQ,QAC/B,GAAIL,EACF,IAAM,OAAOC,KAAKC,MAAMF,GAAGuB,EAAG,CAAE,MAAQ,OAAO,CAAE,CAEnD,OAAO,GAIHkM,EAAgBpM,UACpB,IACE,MAAMqM,EAAMF,IACNjS,QAAekG,EAAAA,EAAcC,IAAI,gBAAiB,CAAEC,QAAS+L,IACnE,GAAInS,GAA0B,MAAhBA,EAAO4H,KAAc,CAEjC,MAAMrB,EAAOvG,EAAOuG,MAAQ,CAAC,EACzBA,EAAKtC,SAAQsC,EAAKtC,QAASc,EAAAA,EAAAA,GAAawB,EAAKtC,SACjDkK,EAASvO,MAAQ2G,EAEjB6L,OAAOC,OAAO3D,EAAU,CACtB1J,SAAUhF,EAAOuG,KAAKvB,SACtBb,WAAYnE,EAAOuG,KAAKpC,WACxB0K,MAAO7O,EAAOuG,KAAKsI,OAAS,GAC5BC,MAAO9O,EAAOuG,KAAKuI,OAAS,KAI1B9O,EAAOuG,KAAK+L,aACdF,OAAOC,OAAOjD,EAAiB,CAC7BE,sBAAuBtP,EAAOuG,KAAK+L,YAAYhD,uBAAyB,SACxEI,qBAAsB1P,EAAOuG,KAAK+L,YAAY5C,sBAAwB,UACtEE,qBAAuE,SAAjD5P,EAAOuG,KAAK+L,YAAY1C,qBAC9CC,UAAiD,SAAtC7P,EAAOuG,KAAK+L,YAAYzC,WAGzC,CACF,CAAE,MAAOpQ,GACPyF,QAAQzF,MAAM,YAAaA,GAC3BmH,EAAAA,GAAUnH,MAAM,WAClB,GAII8S,EAAgBzM,UACpB,IACE,MAAMqM,EAAMF,IACNjS,QAAekG,EAAAA,EAAcC,IAAI,iBAAkB,CAAEC,QAAS+L,IACpE,GAAInS,GAA0B,MAAhBA,EAAO4H,KAAc,CACjCoI,EAASpQ,MAAQI,EAAOuG,KAAKyJ,SAE7B,MAAMwC,EAAe3N,aAAaC,QAAQ,iBACpC2N,EAAiBzC,EAASpQ,MAAMN,KAAKoT,GAAKA,EAAEC,gBAAkBH,GAChEC,IACFpC,EAAiBzQ,MAAQ6S,EAAezM,GAE5C,CACF,CAAE,MAAOvG,GACPyF,QAAQzF,MAAM,YAAaA,EAC7B,GAIIyP,EAAsBpJ,UAC1B,GAAK2L,EAAY7R,MAEjB,IAEE,UACQ6R,EAAY7R,MAAM8G,UAC1B,CAAE,MAAOzB,GAEP,MACF,CAEAgK,EAAcrP,OAAQ,EAEtB,MAAMuS,EAAMF,IAGNpL,EAAU,CAAC,EAYjB,IAAI7G,OAXsB+C,IAAtB2L,EAAS1J,UAA+D,KAArCzD,OAAOmN,EAAS1J,UAAU+B,SAC/DF,EAAQ7B,SAAWzD,OAAOmN,EAAS1J,UAAU+B,aAExBhE,IAAnB2L,EAASG,OAAyD,KAAlCtN,OAAOmN,EAASG,OAAO9H,SACzDF,EAAQgI,MAAQtN,OAAOmN,EAASG,OAAO9H,aAElBhE,IAAnB2L,EAASI,OAAyD,KAAlCvN,OAAOmN,EAASI,OAAO/H,SACzDF,EAAQiI,MAAQvN,OAAOmN,EAASI,OAAO/H,QAKzC,IACE/G,QAAekG,EAAAA,EAAc0M,IAAI,gBAAiB/L,EAAS,CAAET,QAAS+L,GACxE,CAAE,MAAOxL,GAEP,MAAMkM,EAASlM,EAAImM,UAAUvM,MAAQI,EAAImM,UAAUvM,MAAMsM,OAEzD,GADA3N,QAAQzF,MAAM,iBAAkBkH,EAAKkM,GACjCA,GAAUA,EAAOA,OAAQ,CAE3B,MAAME,EAAOjQ,MAAMkQ,QAAQH,EAAOA,QAAUA,EAAOA,OAAOzR,IAAI6R,GAAKA,EAAElL,KAAKmL,KAAK,MAAQ3R,OAAOsR,EAAOA,QACrGjM,EAAAA,GAAUnH,MAAMsT,GAAQ,eAC1B,MAAWpM,EAAImM,UAAUvM,MAAMwB,IAC7BnB,EAAAA,GAAUnH,MAAMkH,EAAImM,SAASvM,KAAKwB,KAElCnB,EAAAA,GAAUnH,MAAMkH,EAAI9C,SAAW,cAEjC,MACF,CAEA,GAAI7D,GAA0B,MAAhBA,EAAO4H,KAAc,CACjChB,EAAAA,GAAUM,QAAQ,UAElB,IAAMrC,aAAasO,QAAQ,OAAQzO,KAAK0O,UAAUpT,EAAOuG,MAAO,CAAE,MAAOtB,GAAI,CAE7E,IAAML,OAAOuC,cAAc,IAAIC,MAAM,gBAAiB,CAAE,MAAOnC,GAAI,CACnE+I,EAASpO,OAAQ,QACXsS,GACR,MACEtL,EAAAA,GAAUnH,MAAMO,GAAQ+H,KAAO,OAEnC,CAAE,MAAOtI,GACPyF,QAAQzF,MAAM,YAAaA,GAC3BmH,EAAAA,GAAUnH,MAAM,aAClB,CAAE,QACAwP,EAAcrP,OAAQ,CACxB,GAII4P,EAAmB1J,MAAOuG,EAAKzM,KACnC,IACE,MAAMuS,EAAMF,IACNjS,QAAekG,EAAAA,EAAc0M,IAAI,mBAAoB,CACzDS,eAAgBhH,EAChBiH,iBAAkB1T,GACjB,CAAEwG,QAAS+L,IACVnS,GAA0B,MAAhBA,EAAO4H,KACnBhB,EAAAA,GAAUM,QAAQ,WAElBN,EAAAA,GAAUnH,MAAMO,GAAQ+H,KAAO,OAEnC,CAAE,MAAOtI,GACPyF,QAAQzF,MAAM,YAAaA,GAC3BmH,EAAAA,GAAUnH,MAAM,aAClB,GAIIyR,EAAuBpL,UAC3B,GAAK6L,EAAgB/R,MAErB,IACE,MAAM2T,QAAc5B,EAAgB/R,MAAM8G,WAC1C,IAAK6M,EAAO,OAEZtC,EAAgBrR,OAAQ,EAExB,MAAMuS,EAAMF,IACNjS,QAAekG,EAAAA,EAAce,KAAK,wBAAyB,CAC/D6J,aAAcF,EAAaE,aAC3BC,aAAcH,EAAaG,cAC1B,CAAE3K,QAAS+L,IACVnS,GAA0B,MAAhBA,EAAO4H,MACnBhB,EAAAA,GAAUM,QAAQ,UAClBiK,KAEAvK,EAAAA,GAAUnH,MAAMO,GAAQ+H,KAAO,OAEnC,CAAE,MAAOtI,GACPyF,QAAQzF,MAAM,UAAWA,GACzBmH,EAAAA,GAAUnH,MAAM,aAClB,CAAE,QACAwR,EAAgBrR,OAAQ,CAC1B,GAII0Q,EAAsBxK,UAC1B,UACQwB,EAAAA,EAAaC,QAAQ,aAAc,OAAQ,CAC/C/D,KAAM,UACNgE,kBAAmB,KACnBC,iBAAkB,OAGpB,MAAM0K,EAAMF,IACNjS,QAAekG,EAAAA,EAAcwB,OAAO,iBAAiB8L,IAAa,CAAEpN,QAAS+L,IAC/EnS,GAA0B,MAAhBA,EAAO4H,MACnBhB,EAAAA,GAAUM,QAAQ,eACZqL,KAEN3L,EAAAA,GAAUnH,MAAMO,GAAQ+H,KAAO,OAEnC,CAAE,MAAOtI,GACO,WAAVA,IACFyF,QAAQzF,MAAM,UAAWA,GACzBmH,EAAAA,GAAUnH,MAAM,cAEpB,GAIIqQ,EAAkBhK,UACtB,UACQwB,EAAAA,EAAaC,QAAQ,cAAe,OAAQ,CAChD/D,KAAM,UACNgE,kBAAmB,KACnBC,iBAAkB,OAI1Bb,EAAAA,GAAUM,QAAQ,WAClBrC,aAAa4O,WAAW,iBACxB5O,aAAa4O,WAAW,QACxB,IAAM7O,OAAOuC,cAAc,IAAIC,MAAM,gBAAiB,CAAE,MAAOnC,GAAI,CACnEuM,EAAOjH,KAAK,SACR,CAAE,MAAO9K,GACO,WAAVA,GACFyF,QAAQzF,MAAM,YAAaA,EAE/B,GAIIyO,EAAsBpI,UAC1B,UACQwB,EAAAA,EAAaC,QAAQ,kCAAmC,OAAQ,CACpE/D,KAAM,UACNgE,kBAAmB,OACnBC,iBAAkB,OAGpB,MAAM0K,EAAMF,IACNyB,EAAQ7O,aAAaC,QAAQ,iBACnC,IAAK4O,EAEH,YADA9M,EAAAA,GAAUnH,MAAM,iBAIlB,MAAMwG,QAAYC,EAAAA,EAAce,KAAK,eAAgB,CACnD0L,cAAee,EACftN,QAAS+L,IAGX,GAAIlM,GAAoB,MAAbA,EAAI2B,KAAc,CAC3BhB,EAAAA,GAAUM,QAAQ,SAElBrC,aAAa4O,WAAW,iBACxB5O,aAAa4O,WAAW,QACxB,IAAM7O,OAAOuC,cAAc,IAAIC,MAAM,gBAAiB,CAAE,MAAOnC,GAAI,CACnEuM,EAAOjH,KAAK,SACd,MACE3D,EAAAA,GAAUnH,MAAMwG,GAAK8B,KAAO,OAEhC,CAAE,MAAOtI,GACO,WAAVA,IACFyF,QAAQzF,MAAM,UAAWA,GACzBmH,EAAAA,GAAUnH,MAAM,cAEpB,GAII8O,EAAsBoF,IAC1B,MAAMC,EAAUD,EAAKnQ,KAAKqQ,WAAW,UAC/BC,EAASH,EAAK9J,KAAO,KAAO,KAAO,EAEzC,OAAK+J,IAIAE,IACHlN,EAAAA,GAAUnH,MAAM,kBACT,IALPmH,EAAAA,GAAUnH,MAAM,cACT,IASL+O,EAAe1I,UACnB,IACE,MAAMiO,EAAW,IAAIC,SACrBD,EAASE,OAAO,SAAU9R,EAAQwR,MACxCI,EAASE,OAAO,UAAW1S,OAAO0Q,MAE5B,MAAMjS,QAAekG,EAAAA,EAAcgO,SAAS,sBAAuBH,GACnE,GAAI/T,GAA0B,MAAhBA,EAAO4H,KAAc,CACjChB,EAAAA,GAAUM,QAAQ,UAClBiH,EAASvO,MAAMqE,QAASc,EAAAA,EAAAA,GAAa/E,EAAOuG,KAAK4N,YAEjD,IAAMtP,aAAasO,QAAQ,OAAQzO,KAAK0O,UAAUhB,OAAOC,OAAO,CAAC,EAAG3N,KAAKC,MAAME,aAAaC,QAAQ,SAAS,MAAO,CAAEb,OAAQkK,EAASvO,MAAMqE,UAAY,CAAE,MAAOgB,GAAI,CACtK,IAAML,OAAOuC,cAAc,IAAIC,MAAM,gBAAiB,CAAE,MAAOnC,GAAI,CACrE,MACE2B,EAAAA,GAAUnH,MAAMO,GAAQ+H,KAAO,OAEnC,CAAE,MAAOtI,GACPyF,QAAQzF,MAAM,UAAWA,GACzBmH,EAAAA,GAAUnH,MAAM,aAClB,GAII0P,EAAYA,KAChBiD,OAAOC,OAAO3D,EAAU,CACtB1J,SAAUmJ,EAASvO,MAAMoF,SACzBb,WAAYgK,EAASvO,MAAMuE,WAC3B0K,MAAOV,EAASvO,MAAMiP,OAAS,GAC/BC,MAAOX,EAASvO,MAAMkP,OAAS,MAI7BqC,EAAoBA,KACxBiB,OAAOC,OAAOzB,EAAc,CAC1BE,aAAc,GACdC,aAAc,GACdC,iBAAkB,MAKhB7L,EAAcC,GACbA,EACE,IAAIE,KAAKF,GAAYG,eAAe,SADnB,IAKpBnC,GAAkBC,EAAAA,EAAAA,MAClBkN,GAAmBlN,EAAAA,EAAAA,KAAI,GACvBC,GAAeC,EAAAA,EAAAA,IAAS,CAC5BC,KAAM,aACNC,QAAS,KAGLc,GAAelB,EAAAA,EAAAA,IAAI,IAGnB+Q,GAAe/Q,EAAAA,EAAAA,IAAI,GACnBgR,GAAmBhR,EAAAA,EAAAA,IAAI,IAEvBiR,EAAiBxO,MAAOO,EAAO,KACnC,IACE,MAAM8L,EAAMF,IACNhM,QAAYC,EAAAA,EAAcC,IAAI,oBAAqB,CAAEC,QAAS+L,EAAK9L,KAAMA,EAAMC,UAAW+N,EAAiBzU,QAC7GqG,GAAoB,MAAbA,EAAI2B,OACbrD,EAAa3E,MAAQqG,EAAIM,KAAKC,MAAQ,GACtC4N,EAAaxU,MAAQqG,EAAIM,KAAKF,MAAQA,EAE1C,CAAE,MAAO5G,GACPyF,QAAQzF,MAAM,YAAaA,GAC3BmH,EAAAA,GAAUnH,MAAM,WAClB,GAIIgR,EAAsBjN,IAC1B,MAAM+Q,EAAS,CACbC,SAAU,UACVC,MAAO,UACPC,SAAU,UACVC,WAAY,UACZC,IAAK,SACLC,MAAO,WAET,OAAON,EAAO/Q,IAAS,QAInBkN,EAAuBlN,IAC3B,MAAMsR,EAAU,CACdN,SAAU,QACVC,MAAO,OACPC,SAAU,OACVC,WAAY,OACZC,IAAK,OACLC,MAAO,MAET,OAAOC,EAAQtR,IAAUA,GAAQ,QAI7BgN,EAAuB1K,UAC3B,IACE,MAAMqM,EAAMF,IACNpL,EAAU,CACdT,QAAS+L,EACTrL,cAAexD,EAAaE,KAC5BC,QAASH,EAAaG,QACtBuD,MAAO,GAEHf,QAAYC,EAAAA,EAAce,KAAK,mBAAoBJ,GACrDZ,GAAoB,MAAbA,EAAI2B,MACbhB,EAAAA,GAAUM,QAAQ,UAClBqJ,EAAiB3Q,OAAQ,EACzB0D,EAAaE,KAAO,aACpBF,EAAaG,QAAU,SAEjB6Q,EAAe,IAErB1N,EAAAA,GAAUnH,MAAMwG,GAAK8B,KAAO,OAEhC,CAAE,MAAOtI,GACPyF,QAAQzF,MAAM,UAAWA,GACzBmH,EAAAA,GAAUnH,MAAM,SAClB,GAUF,OANA0I,EAAAA,EAAAA,IAAU,KACR+J,IACAK,IACA+B,MAGK,CACL7C,cACAC,qBACAC,kBACAvO,kBACA+K,WACAH,WACAiB,gBACAgC,kBACAvC,WACAU,kBACAwB,eACAZ,WACAK,mBACAE,mBACAjN,eACAiB,eACAoK,YACAkC,gBACA3B,sBACAM,mBACA0B,uBACAZ,sBACAR,kBACA5B,sBACAK,qBACAC,eACAzJ,aAAY,IACZoK,YACAgC,oBACAhM,aACAsL,qBACAC,sBACAF,uBAEJ,G,UCz2BF,MAAM9C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASqH,GAAQ,CAAC,YAAY,qBAEzF,O,uBCRA,IAAIC,EAAwB,EAAQ,MAChCC,EAAa,EAAQ,MACrBC,EAAa,EAAQ,MACrB7U,EAAkB,EAAQ,MAE1BgB,EAAgBhB,EAAgB,eAChC8U,EAAU/C,OAGVgD,EAAwE,cAApDF,EAAW,WAAc,OAAOxW,SAAW,CAAhC,IAG/B2W,EAAS,SAAU9U,EAAI8L,GACzB,IACE,OAAO9L,EAAG8L,EACZ,CAAE,MAAO5M,GAAqB,CAChC,EAGApB,EAAOC,QAAU0W,EAAwBE,EAAa,SAAU3U,GAC9D,IAAI+U,EAAGC,EAAKvV,EACZ,YAAc+C,IAAPxC,EAAmB,YAAqB,OAAPA,EAAc,OAEO,iBAAjDgV,EAAMF,EAAOC,EAAIH,EAAQ5U,GAAKc,IAA8BkU,EAEpEH,EAAoBF,EAAWI,GAEF,YAA5BtV,EAASkV,EAAWI,KAAoBL,EAAWK,EAAEE,QAAU,YAAcxV,CACpF,C,uBC5BA,IAAIkV,EAAa,EAAQ,MACrBlS,EAAc,EAAQ,MAE1B3E,EAAOC,QAAU,SAAUoE,GAIzB,GAAuB,aAAnBwS,EAAWxS,GAAoB,OAAOM,EAAYN,EACxD,C,qFCcWgG,MAAM,e,SAcJA,MAAM,gB,SAYVA,MAAM,e,SAKWA,MAAM,mB,sEArD9ByD,EAAAA,EAAAA,IA8DUyB,EAAA,CA7DPlF,OAAK+M,EAAAA,EAAAA,IAAA,C,2BAAyDC,EAAAC,U,kBAAuCD,EAAAE,e,cAAwCF,EAAAG,W,QAAgCH,EAAAI,SAAyBJ,EAAAK,cAUtMlI,OAAQE,EAAAiI,c,0BANJ,IAGG,CAOAN,EAAAO,eAAiBP,EAAAC,Y,WADzBpN,EAAAA,EAAAA,IAIO,O,MAFLG,MAAM,kBACLiF,OAAKuI,EAAAA,EAAAA,IAAEnI,EAAAoI,iB,0BA0BV1N,EAAAA,EAAAA,IAEM,OAFDC,MAAM,eAAgBiF,OAAKuI,EAAAA,EAAAA,IAAA,CAAAE,QAAaV,EAAAW,kB,EAC3CC,EAAAA,EAAAA,IAAajM,EAAAkM,OAAA,kBAAAxT,GAAA,I,GAIgBsH,EAAAkM,OAAOpJ,S,WAAtC5E,EAAAA,EAAAA,IAEM,MAFNoB,EAEM,EADJ2M,EAAAA,EAAAA,IAA2BjM,EAAAkM,OAAA,iBAAAxT,GAAA,O,eAIlB2S,EAAAC,Y,WAAXpN,EAAAA,EAAAA,IAQM,MARNyB,EAQM,IAAAhB,EAAA,KAAAA,EAAA,KAPJP,EAAAA,EAAAA,IAMM,OAND+N,QAAQ,eAAeC,MAAM,8B,EAChChO,EAAAA,EAAAA,IAIQ,QAHNiO,KAAK,eACL,eAAa,OACbzD,EAAE,kQ,gCArCgByC,EAAAhM,OAASW,EAAAkM,OAAOzI,O,MAA7B,S,YACT,IAiBM,EAjBNrF,EAAAA,EAAAA,IAiBM,MAjBND,EAiBM,EAhBJ8N,EAAAA,EAAAA,IAYOjM,EAAAkM,OAAA,YAZP,IAYO,EAXL9N,EAAAA,EAAAA,IAUK,MATHC,OAAK+M,EAAAA,EAAAA,IAAA,CAAC,aAAY,C,iBACyBC,EAAAiB,c,cAAsD,UAATjB,EAAAkB,U,eAA+D,WAATlB,EAAAkB,U,cAA+D,UAATlB,EAAAkB,e,QAOjMlB,EAAAhM,OAAK,K,GAGoBW,EAAAkM,OAAOM,U,WAAvCtO,EAAAA,EAAAA,IAEM,MAFNI,EAEM,EADJ2N,EAAAA,EAAAA,IAA4BjM,EAAAkM,OAAA,kBAAAxT,GAAA,O,8DA+BtC,OACEmB,KAAM,gBACN4S,MAAO,CAELpN,MAAO,CACLlG,KAAMjC,OACN2O,QAAS,IAEXrC,OAAQ,CACNrK,KAAMjC,OACN2O,QAAS,SAEX6F,YAAa,CACXvS,KAAMjC,OACN2O,QAAS,IAIXyF,UAAW,CACTnS,KAAMuT,QACN7G,SAAS,GAEX0F,eAAgB,CACdpS,KAAMuT,QACN7G,SAAS,GAEX2F,WAAY,CACVrS,KAAMuT,QACN7G,SAAS,GAEX4F,QAAS,CACPtS,KAAMuT,QACN7G,SAAS,GAEX+F,cAAe,CACbzS,KAAMuT,QACN7G,SAAS,GAEXyG,cAAe,CACbnT,KAAMuT,QACN7G,SAAS,GAIX0G,UAAW,CACTpT,KAAMjC,OACN2O,QAAS,SACT2B,UAAYjS,GAAU,CAAC,QAAS,SAAU,SAASoI,SAASpI,IAE9DyW,eAAgB,CACd7S,KAAMjC,OACN2O,QAAS,QAIX8G,eAAgB,CACdxT,KAAMjC,OACN2O,QAAS,KAIbqB,KAAAA,CAAMuF,GAEJ,MAAMd,GAAciB,EAAAA,EAAAA,IAAS,KAC3B,OAAOH,EAAMjJ,QACX,IAAK,OAAQ,MAAO,OACpB,IAAK,SAAU,MAAO,SACtB,IAAK,QACL,QAAS,MAAO,WAKdsI,GAAiBc,EAAAA,EAAAA,IAAS,IAC1BH,EAAME,eACD,CACLE,gBAAiBJ,EAAME,gBAGpB,CAAC,GAGV,MAAO,CACLhB,cACAG,iBAEJ,G,UCpJF,MAAMzI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASqH,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://wavetune/./node_modules/core-js/internals/get-iterator.js","webpack://wavetune/./node_modules/core-js/modules/es.iterator.find.js","webpack://wavetune/./node_modules/core-js/internals/get-iterator-method.js","webpack://wavetune/./node_modules/core-js/modules/es.iterator.map.js","webpack://wavetune/./node_modules/core-js/internals/to-string-tag-support.js","webpack://wavetune/./node_modules/core-js/internals/iterate.js","webpack://wavetune/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://wavetune/./node_modules/core-js/internals/function-bind-context.js","webpack://wavetune/./src/views/UserFeedbackView.vue","webpack://wavetune/./src/views/UserFeedbackView.vue?6749","webpack://wavetune/./node_modules/core-js/internals/iterators.js","webpack://wavetune/./src/views/UserCenterView.vue","webpack://wavetune/./src/views/UserCenterView.vue?9b23","webpack://wavetune/./node_modules/core-js/internals/classof.js","webpack://wavetune/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://wavetune/./src/components/global/CardContainer.vue","webpack://wavetune/./src/components/global/CardContainer.vue?4bce"],"sourcesContent":["'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperThrowsOnInvalidIterator = require('../internals/iterator-helper-throws-on-invalid-iterator');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\nvar IS_PURE = require('../internals/is-pure');\n\nvar MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('map', function () { /* empty */ });\nvar mapWithoutClosingOnEarlyError = !IS_PURE && !MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('map', TypeError);\n\nvar FORCED = IS_PURE || MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR || mapWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  map: function map(mapper) {\n    anObject(this);\n    try {\n      aCallable(mapper);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (mapWithoutClosingOnEarlyError) return call(mapWithoutClosingOnEarlyError, this, mapper);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper\n    });\n  }\n});\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal');\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","<template>\r\n  <div class=\"user-feedback-view\">\r\n    <!-- 波形背景装饰 -->\r\n    <div class=\"wave-background\">\r\n      <div class=\"wave wave-1\"></div>\r\n      <div class=\"wave wave-2\"></div>\r\n      <div class=\"wave wave-3\"></div>\r\n    </div>\r\n    <!-- 顶部导航区域 -->\r\n    <div class=\"top-section\">\r\n\r\n      <el-page-header content=\"用户信息与反馈\" class=\"page-header\">\r\n        <template #extra>\r\n          <div class=\"header-divider\"></div>\r\n        </template>\r\n      </el-page-header>\r\n    </div>\r\n\r\n    <!-- 主要内容区域 -->\r\n    <el-row :gutter=\"20\" class=\"main-section\">\r\n      <!-- 个人信息卡片 -->\r\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"8\" :lg=\"8\" :xl=\"8\">\r\n        <CardContainer title=\"个人信息\" class=\"user-info-card\">\r\n          <div class=\"avatar-section\">\r\n            <el-avatar \r\n              :size=\"100\" \r\n              :src=\"user.avatar || resolveMedia('/static/avatar/default.jpg')\" \r\n              class=\"user-avatar\" \r\n            />\r\n            <div style=\"margin-top: 12px\">{{ user.name || '未登录' }}</div>\r\n            <el-button \r\n              type=\"text\" \r\n              class=\"change-avatar-btn\" \r\n              @click=\"$router.push('/user-center')\"\r\n            >\r\n              更换头像\r\n            </el-button>\r\n          </div>\r\n\r\n          <el-descriptions :column=\"1\" class=\"user-descriptions\">\r\n            <el-descriptions-item label=\"姓名\">\r\n              <span class=\"user-name\">{{ user.name || '—' }}</span>\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"学号\">{{ user.student_id || '—' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"注册\">{{ user.create_time ? formatDate(user.create_time) : '—' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"检测\">\r\n              <span class=\"status-normal\">{{ user.detection_count || 0 }} 次</span>\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"干预\">\r\n              <span class=\"status-primary\">{{ user.intervention_count || 0 }} 次</span>\r\n            </el-descriptions-item>\r\n          </el-descriptions>\r\n\r\n          <div class=\"info-notice\">\r\n            以上信息仅用于系统数据关联，不会对外泄露\r\n          </div>\r\n        </CardContainer>\r\n      </el-col>\r\n\r\n      <!-- 反馈表单卡片 -->\r\n      <el-col :xs=\"24\" :sm=\"24\" :md=\"16\" :lg=\"16\" :xl=\"16\">\r\n        <CardContainer title=\"系统使用反馈\" class=\"feedback-form-card\">\r\n          <el-form \r\n            ref=\"feedbackFormRef\" \r\n            :model=\"feedbackForm\" \r\n            :rules=\"formRules\" \r\n            label-width=\"100px\" \r\n            class=\"feedback-form\"\r\n          >\r\n            <el-form-item label=\"反馈类型\" prop=\"type\">\r\n              <el-radio-group v-model=\"feedbackForm.type\">\r\n                <el-radio label=\"accuracy\">脑疲劳检测准确性</el-radio>\r\n                <el-radio label=\"music\">轻音乐推荐效果</el-radio>\r\n                <el-radio label=\"function\">系统功能建议</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"反馈内容\" prop=\"content\">\r\n              <el-input \r\n                v-model=\"feedbackForm.content\" \r\n                type=\"textarea\" \r\n                :rows=\"5\" \r\n                placeholder=\"请详细描述您的体验或建议（最多 500 字）\" \r\n                maxlength=\"500\" \r\n                show-word-limit \r\n              />\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"满意度评分\" prop=\"rating\">\r\n              <div class=\"rating-section\">\r\n                <p class=\"rating-title\">对系统的满意度</p>\r\n                <!-- 仅显示星星，不显示数值 -->\r\n                <el-rate v-model=\"feedbackForm.rating\" :max=\"5\" />\r\n              </div>\r\n            </el-form-item>\r\n\r\n            <el-form-item class=\"form-actions\">\r\n              <div class=\"action-buttons\">\r\n                <el-button @click=\"cancelFeedback\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitFeedback\">提交反馈</el-button>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <!-- 历史反馈记录 -->\r\n          <div class=\"history-section\" v-if=\"feedbackList.length\">\r\n          <h4>历史反馈</h4>\r\n          <el-timeline>\r\n              <el-timeline-item\r\n                v-for=\"item in feedbackList\"\r\n                :key=\"item.id\"\r\n                :timestamp=\"item.submit_time\"\r\n              >\r\n                <div class=\"history-item\" style=\"padding: 12px; border-radius: 8px; background: #f9f9f9;\">\r\n                  <!-- 操作栏：名称+类型 + 评分+删除 -->\r\n                  <div class=\"history-header\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\r\n                    <div style=\"display:flex;align-items:center;gap:12px\">\r\n                      <strong>{{ user.name || '匿名' }}</strong>\r\n                      <el-tag size=\"small\">{{ item.feedback_type_name || '其他' }}</el-tag>\r\n                    </div>\r\n                    <div style=\"display: flex; align-items: center; gap: 16px;\">\r\n                      <el-rate :model-value=\"item.score\" :max=\"5\" disabled />\r\n                      <el-button type=\"danger\" size=\"mini\" @click=\"deleteFeedback(item.id)\">删除</el-button>\r\n                    </div>\r\n                  </div>\r\n                  <!-- 反馈内容：单独区块，与操作栏分隔 -->\r\n                  <div class=\"history-content\" style=\"padding: 8px; background: #fff; border-radius: 4px;\">\r\n                    {{ item.content }}\r\n                  </div>\r\n                </div>\r\n              </el-timeline-item>\r\n          </el-timeline>\r\n        </div>\r\n          <div v-else class=\"history-empty\" style=\"margin-top:24px;padding:24px;\">\r\n            <el-empty description=\"还没有历史反馈\">\r\n              <template #footer>\r\n                <el-button type=\"primary\" @click=\"$refs.feedbackFormRef?.scrollIntoView?.() || window.scrollTo({top:0,behavior:'smooth'})\">去提交第一个反馈</el-button>\r\n              </template>\r\n            </el-empty>\r\n          </div>\r\n        </CardContainer>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 底部提示区域 -->\r\n    <div class=\"bottom-section\">\r\n      <div class=\"feedback-notice\">\r\n        <p>反馈提交后，我们将在 3 个工作日内评估并回复；若需紧急支持，请通过以下方式联系我们：</p>\r\n        <p>邮箱：<a href=\"mailto:help@wavetune.example\">help@wavetune.com</a> ｜ QQ 群：12345678</p>\r\n        <p>常见问题：<a href=\"/help/faq\" target=\"_blank\">查看 FAQ</a></p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, onBeforeUnmount } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport CardContainer from '@/components/global/CardContainer.vue'\r\nimport { resolveMedia } from '@/utils/media'\r\nimport { requestMethod } from '@/utils/request'\r\nimport { ElMessage } from 'element-plus'\r\nimport { ElMessageBox } from 'element-plus'\r\n\r\n// 路由实例\r\nconst router = useRouter()\r\n\r\n// 表单引用\r\nconst feedbackFormRef = ref(null)\r\n\r\n// 表单数据\r\nconst feedbackForm = reactive({\r\n  type: 'accuracy',\r\n  content: '',\r\n  rating: 3\r\n})\r\n\r\n// 表单验证规则\r\nconst formRules = {\r\n  type: [\r\n    { required: true, message: '请选择反馈类型', trigger: 'change' }\r\n  ],\r\n  content: [\r\n    { required: true, message: '请输入反馈内容', trigger: 'blur' },\r\n    { min: 10, message: '反馈内容至少10个字符', trigger: 'blur' }\r\n  ]\r\n}\r\n\r\n// 用户信息（补充完整字段）\r\nconst user = reactive({\r\n  avatar: null,\r\n  name: '',\r\n  student_id: '',       // 学号\r\n  create_time: '',      // 注册时间\r\n  detection_count: 0,   // 检测次数\r\n  intervention_count: 0 // 干预次数\r\n})\r\n\r\n// 反馈列表\r\nconst feedbackList = ref([])\r\n\r\n// 加载用户信息（补充完整字段读取）\r\nconst loadUser = () => {\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (u) {\r\n      user.avatar = resolveMedia(u.avatar || '/static/avatar/default.jpg')\r\n      user.name = u.username || u.name || ''\r\n      // 补充其他个人信息字段\r\n      user.student_id = u.student_id || ''\r\n      user.create_time = u.create_time || ''\r\n      user.detection_count = u.detection_count || 0\r\n      user.intervention_count = u.intervention_count || 0\r\n    }\r\n  } catch (e) {\r\n    console.error('加载用户信息失败:', e)\r\n  }\r\n}\r\n\r\n// 日期格式化工具\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '—'\r\n  try {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  } catch (e) {\r\n    return dateString // 格式化失败时显示原始字符串\r\n  }\r\n}\r\n\r\n// 获取历史反馈\r\nconst fetchFeedbackList = async () => {\r\n  try {\r\n    // 尝试从 localStorage 获取用户ID\r\n    let userId = null\r\n    try {\r\n      const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n      if (u && u.id) userId = u.id\r\n    } catch (e) {\r\n      console.error('获取用户ID失败:', e)\r\n    }\r\n\r\n    if (!userId) {\r\n      feedbackList.value = []\r\n      return\r\n    }\r\n\r\n    const res = await requestMethod.get('/feedback/history', {\r\n      user_id: userId,\r\n      page: 1,\r\n      page_size: 20\r\n    })\r\n\r\n    // 后端返回结构: { code, msg, data: { list: [...] } }\r\n    feedbackList.value = res.data?.list || []\r\n  } catch (e) {\r\n    console.error('获取历史反馈失败:', e)\r\n  }\r\n}\r\n\r\n// 提交反馈\r\nconst submitFeedback = async () => {\r\n  // 表单验证\r\n  try {\r\n    await feedbackFormRef.value.validate()\r\n  } catch (err) {\r\n    return\r\n  }\r\n\r\n  // 构建提交数据（按后端 Pydantic 模型字段命名）\r\n  let userId = null\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (u && u.id) userId = u.id\r\n  } catch (e) {\r\n    console.error('获取用户ID失败:', e)\r\n  }\r\n\r\n  if (!userId) {\r\n    ElMessage.error('请先登录后再提交反馈')\r\n    return\r\n  }\r\n\r\n  const payload = {\r\n    user_id: userId,\r\n    feedback_type: feedbackForm.type,\r\n    content: feedbackForm.content.trim(),\r\n    score: feedbackForm.rating\r\n  }\r\n\r\n  // 发送请求\r\n  try {\r\n    await requestMethod.post('/feedback/submit', payload)\r\n    ElMessage.success('反馈已提交，感谢您的建议')\r\n    // 重新拉取历史反馈，确保格式一致\r\n    await fetchFeedbackList()\r\n    // 重置表单\r\n    feedbackForm.content = ''\r\n    feedbackForm.rating = 3\r\n    feedbackForm.type = 'accuracy'\r\n    // 触发反馈更新事件\r\n    try {\r\n      window.dispatchEvent(new Event('feedback-changed'))\r\n    } catch (e) {}\r\n  } catch (e) {\r\n    console.error('提交反馈失败:', e)\r\n  }\r\n}\r\n\r\n// 删除反馈\r\nconst deleteFeedback = async (feedbackId) => {\r\n  try {\r\n    const u = JSON.parse(window.localStorage.getItem('user') || 'null')\r\n    if (!u || !u.id) {\r\n      ElMessage.error('请先登录')\r\n      return\r\n    }\r\n\r\n    await ElMessageBox.confirm('确认删除这条反馈吗？此操作不可恢复', '删除反馈', {\r\n      confirmButtonText: '确认',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n\r\n      const res = await requestMethod.delete(`/feedback/${feedbackId}`, { user_id: u.id })\r\n    if (res && res.code === 200) {\r\n      ElMessage.success('删除成功')\r\n      // 从本地列表移除\r\n      feedbackList.value = feedbackList.value.filter(i => i.id !== feedbackId)\r\n      try { window.dispatchEvent(new Event('feedback-changed')) } catch (e) {}\r\n    } else {\r\n      ElMessage.error(res?.msg || '删除失败')\r\n    }\r\n  } catch (e) {\r\n    // 取消确认会抛错，不必提示\r\n    if (e && e.message && e.message.includes('取消')) return\r\n    console.error('删除反馈失败:', e)\r\n    ElMessage.error('删除失败')\r\n  }\r\n}\r\n\r\n// 取消反馈\r\nconst cancelFeedback = () => {\r\n  feedbackForm.content = ''\r\n  feedbackForm.rating = 3\r\n  feedbackForm.type = 'accuracy'\r\n  // 重置表单验证状态\r\n  if (feedbackFormRef.value) {\r\n    feedbackFormRef.value.clearValidate()\r\n  }\r\n}\r\n\r\n// 组件挂载时\r\nonMounted(() => {\r\n  loadUser()\r\n  window.addEventListener('auth-changed', loadUser)\r\n  fetchFeedbackList()\r\n})\r\n\r\n// 组件卸载前\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('auth-changed', loadUser)\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 设计令牌\r\n:root {\r\n  --bg-primary: #ffffff;\r\n  --bg-secondary: #f8fafc;\r\n  --color-primary: #3b82f6;\r\n  --color-primary-light: #93c5fd;\r\n  --color-primary-dark: #2563eb;\r\n  --text-primary: #1e293b;\r\n  --text-secondary: #64748b;\r\n  --border-color: #e2e8f0;\r\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  --radius-sm: 6px;\r\n  --radius-md: 12px;\r\n  --radius-lg: 16px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n}\r\n\r\n.user-feedback-view {\r\n  position: relative;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  background: var(--bg-primary);\r\n  border-radius: var(--radius-lg);\r\n  overflow: visible;\r\n  box-shadow: var(--shadow-md);\r\n  min-height: calc(100vh - 100px);\r\n}\r\n\r\n.wave-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.wave {\r\n  position: absolute;\r\n  width: 200%;\r\n  height: 100px;\r\n  background: linear-gradient(90deg, var(--color-primary-light) 0%, transparent 100%);\r\n  opacity: 0.1;\r\n  border-radius: 50%;\r\n  animation: wave-animation 15s linear infinite;\r\n}\r\n\r\n.wave-1 {\r\n  top: 10%;\r\n  left: -50%;\r\n  animation-duration: 20s;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.wave-2 {\r\n  top: 30%;\r\n  left: -70%;\r\n  animation-duration: 25s;\r\n  animation-delay: -5s;\r\n  height: 150px;\r\n  background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);\r\n}\r\n\r\n.wave-3 {\r\n  top: 50%;\r\n  left: -60%;\r\n  animation-duration: 18s;\r\n  animation-delay: -2s;\r\n  height: 80px;\r\n  background: linear-gradient(90deg, var(--color-primary-dark) 0%, transparent 100%);\r\n}\r\n\r\n@keyframes wave-animation {\r\n  0% {\r\n    transform: translateX(0) translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateX(-25%) translateY(10px);\r\n  }\r\n  100% {\r\n    transform: translateX(-50%) translateY(0);\r\n  }\r\n}\r\n\r\n.top-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: var(--spacing-lg);\r\n  border-bottom: 1px solid var(--border-color);\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n}\r\n\r\n.main-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: var(--spacing-lg);\r\n  min-height: 600px;\r\n\r\n.user-info-card {\r\n  height: fit-content;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n\r\n  .avatar-section {\r\n    text-align: center;\r\n    margin-bottom: var(--spacing-lg);\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.5) 100%);\r\n    border-radius: var(--radius-md);\r\n    padding: var(--spacing-md);\r\n    border: 1px solid var(--border-color);\r\n    \r\n    .user-avatar {\r\n      margin-bottom: var(--spacing-md);\r\n      border: 4px solid rgba(59, 130, 246, 0.2);\r\n      transition: transform 0.3s ease, border-color 0.3s ease;\r\n      \r\n      &:hover {\r\n        transform: scale(1.05);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n\r\n    .change-avatar-btn {\r\n      font-size: 14px;\r\n      transition: all 0.2s ease;\r\n      color: var(--color-primary);\r\n      \r\n      &:hover {\r\n        transform: translateY(-1px);\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n\r\n  .user-descriptions {\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    :deep(.el-descriptions-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-secondary);\r\n    }\r\n    \r\n    .user-name {\r\n      font-weight: 600;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    .status-normal {\r\n      color: #10b981;\r\n      font-weight: 500;\r\n    }\r\n    \r\n    .status-primary {\r\n      color: var(--color-primary);\r\n      font-weight: 500;\r\n    }\r\n  }\r\n\r\n  .info-notice {\r\n    margin-top: var(--spacing-md);\r\n    font-size: 12px;\r\n    color: var(--text-secondary);\r\n    text-align: center;\r\n    padding: var(--spacing-sm);\r\n    background: rgba(248, 250, 252, 0.8);\r\n    border-radius: var(--radius-sm);\r\n  }\r\n}\r\n\r\n.feedback-form-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n\r\n  .feedback-form {\r\n    .el-form-item {\r\n      margin-bottom: var(--spacing-lg);\r\n      \r\n      :deep(.el-form-item__label) {\r\n        font-weight: 500;\r\n        color: var(--text-primary);\r\n      }\r\n      \r\n      :deep(.el-input__wrapper) {\r\n        border-radius: var(--radius-md);\r\n        transition: all 0.3s ease;\r\n        \r\n        &:focus-within {\r\n          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n          border-color: var(--color-primary);\r\n        }  \r\n  } \r\n      :deep(.el-radio__label) {\r\n        color: var(--text-primary);\r\n      }\r\n      \r\n      :deep(.el-radio__input.is-checked .el-radio__inner) {\r\n        border-color: var(--color-primary);\r\n        background-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    .rating-section {\r\n      margin-bottom: var(--spacing-md);\r\n\r\n      .rating-title {\r\n        margin-bottom: var(--spacing-sm);\r\n        font-size: 14px;\r\n        color: var(--text-primary);\r\n        font-weight: 500;\r\n      }\r\n      \r\n      :deep(.el-rate__icon) {\r\n        font-size: 22px;\r\n        \r\n        &.is-active {\r\n          color: #f59e0b;\r\n        }\r\n      }\r\n    }\r\n\r\n    .form-actions {\r\n      margin-bottom: 0;\r\n      padding-top: var(--spacing-md);\r\n\r\n      .action-buttons {\r\n        display: flex;\r\n        gap: var(--spacing-md);\r\n      }\r\n    }  \r\n\r\n  .history-section {\r\n    margin-top: var(--spacing-xl);\r\n    padding-top: var(--spacing-lg);\r\n    border-top: 1px dashed var(--border-color);\r\n\r\n    h4 {\r\n      margin-bottom: var(--spacing-md);\r\n      font-size: 16px;\r\n      color: var(--text-primary);\r\n      font-weight: 600;\r\n      position: relative;\r\n      padding-left: var(--spacing-md);\r\n      \r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        left: 0;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 4px;\r\n        height: 16px;\r\n        background-color: var(--color-primary);\r\n        border-radius: 2px;\r\n      }\r\n    }\r\n\r\n    .history-item {\r\n      padding: var(--spacing-md);\r\n      background: rgba(255, 255, 255, 0.95);\r\n      border-radius: var(--radius-md);\r\n      border: 1px solid var(--border-color);\r\n      margin-bottom: calc(var(--spacing-md) * 1.2);\r\n      transition: all 0.24s ease;\r\n      backdrop-filter: blur(6px);\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--spacing-sm);\r\n      word-break: break-word;\r\n      \r\n      &:hover {\r\n        transform: translateY(-4px);\r\n        box-shadow: 0 8px 20px rgba(0,0,0,0.06);\r\n        border-color: var(--color-primary-light);\r\n      }\r\n\r\n      .history-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          gap: 12px;\r\n          flex-wrap: wrap;\r\n          margin-bottom: var(--spacing-sm);\r\n          font-size: 14px;\r\n\r\n          .left {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n          }\r\n\r\n          .date {\r\n            font-weight: 500;\r\n            color: var(--text-secondary);\r\n            font-size: 13px;\r\n          }\r\n\r\n          .feedback-type {\r\n            color: var(--color-primary);\r\n            font-weight: 600;\r\n            font-size: 13px;\r\n          }\r\n\r\n          .rating {\r\n            color: #f59e0b;\r\n            font-weight: 500;\r\n          }\r\n        }\r\n\r\n        .history-content {\r\n          font-size: 14px;\r\n          color: var(--text-primary);\r\n          line-height: 1.7;\r\n          padding: 12px;\r\n          background: rgba(248, 250, 252, 0.95);\r\n          border-radius: var(--radius-sm);\r\n          border-left: 3px solid var(--color-primary);\r\n          max-width: 100%;\r\n          white-space: pre-wrap;\r\n          word-break: break-word;\r\n        }\r\n      \r\n      .history-actions {\r\n        margin-top: var(--spacing-sm);\r\n        display: flex;\r\n        gap: var(--spacing-sm);\r\n      }\r\n    }\r\n    /* 确保 Element Plus 时间线的内容区域不被固定宽度或 padding 限制 */\r\n    :deep(.el-timeline) {\r\n      padding-left: 0;\r\n    }\r\n    :deep(.el-timeline-item__wrapper) {\r\n      display: block;\r\n      padding: 0 0 16px 0;\r\n    }\r\n    :deep(.el-timeline-item__content) {\r\n      width: 100% !important;\r\n      padding: 0 !important;\r\n    }\r\n  }\r\n}\r\n\r\n.bottom-section {\r\n  position: relative;\r\n  z-index: 1;\r\n  padding: calc(var(--spacing-lg) * 1.5);\r\n  border-top: 1px solid var(--border-color);\r\n  text-align: left;\r\n  background: linear-gradient(180deg, rgba(250,250,250,0.6), transparent);\r\n  backdrop-filter: blur(8px);\r\n\r\n  .feedback-notice {\r\n    margin: 0 0 var(--spacing-sm) 0;\r\n    font-size: 14px;\r\n    color: var(--text-primary);\r\n    line-height: 1.6;\r\n    font-weight: 500;\r\n  }\r\n\r\n  a {\r\n    color: var(--color-primary);\r\n    text-decoration: none;\r\n    transition: all 0.2s ease;\r\n    font-weight: 500;\r\n    \r\n    &:hover {\r\n      text-decoration: underline;\r\n      color: var(--color-primary-dark);\r\n      transform: translateY(-1px);\r\n    }\r\n  }\r\n\r\n  .contact-row {\r\n    margin-top: var(--spacing-sm);\r\n    display:flex;\r\n    gap: var(--spacing-md);\r\n    flex-wrap:wrap;\r\n    align-items: center;\r\n    \r\n    p {\r\n      margin:0;\r\n      color: var(--text-secondary);\r\n    }\r\n  }\r\n\r\n  .footer-divider {\r\n    height: 1px;\r\n    background: var(--border-color);\r\n    margin: var(--spacing-md) 0;\r\n  }\r\n}\r\n\r\n// 应用响应式工具\r\n@import '@/assets/styles/breakpoints.scss';\r\n\r\n// 响应式适配 - 使用断点混入\r\n@include mobile-layout {\r\n  :root {\r\n    --spacing-page: 16px;\r\n    --spacing-lg: 16px;\r\n    --spacing-md: 12px;\r\n    --spacing-sm: 8px;\r\n  }\r\n  \r\n  .top-section {\r\n    padding: var(--spacing-page);\r\n    min-height: 200px;\r\n  }\r\n  \r\n  .main-section {\r\n    padding: var(--spacing-page);\r\n    gap: var(--spacing-md);\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(16px, 12px);\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n      \r\n      .avatar-container {\r\n        width: 70px;\r\n        height: 70px;\r\n      }\r\n      \r\n      .user-details {\r\n        text-align: center;\r\n      }\r\n    }\r\n    \r\n    .user-details {\r\n      .user-name {\r\n        @include responsive-font(18px, null, 16px);\r\n      }\r\n      \r\n      .user-status {\r\n        @include responsive-font(13px, null, 12px);\r\n      }\r\n    }\r\n    \r\n    .action-button {\r\n      width: 100%;\r\n      font-size: 14px;\r\n      padding: 10px;\r\n    }\r\n  }\r\n  \r\n  .feedback-form-card {\r\n    @include card(16px, 12px);\r\n    margin-top: 0;\r\n    \r\n    .card-title {\r\n      font-size: 18px;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .form-group {\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .form-label {\r\n      font-size: 14px;\r\n      margin-bottom: 8px;\r\n    }\r\n    \r\n    :deep(.el-input__wrapper),\r\n    :deep(.el-textarea__wrapper) {\r\n      padding: 6px 12px;\r\n    }\r\n    \r\n    .rating-container {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-xs);\r\n    }\r\n    \r\n    .submit-button {\r\n      width: 100%;\r\n      padding: 12px;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n  \r\n  .history-card {\r\n    @include card(16px, 12px);\r\n    \r\n    .card-title {\r\n      font-size: 18px;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n    \r\n    .history-item {\r\n      padding: 16px;\r\n      \r\n      .history-header {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n        gap: var(--spacing-xs);\r\n        margin-bottom: var(--spacing-xs);\r\n      }\r\n      \r\n      .history-date {\r\n        font-size: 12px;\r\n      }\r\n      \r\n      .history-content {\r\n        font-size: 13px;\r\n        line-height: 1.5;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .bottom-section {\r\n    padding: var(--spacing-md);\r\n    \r\n    .feedback-notice {\r\n      font-size: 13px;\r\n      line-height: 1.5;\r\n    }\r\n    \r\n    .contact-row {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-sm);\r\n      \r\n      p {\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 平板设备适配\r\n@include respond-to(sm) {\r\n  .content-wrapper {\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    gap: var(--spacing-lg);\r\n  }\r\n  \r\n  .user-info-card,\r\n  .feedback-form-card,\r\n  .history-card {\r\n    @include card(18px);\r\n  }\r\n  \r\n  .user-info-card {\r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .history-item {\r\n    padding: 20px;\r\n  }\r\n}\r\n\r\n// 大屏设备优化\r\n@include large-desktop-layout {\r\n  .user-feedback-view {\r\n    min-height: 100vh;\r\n  }\r\n  \r\n  .main-section {\r\n    @include container(false);\r\n    max-width: 1400px;\r\n    display: grid;\r\n    grid-template-columns: 300px 1fr;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(24px);\r\n    position: sticky;\r\n    top: 100px;\r\n  }\r\n  \r\n  .form-history-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .feedback-form-card,\r\n  .history-card {\r\n    @include card(24px);\r\n  }\r\n}\r\n\r\n// 超大屏设备优化\r\n@include extra-large-desktop-layout {\r\n  .main-section {\r\n    max-width: 1600px;\r\n    grid-template-columns: 350px 1fr;\r\n    gap: 40px;\r\n  }\r\n}\r\n\r\n// 高对比度模式支持\r\n@include high-contrast {\r\n  .user-info-card,\r\n  .feedback-form-card,\r\n  .history-card {\r\n    border: 2px solid #000;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  .history-item {\r\n    border: 1px solid #000;\r\n  }\r\n  \r\n  :deep(.el-button) {\r\n    border-width: 2px;\r\n  }\r\n  \r\n  :deep(.el-input__wrapper),\r\n  :deep(.el-textarea__wrapper) {\r\n    border-width: 2px;\r\n  }\r\n}\r\n\r\n// 减少动画模式支持\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.01ms !important;\r\n    animation-duration: 0.01ms !important;\r\n  }\r\n  \r\n  .wave {\r\n    animation: none !important;\r\n  }\r\n}\r\n  .footer-divider {\r\n    height: 1px;\r\n    background: var(--border-color);\r\n    margin: var(--spacing-lg) 0;\r\n  }\r\n}\r\n\r\n/* 响应式适配 */\r\n@media (max-width: 768px) {\r\n  .user-feedback-view {\r\n    margin: 0;\r\n    border-radius: 0;\r\n    min-height: 100vh;\r\n  }\r\n\r\n  .top-section,\r\n  .main-section,\r\n  .bottom-section {\r\n    padding: var(--spacing-md);\r\n  }\r\n\r\n  .main-section {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .history-item .history-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: var(--spacing-sm);\r\n  }\r\n}\r\n}\r\n</style>","import script from \"./UserFeedbackView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserFeedbackView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserFeedbackView.vue?vue&type=style&index=0&id=c33743fe&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c33743fe\"]])\n\nexport default __exports__","'use strict';\nmodule.exports = {};\n","<template>\r\n  <div class=\"user-center\">\r\n    <!-- 波形背景装饰 -->\r\n    <div class=\"wave-background\">\r\n      <div class=\"wave wave-1\"></div>\r\n      <div class=\"wave wave-2\"></div>\r\n      <div class=\"wave wave-3\"></div>\r\n    </div>\r\n    \r\n    <div class=\"user-center-container\">\r\n      <!-- 用户信息卡片 -->\r\n      <el-card class=\"user-info-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>个人信息</h2>\r\n            <div style=\"display:flex;gap:8px;align-items:center\">\r\n              <el-button type=\"primary\" @click=\"editMode = !editMode\">\r\n                {{ editMode ? '取消编辑' : '编辑资料' }}\r\n              </el-button>\r\n              <el-button type=\"danger\" plain @click=\"handleDeleteAccount\">\r\n                删除账户\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </template>\r\n        \r\n        <div class=\"user-info-content\">\r\n          <!-- 头像区域 -->\r\n          <div class=\"avatar-section\">\r\n            <el-avatar\r\n              :size=\"120\"\r\n              :src=\"userInfo.avatar || resolveMedia('/static/avatar/default.jpg')\"\r\n              class=\"user-avatar\"\r\n            >\r\n              <el-icon><User /></el-icon>\r\n            </el-avatar>\r\n            <el-upload\r\n              v-if=\"editMode\"\r\n              class=\"avatar-uploader\"\r\n              :show-file-list=\"false\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              :http-request=\"uploadAvatar\"\r\n            >\r\n              <el-button type=\"primary\" size=\"small\" class=\"upload-btn\">\r\n                <el-icon><Upload /></el-icon>\r\n                更换头像\r\n              </el-button>\r\n            </el-upload>\r\n          </div>\r\n          \r\n          <!-- 用户信息表单 -->\r\n          <el-form\r\n            ref=\"userFormRef\"\r\n            :model=\"userForm\"\r\n            :rules=\"userRules\"\r\n            label-width=\"100px\"\r\n            class=\"user-form\"\r\n          >\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                  <el-input\r\n                    v-model=\"userForm.username\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入用户名\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"学号\" prop=\"student_id\">\r\n                  <el-input\r\n                    v-model=\"userForm.student_id\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入学号\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                  <el-input\r\n                    v-model=\"userForm.email\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入邮箱\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"手机号\" prop=\"phone\">\r\n                  <el-input\r\n                    v-model=\"userForm.phone\"\r\n                    :disabled=\"!editMode\"\r\n                    placeholder=\"请输入手机号\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"检测次数\">\r\n                  <el-input :value=\"userInfo.detection_count\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"干预次数\">\r\n                  <el-input :value=\"userInfo.intervention_count\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"注册时间\">\r\n                  <el-input :value=\"formatDate(userInfo.create_time)\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"最后登录\">\r\n                  <el-input :value=\"formatDate(userInfo.last_login_time)\" disabled />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-form-item v-if=\"editMode\">\r\n              <el-button type=\"primary\" :loading=\"updateLoading\" @click=\"handleUpdateProfile\">\r\n                保存修改\r\n              </el-button>\r\n              <el-button @click=\"resetForm\">重置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <!-- 偏好设置卡片 -->\r\n      <el-card class=\"preferences-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <h2>偏好设置</h2>\r\n        </template>\r\n        \r\n        <el-form\r\n          ref=\"preferencesFormRef\"\r\n          :model=\"preferencesForm\"\r\n          label-width=\"120px\"\r\n          class=\"preferences-form\"\r\n        >\r\n          <el-form-item label=\"默认疲劳等级\">\r\n            <el-select v-model=\"preferencesForm.default_fatigue_level\" @change=\"updatePreference('default_fatigue_level', $event)\">\r\n              <el-option label=\"轻度疲劳\" value=\"light\" />\r\n              <el-option label=\"中度疲劳\" value=\"medium\" />\r\n              <el-option label=\"重度疲劳\" value=\"heavy\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"偏好音乐类型\">\r\n            <el-select v-model=\"preferencesForm.preferred_music_type\" @change=\"updatePreference('preferred_music_type', $event)\">\r\n              <el-option label=\"自然音效\" value=\"natural\" />\r\n              <el-option label=\"钢琴音乐\" value=\"piano\" />\r\n              <el-option label=\"白噪音\" value=\"whitenoise\" />\r\n              <el-option label=\"混合音乐\" value=\"mix\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"通知设置\">\r\n            <el-switch\r\n              v-model=\"preferencesForm.notification_enabled\"\r\n              active-text=\"开启\"\r\n              inactive-text=\"关闭\"\r\n              @change=\"updatePreference('notification_enabled', $event ? 'true' : 'false')\"\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"自动播放\">\r\n            <el-switch\r\n              v-model=\"preferencesForm.auto_play\"\r\n              active-text=\"开启\"\r\n              inactive-text=\"关闭\"\r\n              @change=\"updatePreference('auto_play', $event ? 'true' : 'false')\"\r\n            />\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n      \r\n      <!-- 会话管理卡片 -->\r\n      <el-card class=\"sessions-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>会话管理</h2>\r\n            <el-button type=\"danger\" @click=\"handleLogoutAll\">\r\n              退出所有设备\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <el-table :data=\"sessions\" style=\"width: 100%\">\r\n          <el-table-column prop=\"device_display\" label=\"设备信息\" />\r\n          <el-table-column prop=\"ip_address\" label=\"IP地址\" />\r\n          <el-table-column prop=\"create_time\" label=\"登录时间\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.create_time) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"last_activity\" label=\"最后活动\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.last_activity) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template #default=\"{ row }\">\r\n              <el-button\r\n                v-if=\"row.id !== currentSessionId\"\r\n                type=\"danger\"\r\n                size=\"small\"\r\n                @click=\"handleRevokeSession(row.id)\"\r\n              >\r\n                撤销\r\n              </el-button>\r\n              <el-tag v-else type=\"success\" size=\"small\">当前会话</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <!-- 历史反馈卡片 -->\r\n      <el-card class=\"feedback-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <h2>历史反馈</h2>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"showFeedbackForm = !showFeedbackForm\">\r\n              提交新反馈\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        \r\n        <!-- 新反馈表单 -->\r\n        <div v-if=\"showFeedbackForm\" class=\"feedback-form-container\">\r\n          <el-form ref=\"feedbackFormRef\" :model=\"feedbackForm\" label-width=\"100px\" class=\"feedback-form\">\r\n            <el-form-item label=\"反馈类型\">\r\n              <el-select v-model=\"feedbackForm.type\">\r\n                <el-option label=\"功能建议\" value=\"suggestion\" />\r\n                <el-option label=\"问题反馈\" value=\"bug\" />\r\n                <el-option label=\"其他\" value=\"other\" />\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"反馈内容\">\r\n              <el-input v-model=\"feedbackForm.content\" type=\"textarea\" rows=\"4\" placeholder=\"请输入您的反馈内容\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"handleSubmitFeedback\">提交</el-button>\r\n              <el-button @click=\"showFeedbackForm = false\">取消</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        \r\n        <!-- 历史反馈列表 -->\r\n        <el-table :data=\"feedbackList\" style=\"width: 100%\" class=\"feedback-table\">\r\n          <el-table-column prop=\"feedback_type\" label=\"反馈类型\">\r\n            <template #default=\"{ row }\">\r\n              <el-tag :type=\"getFeedbackTypeTag(row.feedback_type)\">\r\n                {{ getFeedbackTypeText(row.feedback_type) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"content\" label=\"反馈内容\">\r\n            <template #default=\"{ row }\">\r\n              <div class=\"feedback-content\">{{ row.content }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"submit_time\" label=\"提交时间\">\r\n            <template #default=\"{ row }\">\r\n              {{ formatDate(row.submit_time) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"status\" label=\"处理状态\">\r\n            <template #default=\"{ row }\">\r\n              <el-tag :type=\"row.status === 'processed' ? 'success' : 'info'\">\r\n                {{ row.status === 'processed' ? '已处理' : '待处理' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n      \r\n      <!-- 密码修改卡片 -->\r\n      <el-card class=\"password-card\" shadow=\"hover\">\r\n        <template #header>\r\n          <h2>修改密码</h2>\r\n        </template>\r\n        \r\n        <el-form\r\n          ref=\"passwordFormRef\"\r\n          :model=\"passwordForm\"\r\n          :rules=\"passwordRules\"\r\n          label-width=\"100px\"\r\n          class=\"password-form\"\r\n        >\r\n          <el-form-item label=\"原密码\" prop=\"old_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.old_password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入原密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"新密码\" prop=\"new_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.new_password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入新密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"确认密码\" prop=\"confirm_password\">\r\n            <el-input\r\n              v-model=\"passwordForm.confirm_password\"\r\n              type=\"password\"\r\n              placeholder=\"请再次输入新密码\"\r\n              show-password\r\n            />\r\n          </el-form-item>\r\n          \r\n          <el-form-item>\r\n            <el-button type=\"primary\" :loading=\"passwordLoading\" @click=\"handleChangePassword\">\r\n              修改密码\r\n            </el-button>\r\n            <el-button @click=\"resetPasswordForm\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { requestMethod } from '@/utils/request'\r\nimport { resolveMedia } from '@/utils/media'\r\nimport { User, Upload } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'UserCenterView',\r\n  components: {\r\n    User,\r\n    Upload\r\n  },\r\n  setup() {\r\n    const router = useRouter()\r\n    const userFormRef = ref()\r\n    const preferencesFormRef = ref()\r\n    const passwordFormRef = ref()\r\n    \r\n    // 用户信息\r\n    const userInfo = ref({})\r\n    const editMode = ref(false)\r\n    const updateLoading = ref(false)\r\n    const passwordLoading = ref(false)\r\n    \r\n    // 用户表单数据\r\n    const userForm = reactive({\r\n      username: '',\r\n      student_id: '',\r\n      email: '',\r\n      phone: ''\r\n    })\r\n    \r\n    // 偏好设置表单数据\r\n    const preferencesForm = reactive({\r\n      default_fatigue_level: 'medium',\r\n      preferred_music_type: 'natural',\r\n      notification_enabled: true,\r\n      auto_play: false\r\n    })\r\n    \r\n    // 密码修改表单数据\r\n    const passwordForm = reactive({\r\n      old_password: '',\r\n      new_password: '',\r\n      confirm_password: ''\r\n    })\r\n    \r\n    // 会话数据\r\n    const sessions = ref([])\r\n    const currentSessionId = ref(null)\r\n    \r\n    // 表单验证规则\r\n    const userRules = {\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' },\r\n        { min: 2, max: 50, message: '用户名长度在 2 到 50 个字符', trigger: 'blur' }\r\n      ],\r\n      student_id: [\r\n        { required: true, message: '请输入学号', trigger: 'blur' },\r\n        { min: 1, max: 20, message: '学号长度在 1 到 20 个字符', trigger: 'blur' }\r\n      ],\r\n      email: [\r\n        { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n      ],\r\n      phone: [\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    const passwordRules = {\r\n      old_password: [\r\n        { required: true, message: '请输入原密码', trigger: 'blur' }\r\n      ],\r\n      new_password: [\r\n        { required: true, message: '请输入新密码', trigger: 'blur' },\r\n        { min: 6, max: 50, message: '密码长度在 6 到 50 个字符', trigger: 'blur' }\r\n      ],\r\n      confirm_password: [\r\n        { required: true, message: '请确认新密码', trigger: 'blur' },\r\n        {\r\n          validator: (rule, value, callback) => {\r\n            if (value !== passwordForm.new_password) {\r\n              callback(new Error('两次输入密码不一致'))\r\n            } else {\r\n              callback()\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n    \r\n    // 获取当前用户 ID（优先使用本地存储的 user）\r\n    const getCurrentUserId = () => {\r\n      const u = localStorage.getItem('user')\r\n      if (u) {\r\n        try { return JSON.parse(u).id } catch { return 1 }\r\n      }\r\n      return 1\r\n    }\r\n\r\n    // 获取用户信息\r\n    const fetchUserInfo = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.get('/auth/profile', { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          // 解析 avatar 字段为可访问 URL\r\n          const data = result.data || {}\r\n          if (data.avatar) data.avatar = resolveMedia(data.avatar)\r\n          userInfo.value = data\r\n          // 同步表单数据\r\n          Object.assign(userForm, {\r\n            username: result.data.username,\r\n            student_id: result.data.student_id,\r\n            email: result.data.email || '',\r\n            phone: result.data.phone || ''\r\n          })\r\n\r\n          // 同步偏好设置\r\n          if (result.data.preferences) {\r\n            Object.assign(preferencesForm, {\r\n              default_fatigue_level: result.data.preferences.default_fatigue_level || 'medium',\r\n              preferred_music_type: result.data.preferences.preferred_music_type || 'natural',\r\n              notification_enabled: result.data.preferences.notification_enabled === 'true',\r\n              auto_play: result.data.preferences.auto_play === 'true'\r\n            })\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('获取用户信息失败:', error)\r\n        ElMessage.error('获取用户信息失败')\r\n      }\r\n    }\r\n    \r\n    // 获取会话列表\r\n    const fetchSessions = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.get('/auth/sessions', { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          sessions.value = result.data.sessions\r\n          // 找到当前会话\r\n          const currentToken = localStorage.getItem('session_token')\r\n          const currentSession = sessions.value.find(s => s.session_token === currentToken)\r\n          if (currentSession) {\r\n            currentSessionId.value = currentSession.id\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('获取会话列表失败:', error)\r\n      }\r\n    }\r\n    \r\n    // 更新用户资料\r\n    const handleUpdateProfile = async () => {\r\n      if (!userFormRef.value) return\r\n\r\n      try {\r\n        // Element Plus validate 在校验失败时会抛出错误，成功时不返回值\r\n        try {\r\n          await userFormRef.value.validate()\r\n        } catch (e) {\r\n          // 校验未通过，直接返回\r\n          return\r\n        }\r\n\r\n        updateLoading.value = true\r\n\r\n        const uid = getCurrentUserId()\r\n\r\n        // 构建干净的 payload：只包含后端期望的字段，且过滤掉空字符串\r\n        const payload = {}\r\n        if (userForm.username !== undefined && String(userForm.username).trim() !== '') {\r\n          payload.username = String(userForm.username).trim()\r\n        }\r\n        if (userForm.email !== undefined && String(userForm.email).trim() !== '') {\r\n          payload.email = String(userForm.email).trim()\r\n        }\r\n        if (userForm.phone !== undefined && String(userForm.phone).trim() !== '') {\r\n          payload.phone = String(userForm.phone).trim()\r\n        }\r\n\r\n        // 发送请求（user_id 作为 query 参数）\r\n        let result\r\n        try {\r\n          result = await requestMethod.put('/auth/profile', payload, { user_id: uid })\r\n        } catch (err) {\r\n          // 如果是后端的验证错误（FastAPI 返回 422），尽可能展示详细信息\r\n          const detail = err.response?.data || err.response?.data?.detail\r\n          console.error('更新用户资料失败 (后端):', err, detail)\r\n          if (detail && detail.detail) {\r\n            // FastAPI 验证错误通常在 detail 字段里\r\n            const msgs = Array.isArray(detail.detail) ? detail.detail.map(d => d.msg).join('; ') : String(detail.detail)\r\n            ElMessage.error(msgs || '更新失败，数据校验未通过')\r\n          } else if (err.response?.data?.msg) {\r\n            ElMessage.error(err.response.data.msg)\r\n          } else {\r\n            ElMessage.error(err.message || '更新失败，请稍后重试')\r\n          }\r\n          return\r\n        }\r\n\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('资料更新成功')\r\n          // 更新本地存储中的 user，保证 Navbar 等组件显示最新资料\r\n          try { localStorage.setItem('user', JSON.stringify(result.data)) } catch (e) {}\r\n          // 通知全局 auth 变化，以便 Navbar 刷新用户信息\r\n          try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n          editMode.value = false\r\n          await fetchUserInfo()\r\n        } else {\r\n          ElMessage.error(result?.msg || '更新失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('更新用户资料失败:', error)\r\n        ElMessage.error('更新失败，请稍后重试')\r\n      } finally {\r\n        updateLoading.value = false\r\n      }\r\n    }\r\n    \r\n    // 更新偏好设置\r\n    const updatePreference = async (key, value) => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.put('/auth/preference', {\r\n          preference_key: key,\r\n          preference_value: value\r\n        }, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('偏好设置已更新')\r\n        } else {\r\n          ElMessage.error(result?.msg || '更新失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('更新偏好设置失败:', error)\r\n        ElMessage.error('更新失败，请稍后重试')\r\n      }\r\n    }\r\n    \r\n    // 修改密码\r\n    const handleChangePassword = async () => {\r\n      if (!passwordFormRef.value) return\r\n      \r\n      try {\r\n        const valid = await passwordFormRef.value.validate()\r\n        if (!valid) return\r\n        \r\n        passwordLoading.value = true\r\n        \r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.post('/auth/change-password', {\r\n          old_password: passwordForm.old_password,\r\n          new_password: passwordForm.new_password\r\n        }, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('密码修改成功')\r\n          resetPasswordForm()\r\n        } else {\r\n          ElMessage.error(result?.msg || '修改失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('修改密码失败:', error)\r\n        ElMessage.error('修改失败，请稍后重试')\r\n      } finally {\r\n        passwordLoading.value = false\r\n      }\r\n    }\r\n    \r\n    // 撤销会话\r\n    const handleRevokeSession = async (sessionId) => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要撤销此会话吗？', '确认撤销', {\r\n          type: 'warning',\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消'\r\n        })\r\n        \r\n        const uid = getCurrentUserId()\r\n        const result = await requestMethod.delete(`/auth/session/${sessionId}`, { user_id: uid })\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('会话已撤销')\r\n          await fetchSessions()\r\n        } else {\r\n          ElMessage.error(result?.msg || '撤销失败')\r\n        }\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('撤销会话失败:', error)\r\n          ElMessage.error('撤销失败，请稍后重试')\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 退出所有设备\r\n    const handleLogoutAll = async () => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要退出所有设备吗？', '确认退出', {\r\n          type: 'warning',\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消'\r\n        })\r\n        \r\n  // 这里应该调用退出所有设备的API\r\n  ElMessage.success('已退出所有设备')\r\n  localStorage.removeItem('session_token')\r\n  localStorage.removeItem('user')\r\n  try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n  router.push('/login')\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('退出所有设备失败:', error)\r\n        }\r\n      }\r\n    }\r\n\r\n    // 删除账户（不可逆操作）\r\n    const handleDeleteAccount = async () => {\r\n      try {\r\n        await ElMessageBox.confirm('删除账户将永久清除您的所有个人数据，且不可恢复。确定要继续吗？', '确认删除', {\r\n          type: 'warning',\r\n          confirmButtonText: '确定删除',\r\n          cancelButtonText: '取消'\r\n        })\r\n\r\n        const uid = getCurrentUserId()\r\n        const token = localStorage.getItem('session_token')\r\n        if (!token) {\r\n          ElMessage.error('未检测到登录状态，请先登录')\r\n          return\r\n        }\r\n\r\n        const res = await requestMethod.post('/auth/delete', {\r\n          session_token: token,\r\n          user_id: uid\r\n        })\r\n\r\n        if (res && res.code === 200) {\r\n          ElMessage.success('账户已删除')\r\n          // 清理本地数据并跳转到登录页\r\n          localStorage.removeItem('session_token')\r\n          localStorage.removeItem('user')\r\n          try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n          router.push('/login')\r\n        } else {\r\n          ElMessage.error(res?.msg || '删除失败')\r\n        }\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('删除账户失败:', error)\r\n          ElMessage.error('删除失败，请稍后重试')\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 头像上传\r\n    const beforeAvatarUpload = (file) => {\r\n      const isImage = file.type.startsWith('image/')\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!')\r\n        return false\r\n      }\r\n      if (!isLt2M) {\r\n        ElMessage.error('图片大小不能超过 2MB!')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    \r\n    const uploadAvatar = async (options) => {\r\n      try {\r\n        const formData = new FormData()\r\n        formData.append('avatar', options.file)\r\n  formData.append('user_id', String(getCurrentUserId()))\r\n\r\n        const result = await requestMethod.postForm('/user/avatar/upload', formData)\r\n        if (result && result.code === 200) {\r\n          ElMessage.success('头像上传成功')\r\n          userInfo.value.avatar = resolveMedia(result.data.avatar_url)\r\n          // 更新本地存储并通知全局（使 Navbar 等组件实时刷新）\r\n          try { localStorage.setItem('user', JSON.stringify(Object.assign({}, JSON.parse(localStorage.getItem('user')||'{}'), { avatar: userInfo.value.avatar }))) } catch (e) {}\r\n          try { window.dispatchEvent(new Event('auth-changed')) } catch (e) {}\r\n        } else {\r\n          ElMessage.error(result?.msg || '上传失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('头像上传失败:', error)\r\n        ElMessage.error('上传失败，请稍后重试')\r\n      }\r\n    }\r\n    \r\n    // 重置表单\r\n    const resetForm = () => {\r\n      Object.assign(userForm, {\r\n        username: userInfo.value.username,\r\n        student_id: userInfo.value.student_id,\r\n        email: userInfo.value.email || '',\r\n        phone: userInfo.value.phone || ''\r\n      })\r\n    }\r\n    \r\n    const resetPasswordForm = () => {\r\n      Object.assign(passwordForm, {\r\n        old_password: '',\r\n        new_password: '',\r\n        confirm_password: ''\r\n      })\r\n    }\r\n    \r\n    // 格式化日期\r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n    \r\n    // 反馈相关数据\r\n    const feedbackFormRef = ref()\r\n    const showFeedbackForm = ref(false)\r\n    const feedbackForm = reactive({\r\n      type: 'suggestion',\r\n      content: ''\r\n    })\r\n    // 从后端拉取的历史反馈\r\n    const feedbackList = ref([])\r\n\r\n    // 分页参数（简单实现）\r\n    const feedbackPage = ref(1)\r\n    const feedbackPageSize = ref(20)\r\n\r\n    const fetchFeedbacks = async (page = 1) => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const res = await requestMethod.get('/feedback/history', { user_id: uid, page: page, page_size: feedbackPageSize.value })\r\n        if (res && res.code === 200) {\r\n          feedbackList.value = res.data.list || []\r\n          feedbackPage.value = res.data.page || page\r\n        }\r\n      } catch (error) {\r\n        console.error('获取历史反馈失败:', error)\r\n        ElMessage.error('获取历史反馈失败')\r\n      }\r\n    }\r\n    \r\n    // 获取反馈类型标签样式（兼容后端 feedback_type 值）\r\n    const getFeedbackTypeTag = (type) => {\r\n      const tagMap = {\r\n        accuracy: 'primary',\r\n        music: 'success',\r\n        function: 'warning',\r\n        suggestion: 'primary',\r\n        bug: 'danger',\r\n        other: 'warning'\r\n      }\r\n      return tagMap[type] || 'info'\r\n    }\r\n\r\n    // 获取反馈类型文本（中文友好名）\r\n    const getFeedbackTypeText = (type) => {\r\n      const textMap = {\r\n        accuracy: '检测准确性',\r\n        music: '音乐推荐',\r\n        function: '系统建议',\r\n        suggestion: '功能建议',\r\n        bug: '问题反馈',\r\n        other: '其他'\r\n      }\r\n      return textMap[type] || (type || '未知类型')\r\n    }\r\n    \r\n    // 提交反馈（调用后端）\r\n    const handleSubmitFeedback = async () => {\r\n      try {\r\n        const uid = getCurrentUserId()\r\n        const payload = {\r\n          user_id: uid,\r\n          feedback_type: feedbackForm.type,\r\n          content: feedbackForm.content,\r\n          score: 0\r\n        }\r\n        const res = await requestMethod.post('/feedback/submit', payload)\r\n        if (res && res.code === 200) {\r\n          ElMessage.success('反馈提交成功')\r\n          showFeedbackForm.value = false\r\n          feedbackForm.type = 'suggestion'\r\n          feedbackForm.content = ''\r\n          // 重新拉取第一页数据\r\n          await fetchFeedbacks(1)\r\n        } else {\r\n          ElMessage.error(res?.msg || '提交失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('提交反馈失败:', error)\r\n        ElMessage.error('提交反馈失败')\r\n      }\r\n    }\r\n    \r\n    // 组件挂载时获取数据\r\n    onMounted(() => {\r\n      fetchUserInfo()\r\n      fetchSessions()\r\n      fetchFeedbacks()\r\n    })\r\n    \r\n    return {\r\n      userFormRef,\r\n      preferencesFormRef,\r\n      passwordFormRef,\r\n      feedbackFormRef,\r\n      userInfo,\r\n      editMode,\r\n      updateLoading,\r\n      passwordLoading,\r\n      userForm,\r\n      preferencesForm,\r\n      passwordForm,\r\n      sessions,\r\n      currentSessionId,\r\n      showFeedbackForm,\r\n      feedbackForm,\r\n      feedbackList,\r\n      userRules,\r\n      passwordRules,\r\n      handleUpdateProfile,\r\n      updatePreference,\r\n      handleChangePassword,\r\n      handleRevokeSession,\r\n      handleLogoutAll,\r\n      handleDeleteAccount,\r\n      beforeAvatarUpload,\r\n      uploadAvatar,\r\n      resolveMedia,\r\n      resetForm,\r\n      resetPasswordForm,\r\n      formatDate,\r\n      getFeedbackTypeTag,\r\n      getFeedbackTypeText,\r\n      handleSubmitFeedback\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 设计令牌\r\n:root {\r\n  --bg-primary: #ffffff;\r\n  --bg-secondary: #f8fafc;\r\n  --color-primary: #3b82f6;\r\n  --color-primary-light: #93c5fd;\r\n  --color-primary-dark: #2563eb;\r\n  --text-primary: #1e293b;\r\n  --text-secondary: #64748b;\r\n  --border-color: #e2e8f0;\r\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);\r\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);\r\n  --radius-sm: 6px;\r\n  --radius-md: 12px;\r\n  --radius-lg: 16px;\r\n  --spacing-sm: 8px;\r\n  --spacing-md: 16px;\r\n  --spacing-lg: 24px;\r\n  --spacing-xl: 32px;\r\n}\r\n\r\n.user-center {\r\n  position: relative;\r\n  padding: 20px;\r\n  background-color: var(--bg-secondary);\r\n  min-height: 100vh;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.wave-background {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.wave {\r\n  position: absolute;\r\n  width: 200%;\r\n  height: 100px;\r\n  background: linear-gradient(90deg, var(--color-primary-light) 0%, transparent 100%);\r\n  opacity: 0.1;\r\n  border-radius: 50%;\r\n  animation: wave-animation 15s linear infinite;\r\n}\r\n\r\n.wave-1 {\r\n  top: 10%;\r\n  left: -50%;\r\n  animation-duration: 20s;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.wave-2 {\r\n  top: 30%;\r\n  left: -70%;\r\n  animation-duration: 25s;\r\n  animation-delay: -5s;\r\n  height: 150px;\r\n  background: linear-gradient(90deg, var(--color-primary) 0%, transparent 100%);\r\n}\r\n\r\n.wave-3 {\r\n  top: 50%;\r\n  left: -60%;\r\n  animation-duration: 18s;\r\n  animation-delay: -2s;\r\n  height: 80px;\r\n  background: linear-gradient(90deg, var(--color-primary-dark) 0%, transparent 100%);\r\n}\r\n\r\n@keyframes wave-animation {\r\n  0% {\r\n    transform: translateX(0) translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateX(-25%) translateY(10px);\r\n  }\r\n  100% {\r\n    transform: translateX(-50%) translateY(0);\r\n  }\r\n}\r\n\r\n.user-center-container {\r\n  position: relative;\r\n  z-index: 1;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: var(--spacing-lg);\r\n}\r\n\r\n.user-info-card,\r\n.preferences-card,\r\n.sessions-card,\r\n.password-card,\r\n.feedback-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n  \r\n  :deep(.el-card__header) {\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n    border-bottom: 1px solid var(--border-color);\r\n    border-radius: var(--radius-lg) var(--radius-lg) 0 0;\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    \r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      \r\n      h2 {\r\n        margin: 0;\r\n        color: var(--text-primary);\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n}\r\n\r\n.user-info-content {\r\n  display: flex;\r\n  gap: var(--spacing-xl);\r\n  align-items: flex-start;\r\n  padding: var(--spacing-md);\r\n}\r\n\r\n.avatar-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: var(--spacing-md);\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.5) 100%);\r\n  border-radius: var(--radius-md);\r\n  padding: var(--spacing-md);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-sm);\r\n  \r\n  .user-avatar {\r\n    border: 4px solid rgba(59, 130, 246, 0.2);\r\n    transition: transform 0.3s ease, border-color 0.3s ease;\r\n    \r\n    &:hover {\r\n      transform: scale(1.05);\r\n      border-color: var(--color-primary);\r\n    }\r\n  }\r\n  \r\n  .avatar-uploader {\r\n    .upload-btn {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      transition: all 0.2s ease;\r\n      \r\n      &:hover {\r\n        transform: translateY(-1px);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.user-form {\r\n  flex: 1;\r\n  \r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    :deep(.el-input.is-disabled .el-input__wrapper) {\r\n      background-color: rgba(248, 250, 252, 0.8);\r\n    }\r\n  }\r\n}\r\n\r\n.preferences-form {\r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-select__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n    \r\n    :deep(.el-switch) {\r\n      --el-switch-on-color: var(--color-primary);\r\n    }\r\n  }\r\n}\r\n\r\n.password-form {\r\n  max-width: 500px;\r\n  \r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 会话管理表格样式优化 */\r\n.sessions-card :deep(.el-table),\r\n.feedback-card :deep(.el-table) {\r\n  width: 100%;\r\n  border-radius: var(--radius-md);\r\n  overflow: hidden;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.sessions-card :deep(.el-table__header-wrapper),\r\n.feedback-card :deep(.el-table__header-wrapper) {\r\n  background-color: rgba(59, 130, 246, 0.05);\r\n}\r\n\r\n.sessions-card :deep(.el-table th),\r\n.feedback-card :deep(.el-table th) {\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n  background-color: transparent;\r\n  border-bottom: 1px solid var(--border-color);\r\n  padding: 12px 16px;\r\n}\r\n\r\n.sessions-card :deep(.el-table td),\r\n.feedback-card :deep(.el-table td) {\r\n  border-bottom: 1px solid var(--border-color);\r\n  transition: background-color 0.2s ease;\r\n  padding: 12px 16px;\r\n}\r\n\r\n.sessions-card :deep(.el-table__row:hover td),\r\n.feedback-card :deep(.el-table__row:hover td) {\r\n  background-color: rgba(59, 130, 246, 0.05);\r\n}\r\n\r\n.sessions-card :deep(.el-tag),\r\n.feedback-card :deep(.el-tag) {\r\n  border-radius: 16px;\r\n  font-size: 12px;\r\n  padding: 2px 8px;\r\n}\r\n\r\n.sessions-card :deep(.el-button--danger) {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.sessions-card :deep(.el-button--danger:hover) {\r\n  transform: translateY(-1px);\r\n  box-shadow: var(--shadow-sm);\r\n}\r\n\r\n/* 反馈表单样式 */\r\n.feedback-form-container {\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n  border-radius: var(--radius-md);\r\n  padding: var(--spacing-md);\r\n  margin-bottom: var(--spacing-lg);\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.feedback-form {\r\n  .el-form-item {\r\n    margin-bottom: var(--spacing-lg);\r\n    \r\n    :deep(.el-form-item__label) {\r\n      font-weight: 500;\r\n      color: var(--text-primary);\r\n    }\r\n    \r\n    :deep(.el-input__wrapper) {\r\n      border-radius: var(--radius-md);\r\n      transition: all 0.3s ease;\r\n      \r\n      &:focus-within {\r\n        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\r\n        border-color: var(--color-primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.feedback-content {\r\n  line-height: 1.6;\r\n  word-break: break-word;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n/* 反馈卡片样式优化 */\r\n.feedback-card {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: var(--radius-lg);\r\n  border: 1px solid var(--border-color);\r\n  box-shadow: var(--shadow-md);\r\n  transition: all 0.3s ease;\r\n  backdrop-filter: blur(8px);\r\n  \r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: var(--shadow-lg);\r\n  }\r\n  \r\n  :deep(.el-card__header) {\r\n    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(255, 255, 255, 0.8) 100%);\r\n    border-bottom: 1px solid var(--border-color);\r\n    border-radius: var(--radius-lg) var(--radius-lg) 0 0;\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    \r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      \r\n      h2 {\r\n        margin: 0;\r\n        color: var(--text-primary);\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n}\r\n\r\n/* 按钮样式优化 */\r\n:deep(.el-button) {\r\n  border-radius: var(--radius-md);\r\n  transition: all 0.3s ease;\r\n  font-weight: 500;\r\n  \r\n  &:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: var(--shadow-sm);\r\n  }\r\n  \r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n:deep(.el-button--primary) {\r\n  background-color: var(--color-primary);\r\n  border-color: var(--color-primary);\r\n  \r\n  &:hover {\r\n    background-color: var(--color-primary-dark);\r\n    border-color: var(--color-primary-dark);\r\n  }\r\n}\r\n\r\n// 应用响应式工具\r\n@import '@/assets/styles/breakpoints.scss';\r\n\r\n// 响应式适配 - 使用断点混入\r\n@include mobile-layout {\r\n  :root {\r\n    --spacing-page: 16px;\r\n    --spacing-lg: 16px;\r\n    --spacing-md: 12px;\r\n    --spacing-sm: 8px;\r\n  }\r\n  \r\n  .user-center-container {\r\n    padding: var(--spacing-page);\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(16px, 12px);\r\n    margin-bottom: var(--spacing-md);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n      \r\n      .avatar-container {\r\n        width: 80px;\r\n        height: 80px;\r\n      }\r\n      \r\n      .user-details {\r\n        text-align: center;\r\n      }\r\n    }\r\n    \r\n    .user-details {\r\n      .user-name {\r\n        @include responsive-font(20px, null, 18px);\r\n      }\r\n      \r\n      .user-id {\r\n        @include responsive-font(14px, null, 13px);\r\n      }\r\n    }\r\n    \r\n    .profile-form {\r\n      :deep(.el-form-item__label) {\r\n        font-size: 13px;\r\n      }\r\n      \r\n      :deep(.el-input__wrapper) {\r\n        padding: 6px 12px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .sessions-card {\r\n    margin-top: var(--spacing-md);\r\n    @include card(16px, 12px);\r\n    \r\n    .card-header {\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: var(--spacing-sm);\r\n    }\r\n    \r\n    .sessions-table :deep(.el-table__header th) {\r\n      padding: 10px 6px;\r\n      font-size: 12px;\r\n      \r\n      // 隐藏某些不重要的表头\r\n      &:nth-child(3), // IP地址\r\n      &:nth-child(4) { // 设备信息\r\n        display: none;\r\n      }\r\n    }\r\n    \r\n    .sessions-table :deep(.el-table__body td) {\r\n      padding: 10px 6px;\r\n      font-size: 12px;\r\n      \r\n      // 隐藏对应的表格内容\r\n      &:nth-child(3),\r\n      &:nth-child(4) {\r\n        display: none;\r\n      }\r\n    }\r\n    \r\n    // 自定义移动端操作按钮\r\n    .action-buttons {\r\n      .el-button {\r\n        padding: 6px 12px;\r\n        font-size: 12px;\r\n        min-width: auto;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 平板设备适配\r\n@include respond-to(sm) {\r\n  .user-info-card {\r\n    @include card(18px);\r\n    \r\n    .avatar-section {\r\n      width: 100%;\r\n      margin-bottom: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .sessions-table :deep(.el-table__header th) {\r\n    padding: 14px 10px;\r\n    font-size: 13px;\r\n  }\r\n  \r\n  .sessions-table :deep(.el-table__body td) {\r\n    padding: 14px 10px;\r\n    font-size: 13px;\r\n  }\r\n}\r\n\r\n// 大屏设备优化\r\n@include large-desktop-layout {\r\n  .user-center-container {\r\n    @include container(false);\r\n    max-width: 1400px;\r\n  }\r\n  \r\n  .content-wrapper {\r\n    display: grid;\r\n    grid-template-columns: 350px 1fr;\r\n    gap: 32px;\r\n  }\r\n  \r\n  .user-info-card {\r\n    @include card(24px);\r\n  }\r\n}\r\n\r\n// 超大屏设备优化\r\n@include extra-large-desktop-layout {\r\n  .user-center-container {\r\n    max-width: 1600px;\r\n  }\r\n}\r\n\r\n// 高对比度模式支持\r\n@include high-contrast {\r\n  .user-info-card,\r\n  .sessions-card {\r\n    border: 2px solid #000;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  :deep(.el-button) {\r\n    border-width: 2px;\r\n  }\r\n}\r\n\r\n// 减少动画模式支持\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.01ms !important;\r\n    animation-duration: 0.01ms !important;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./UserCenterView.vue?vue&type=template&id=23c6c0c8&scoped=true\"\nimport script from \"./UserCenterView.vue?vue&type=script&lang=js\"\nexport * from \"./UserCenterView.vue?vue&type=script&lang=js\"\n\nimport \"./UserCenterView.vue?vue&type=style&index=0&id=23c6c0c8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23c6c0c8\"]])\n\nexport default __exports__","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","<template>\r\n  <el-card \r\n    :class=\"[\r\n      'modern-card',\r\n      {\r\n        'wave-card': waveStyle,\r\n        'gradient-border': gradientBorder,\r\n        'glow-effect': glowEffect,\r\n        'compact': compact\r\n      },\r\n      customClass\r\n    ]\"\r\n    :shadow=\"shadowLevel\"\r\n  >\r\n    <!-- 头部装饰条 -->\r\n    <div \r\n      v-if=\"showHeaderBar || waveStyle\" \r\n      class=\"card-header-bar\"\r\n      :style=\"headerBarStyle\"\r\n    ></div>\r\n    \r\n    <!-- 标题栏 -->\r\n    <template #header v-if=\"title || $slots.header\">\r\n      <div class=\"card-header\">\r\n        <slot name=\"header\">\r\n          <h3 \r\n            class=\"card-title\" \r\n            :class=\"{\r\n              'title-gradient': gradientTitle,\r\n              'title-large': titleSize === 'large',\r\n              'title-medium': titleSize === 'medium',\r\n              'title-small': titleSize === 'small'\r\n            }\"\r\n          >\r\n            {{ title }}\r\n          </h3>\r\n        </slot>\r\n        <div class=\"card-actions\" v-if=\"$slots.actions\">\r\n          <slot name=\"actions\"></slot>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    \r\n    <!-- 内容区 -->\r\n    <div class=\"card-content\" :style=\"{ padding: contentPadding }\">\r\n      <slot></slot>\r\n    </div>\r\n    \r\n    <!-- 操作按钮区 -->\r\n    <div class=\"card-footer\" v-if=\"$slots.footer\">\r\n      <slot name=\"footer\"></slot>\r\n    </div>\r\n    \r\n    <!-- 波形装饰（仅在waveStyle时显示） -->\r\n    <div v-if=\"waveStyle\" class=\"wave-decoration\">\r\n      <svg viewBox=\"0 0 1440 320\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path \r\n          fill=\"currentColor\" \r\n          fill-opacity=\"0.08\" \r\n          d=\"M0,160L60,170.7C120,181,240,203,360,186.7C480,171,600,117,720,112C840,107,960,149,1080,176C1200,203,1320,213,1380,218.7L1440,224L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z\"\r\n        ></path>\r\n      </svg>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\n\r\nexport default {\r\n  name: 'CardContainer',\r\n  props: {\r\n    // 基础属性\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    shadow: {\r\n      type: String,\r\n      default: 'hover'\r\n    },\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    \r\n    // 新增视觉属性\r\n    waveStyle: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    gradientBorder: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    glowEffect: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    compact: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showHeaderBar: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    gradientTitle: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    \r\n    // 内容控制\r\n    titleSize: {\r\n      type: String,\r\n      default: 'medium',\r\n      validator: (value) => ['small', 'medium', 'large'].includes(value)\r\n    },\r\n    contentPadding: {\r\n      type: String,\r\n      default: '24px'\r\n    },\r\n    \r\n    // 主题控制\r\n    headerBarColor: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  \r\n  setup(props) {\r\n    // 计算阴影级别\r\n    const shadowLevel = computed(() => {\r\n      switch(props.shadow) {\r\n        case 'none': return 'none'\r\n        case 'always': return 'always'\r\n        case 'hover':\r\n        default: return 'hover'\r\n      }\r\n    })\r\n    \r\n    // 计算头部栏样式\r\n    const headerBarStyle = computed(() => {\r\n      if (props.headerBarColor) {\r\n        return {\r\n          backgroundColor: props.headerBarColor\r\n        }\r\n      }\r\n      return {}\r\n    })\r\n    \r\n    return {\r\n      shadowLevel,\r\n      headerBarStyle\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 导入全局 CSS 变量（如果需要）\r\n// @import '../../assets/styles/_variables.css';\r\n\r\n.modern-card {\r\n    margin-bottom: var(--spacing-lg);\r\n    border: none;\r\n    border-radius: var(--radius-card);\r\n    transition: var(--transition-base);\r\n    position: relative;\r\n    overflow: hidden;\r\n  \r\n  :deep(.el-card__header) {\r\n    padding: var(--spacing-md) var(--spacing-lg);\r\n    border-bottom: 1px solid var(--border-color);\r\n    background: transparent;\r\n  }\r\n  \r\n  :deep(.el-card__body) {\r\n    padding: var(--spacing-lg);\r\n  }\r\n  \r\n  &:hover {\r\n    box-shadow: var(--shadow-hover);\r\n  }\r\n  \r\n  // 紧凑模式\r\n  &.compact {\r\n    :deep(.el-card__header) {\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n    }\r\n    \r\n    :deep(.el-card__body) {\r\n      padding: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  // 渐变边框\r\n  &.gradient-border {\r\n    border: 1px solid transparent;\r\n    background-image: linear-gradient(var(--background-color-light), var(--background-color-light)),\r\n                     linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n    background-origin: border-box;\r\n    background-clip: padding-box, border-box;\r\n  }\r\n  \r\n  // 发光效果\r\n  &.glow-effect {\r\n    &:hover {\r\n      box-shadow: 0 0 20px rgba(106, 90, 205, 0.2); // 使用品牌主色的 RGB 值\r\n    }\r\n  }\r\n  \r\n  // 波形卡片\r\n  &.wave-card {\r\n    background-color: var(--background-color-light);\r\n    position: relative;\r\n    overflow: hidden;\r\n    \r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      height: 100%;\r\n      background-image: radial-gradient(circle at 10% 20%, rgba(var(--wave-blue-rgb), 0.05) 0%, transparent 20%),\r\n                        radial-gradient(circle at 80% 70%, rgba(var(--wave-purple-rgb), 0.05) 0%, transparent 30%);\r\n      pointer-events: none;\r\n    }\r\n  }\r\n}\r\n\r\n.card-header-bar {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 4px;\r\n  background: linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n  transform: scaleX(0);\r\n  transform-origin: left;\r\n  transition: var(--transition-base);\r\n  z-index: 1;\r\n}\r\n\r\n.modern-card:hover .card-header-bar {\r\n  transform: scaleX(1);\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: relative;\r\n  z-index: 2;\r\n  \r\n  .card-title {\r\n    margin: 0;\r\n    font-weight: var(--font-weight-semibold);\r\n    color: var(--text-primary);\r\n    transition: var(--transition-base);\r\n    line-height: var(--line-height-display);\r\n    \r\n    &.title-small {\r\n      font-size: var(--font-size-medium);\r\n    }\r\n    \r\n    &.title-medium {\r\n      font-size: var(--font-size-lg);\r\n    }\r\n    \r\n    &.title-large {\r\n      font-size: var(--font-size-extra-large);\r\n    }\r\n    \r\n    &.title-gradient {\r\n      background: linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n      -webkit-background-clip: text;\r\n      background-clip: text;\r\n      color: transparent;\r\n      display: inline-block;\r\n    }\r\n  }\r\n  \r\n  .card-actions {\r\n    display: flex;\r\n    gap: var(--spacing-sm);\r\n  }\r\n}\r\n\r\n.card-content {\r\n  min-height: 80px;\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.card-footer {\r\n  border-top: 1px solid var(--border-light);\r\n  padding: var(--spacing-md) var(--spacing-lg) 0;\r\n  margin-top: var(--spacing-md);\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: var(--spacing-sm);\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.wave-decoration {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 40px;\r\n  color: var(--color-primary);\r\n  opacity: 0.8;\r\n  z-index: 0;\r\n}\r\n\r\n.wave-decoration svg {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .modern-card {\r\n    :deep(.el-card__header) {\r\n      padding: var(--spacing-sm) var(--spacing-md);\r\n    }\r\n    \r\n    :deep(.el-card__body) {\r\n      padding: var(--spacing-md);\r\n    }\r\n  }\r\n  \r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: var(--spacing-sm);\r\n    \r\n    .card-actions {\r\n      width: 100%;\r\n      justify-content: flex-end;\r\n    }\r\n  }\r\n  \r\n  .card-footer {\r\n    flex-direction: column;\r\n    gap: var(--spacing-sm);\r\n    padding: var(--spacing-sm) var(--spacing-md) 0;\r\n  }\r\n  \r\n  .card-title {\r\n    font-size: var(--font-size-base) !important;\r\n  }\r\n}\r\n\r\n/* 深色模式适配 */\r\n@media (prefers-color-scheme: dark) {\r\n  .modern-card {\r\n    background-color: var(--dark-background-color-light);\r\n    \r\n    :deep(.el-card__header),\r\n    :deep(.el-card__body) {\r\n      background-color: transparent;\r\n    }\r\n    \r\n    &.gradient-border {\r\n      background-image: linear-gradient(var(--dark-background-color-light), var(--dark-background-color-light)),\r\n                       linear-gradient(90deg, var(--wave-blue), var(--wave-purple), var(--wave-pink));\r\n    }\r\n    \r\n    &.wave-card {\r\n      background-color: var(--dark-background-color-light);\r\n      \r\n      &::before {\r\n        background-image: radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.03) 0%, transparent 20%),\r\n                          radial-gradient(circle at 80% 70%, rgba(106, 90, 205, 0.03) 0%, transparent 30%);\r\n      }\r\n    }\r\n  }\r\n  \r\n  .card-title {\r\n    color: var(--dark-text-primary);\r\n  }\r\n}\r\n</style>","import { render } from \"./CardContainer.vue?vue&type=template&id=611ccd8c&scoped=true\"\nimport script from \"./CardContainer.vue?vue&type=script&lang=js\"\nexport * from \"./CardContainer.vue?vue&type=script&lang=js\"\n\nimport \"./CardContainer.vue?vue&type=style&index=0&id=611ccd8c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-611ccd8c\"]])\n\nexport default __exports__"],"names":["call","aCallable","anObject","tryToString","getIteratorMethod","$TypeError","TypeError","module","exports","argument","usingIterator","iteratorMethod","arguments","length","$","iterate","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","findWithoutClosingOnEarlyError","target","proto","real","forced","find","predicate","this","error","record","counter","value","stop","IS_RECORD","INTERRUPTED","result","classof","getMethod","isNullOrUndefined","Iterators","wellKnownSymbol","ITERATOR","it","createIteratorProxy","callWithSafeIterationClosing","iteratorHelperThrowsOnInvalidIterator","IS_PURE","MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR","mapWithoutClosingOnEarlyError","FORCED","IteratorProxy","iterator","next","done","mapper","map","TO_STRING_TAG","test","String","bind","isArrayIteratorMethod","lengthOfArrayLike","isPrototypeOf","getIterator","Result","stopped","ResultPrototype","prototype","iterable","unboundFunction","options","iterFn","index","step","that","AS_ENTRIES","IS_ITERATOR","fn","condition","callFn","ArrayPrototype","Array","undefined","uncurryThis","NATIVE_BIND","apply","useRouter","feedbackFormRef","ref","feedbackForm","reactive","type","content","rating","formRules","required","message","trigger","min","user","avatar","name","student_id","create_time","detection_count","intervention_count","feedbackList","loadUser","u","JSON","parse","window","localStorage","getItem","resolveMedia","username","e","console","formatDate","dateString","date","Date","toLocaleString","year","month","day","hour","minute","fetchFeedbackList","async","userId","id","res","requestMethod","get","user_id","page","page_size","data","list","submitFeedback","validate","err","ElMessage","payload","feedback_type","trim","score","post","success","dispatchEvent","Event","deleteFeedback","ElMessageBox","confirm","confirmButtonText","cancelButtonText","delete","feedbackId","code","filter","i","msg","includes","cancelFeedback","clearValidate","onMounted","addEventListener","onBeforeUnmount","removeEventListener","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","_createVNode","_component_el_page_header","extra","_withCtx","_cache","_component_el_row","gutter","_component_el_col","xs","sm","md","lg","xl","CardContainer","title","_hoisted_3","_component_el_avatar","size","src","_unref","_hoisted_4","_toDisplayString","_component_el_button","onClick","$event","_ctx","$router","push","_component_el_descriptions","column","_component_el_descriptions_item","label","_hoisted_5","_hoisted_6","_hoisted_7","_component_el_form","model","rules","_component_el_form_item","prop","_component_el_radio_group","_component_el_radio","_component_el_input","rows","placeholder","maxlength","_hoisted_8","_component_el_rate","max","_hoisted_9","_hoisted_10","_component_el_timeline","_Fragment","_renderList","item","_createBlock","_component_el_timeline_item","key","timestamp","submit_time","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_tag","feedback_type_name","_hoisted_14","disabled","_hoisted_15","_hoisted_16","_component_el_empty","description","footer","$refs","scrollIntoView","scrollTo","top","behavior","href","__exports__","style","_component_el_card","shadow","header","$setup","editMode","plain","handleDeleteAccount","userInfo","_component_el_icon","_component_User","_component_el_upload","beforeAvatarUpload","uploadAvatar","_component_Upload","userForm","userRules","span","email","phone","last_login_time","loading","updateLoading","handleUpdateProfile","resetForm","preferencesForm","_component_el_select","default_fatigue_level","onChange","updatePreference","_component_el_option","preferred_music_type","_component_el_switch","notification_enabled","auto_play","handleLogoutAll","_component_el_table","sessions","_component_el_table_column","default","row","last_activity","currentSessionId","handleRevokeSession","showFeedbackForm","handleSubmitFeedback","getFeedbackTypeTag","getFeedbackTypeText","status","passwordForm","passwordRules","old_password","new_password","confirm_password","passwordLoading","handleChangePassword","resetPasswordForm","components","User","Upload","setup","router","userFormRef","preferencesFormRef","passwordFormRef","pattern","validator","rule","callback","Error","getCurrentUserId","fetchUserInfo","uid","Object","assign","preferences","fetchSessions","currentToken","currentSession","s","session_token","put","detail","response","msgs","isArray","d","join","setItem","stringify","preference_key","preference_value","valid","sessionId","removeItem","token","file","isImage","startsWith","isLt2M","formData","FormData","append","postForm","avatar_url","feedbackPage","feedbackPageSize","fetchFeedbacks","tagMap","accuracy","music","function","suggestion","bug","other","textMap","render","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","$Object","CORRECT_ARGUMENTS","tryGet","O","tag","callee","_normalizeClass","$props","waveStyle","gradientBorder","glowEffect","compact","customClass","shadowLevel","showHeaderBar","_normalizeStyle","headerBarStyle","padding","contentPadding","_renderSlot","$slots","viewBox","xmlns","fill","gradientTitle","titleSize","actions","props","Boolean","headerBarColor","computed","backgroundColor"],"sourceRoot":""}